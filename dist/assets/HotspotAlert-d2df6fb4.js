import{_ as Fe}from"./_plugin-vue_export-helper-d6af9df2.js";/* empty css                  *//* empty css                */import{m as He}from"./music-5888d069.js";/* empty css                     *//* empty css                       *//* empty css                  */import{n as T,p as Ke,u as Oe,a as Qe,r as w,q as je,o as g,c as I,d as a,e as t,w as l,t as n,v as h,h as r,F as Pe,z as F,A as L,g as Je,B as k,C as re,D as Xe,G as Ze,H as et,I as tt,k as lt,i as at,J as st,K as ot,L as nt,M as it,N as rt,O as ut,aH as dt,T as ue,U as be,W as ct,X as Te,y as $,Y as vt,ap as ke,a1 as mt,Z as _t,_ as ft,Q as pt,a7 as gt,a8 as ht,a9 as wt,ab as yt,ac as Ct,ak as bt,ae as Tt,aa as kt,ag as Dt,af as At,aI as xt,aJ as St,an as It}from"./index-bf792e0d.js";const J={getAlertList(v={}){return T({url:"/hotspot-alert/list",method:"post",data:v})},getVideoAlerts(v){return T({url:`/hotspot-alert/video/${v}`,method:"get"})},getRecentAlerts(v=10){return T({url:"/hotspot-alert/recent",method:"get",params:{limit:v}})},getMusicAlerts(v,d=30){return T({url:`/hotspot-alert/music/${v}`,method:"get",params:{days:d}})},getMusicAlertList(v,d={}){return T({url:`/hotspot-alert/music/${v}/list`,method:"post",data:d})},getMusicStatistics(v,d=30){return T({url:`/hotspot-alert/music/${v}/statistics`,method:"get",params:{days:d}})},getMusicTrend(v,d=7){return T({url:`/hotspot-alert/music/${v}/trend`,method:"get",params:{days:d}})},getGlobalStatistics(v={}){return T({url:"/hotspot-alert/statistics",method:"get",params:v})},getAlertsByLevel(v,d=7){return T({url:`/hotspot-alert/level/${v}`,method:"get",params:{days:d}})},getGlobalTrend(v=7){return T({url:"/hotspot-alert/trend",method:"get",params:{days:v}})},triggerDetection(v){return T({url:"/hotspot-alert/trigger",method:"post",params:{awemeId:v}})},deleteAlert(v){return T({url:`/hotspot-alert/${v}`,method:"delete"})},batchDeleteAlerts(v){return T({url:"/hotspot-alert/batch",method:"delete",data:v})}};const Mt={class:"hotspot-layout"},Et={class:"header"},zt={class:"header-right"},Vt={class:"user-info"},Lt={class:"username"},$t={class:"main-container"},qt={class:"sidebar"},Wt={class:"content"},Bt={class:"page-header"},Yt={key:0,class:"page-title-section"},Nt={class:"page-title"},Gt={class:"music-meta"},Rt={class:"stats-row"},Ut={class:"stat-icon"},Ft={class:"stat-info"},Ht={class:"stat-value"},Kt={class:"stat-icon"},Ot={class:"stat-info"},Qt={class:"stat-value"},jt={class:"stat-icon"},Pt={class:"stat-info"},Jt={class:"stat-value"},Xt={class:"stat-icon"},Zt={class:"stat-info"},el={class:"stat-value"},tl={class:"filter-section"},ll={class:"filter-top"},al={class:"nav-controls"},sl={class:"search-controls"},ol={class:"filter-bottom"},nl={class:"filter-group"},il={class:"date-group"},rl={class:"card-header"},ul={class:"header-actions"},dl={key:0,class:"global-alert-info"},cl={class:"expand-content"},vl={class:"time-text"},ml={class:"growth-detail"},_l={class:"growth-rate"},fl={class:"growth-count"},pl={class:"growth-detail"},gl={class:"growth-rate"},hl={class:"growth-count"},wl={class:"growth-detail"},yl={class:"growth-rate"},Cl={class:"growth-count"},bl={class:"growth-detail"},Tl={class:"growth-rate"},kl={class:"growth-count"},Dl={class:"expand-actions"},Al={class:"video-id"},xl={key:2},Sl={class:"video-title"},Il={class:"title-text"},Ml={key:1,class:"na-text"},El={class:"author-name"},zl={class:"author-nickname"},Vl={class:"music-info"},Ll={key:0,class:"music-title"},$l={key:1,class:"music-author"},ql={key:2,class:"na-text"},Wl={class:"alert-stats"},Bl={class:"total-alerts"},Yl={class:"level-stats"},Nl={class:"trigger-score"},Gl={class:"stats-preview"},Rl={class:"stats-item"},Ul={class:"stats-item"},Fl={class:"detection-time"},Hl={class:"table-actions"},Kl={key:0,class:"alert-detail"},Ol={class:"detail-section"},Ql={class:"detail-section"},jl={class:"detail-section"},Pl={class:"detail-section"},Jl={class:"detail-section"},Xl={__name:"HotspotAlert",setup(v){const d=Ke(),B=Oe(),se=Qe(),H=w(!1),X=w([]),U=w([]),q=w([]),D=w(null),Z=w(null),M=w("all"),b=w(null),E=w(""),z=w(""),V=w(""),A=w(""),x=w(""),K=w({totalCount:0,level1Count:0,level2Count:0,level3Count:0,todayCount:0,weekCount:0,monthCount:0}),O=w(!1),ee=w(!1),c=w(null),de=s=>{switch(s){case 1:return"success";case 2:return"warning";case 3:return"danger";default:return"info"}},ce=s=>{switch(s){case 1:return"轻度飙升";case 2:return"中度飙升";case 3:return"高度爆发";default:return"未知"}},De=s=>{switch(s){case"short":return"success";case"medium":return"warning";case"long":return"danger";default:return"info"}},ve=s=>{switch(s){case"short":return"短期";case"medium":return"中期";case"long":return"长期";default:return"未知"}},me=s=>{switch(s){case"digg":return"点赞";case"comment":return"评论";case"collect":return"收藏";case"share":return"分享";case"comprehensive":return"综合";default:return"未知"}},y=s=>s?s>=1e4?(s/1e4).toFixed(1)+"w":s.toString():"0",W=s=>s?Math.round(s*100)/100:"0",oe=s=>s?Math.round(s*100)/100:"0",te=(s,e)=>!s&&!e?0:e?s?(s||0)-(e||0):0:s||0,_e=(s,e)=>{if(!s)return"score-low";let i,m;switch(e){case"short":i=60,m=100;break;case"medium":i=100,m=200;break;case"long":i=160,m=320;break;default:i=60,m=100;break}return s>m?"score-high":s>=i?"score-medium":"score-low"},Q=s=>s?new Date(s).toLocaleString("zh-CN"):"N/A",fe=s=>{const e={};return s.forEach(i=>{const m=i.awemeId;e[m]||(e[m]={awemeId:m,videoTitle:i.videoTitle,videoUrl:i.videoUrl,videoCover:i.videoCover,authorNickname:i.authorNickname,musicTitle:i.musicTitle,musicAuthor:i.musicAuthor,totalAlerts:0,latestAlert:null,alerts:[],level1Count:0,level2Count:0,level3Count:0,maxTriggerScore:0,maxTriggerScoreTimeWindow:null,currentDiggCount:0,currentCommentCount:0,currentCollectCount:0,currentShareCount:0,latestAlertDiggCount:0,latestAlertCommentCount:0,latestDetectionTime:null});const _=e[m];_.alerts.push(i),_.totalAlerts++,i.alertLevel===1?_.level1Count++:i.alertLevel===2?_.level2Count++:i.alertLevel===3&&_.level3Count++,i.triggerScore>_.maxTriggerScore&&(_.maxTriggerScore=i.triggerScore,_.maxTriggerScoreTimeWindow=i.timeWindow),(!_.latestAlert||new Date(i.detectionTime)>new Date(_.latestAlert.detectionTime))&&(_.latestAlert=i,_.currentDiggCount=i.currentDiggCount,_.currentCommentCount=i.currentCommentCount,_.currentCollectCount=i.currentCollectCount,_.currentShareCount=i.currentShareCount,_.latestAlertDiggCount=i.currentDiggCount,_.latestAlertCommentCount=i.currentCommentCount,_.latestDetectionTime=i.detectionTime)}),Object.values(e).sort((i,m)=>new Date(m.latestDetectionTime)-new Date(i.latestDetectionTime))},ne=()=>{N()},j=()=>{Y(),N()},Y=async()=>{try{const s={};A.value&&(s.startTime=A.value+" 00:00:00"),x.value&&(s.endTime=x.value+" 23:59:59"),D.value&&(s.musicId=D.value),console.log("统计接口调用参数:",s);const e=await J.getGlobalStatistics(s);e.code===200&&(K.value=e.data)}catch(s){console.error("加载统计数据失败:",s)}},Ae=async()=>{try{const s={orderBy:"create_time",orderDir:"DESC"};b.value&&(s.alertLevel=b.value),E.value&&(s.timeWindow=E.value),z.value&&(s.triggerMetric=z.value),V.value&&(s.awemeId=V.value.trim()),A.value&&(s.startTime=A.value+"T00:00:00"),x.value&&(s.endTime=x.value+"T23:59:59");const e=await J.getAlertList(s);if(e.code===200){const i=e.data||{};X.value=i.list||i||[],U.value=fe(X.value),console.log("全局热度提醒API响应:",i),console.log("分组后的数据:",U.value),await Y()}else k.error(e.message||"加载全局热度提醒列表失败")}catch(s){console.error("加载全局热度提醒列表失败:",s),k.error("加载全局热度提醒列表失败")}finally{H.value=!1}},le=s=>{switch(M.value=s,s){case"level1":b.value=1;break;case"level2":b.value=2;break;case"level3":b.value=3;break;default:b.value=null;break}N()},N=async()=>{if(H.value=!0,!D.value){await Ae();return}try{const s={orderBy:"create_time",orderDir:"DESC"};b.value&&(s.alertLevel=b.value),E.value&&(s.timeWindow=E.value),z.value&&(s.triggerMetric=z.value),V.value&&(s.awemeId=V.value.trim()),A.value&&(s.startTime=A.value+"T00:00:00"),x.value&&(s.endTime=x.value+"T23:59:59");const e=await J.getMusicAlertList(D.value,s);if(e.code===200){const i=e.data||{};X.value=i.list||i||[],U.value=fe(X.value),console.log("热度提醒API响应:",i),console.log("分组后的数据:",U.value),await Y()}else k.error(e.message||"加载热度提醒列表失败")}catch(s){console.error("加载热度提醒列表失败:",s),k.error("加载热度提醒列表失败")}finally{H.value=!1}},xe=s=>{if(s){const e={...d.query,searchKeyword:V.value||void 0,alertLevel:b.value||void 0,timeWindow:E.value||void 0,triggerMetric:z.value||void 0,startTime:A.value||void 0,endTime:x.value||void 0,currentFilter:M.value!=="all"?M.value:void 0};Object.keys(e).forEach(i=>{e[i]===void 0&&delete e[i]}),B.replace({path:d.path,query:e}).then(()=>{B.push(`/stats/${s}`)})}else k.warning("视频ID无效")},pe=s=>{c.value=s,ee.value=!0},Se=s=>{s&&window.open(`https://www.douyin.com/video/${s}`,"_blank")},Ie=async s=>{try{await re.confirm("确认删除该热度提醒？","警告",{type:"warning",confirmButtonText:"确认删除",cancelButtonText:"取消"});const e=await J.deleteAlert(s.id);e.code===200?(k.success("删除成功"),await N(),await Y()):k.error(e.message||"删除失败")}catch(e){e!=="cancel"&&k.error("删除失败")}},Me=s=>{q.value=s},Ee=async()=>{try{const s=q.value.reduce((m,_)=>{var ae;return m+(((ae=_.alerts)==null?void 0:ae.length)||0)},0);await re.confirm(`确认批量删除选中的 ${q.value.length} 个视频的 ${s} 条热度提醒？`,"警告",{type:"warning",confirmButtonText:"确认删除",cancelButtonText:"取消"});const e=[];if(q.value.forEach(m=>{m.alerts&&Array.isArray(m.alerts)&&m.alerts.forEach(_=>{_.id&&e.push(_.id)})}),e.length===0){k.warning("没有找到有效的热度提醒记录ID");return}const i=await J.batchDeleteAlerts(e);i.code===200?(k.success("批量删除成功"),O.value=!1,q.value=[],await N(),await Y()):k.error(i.message||"批量删除失败")}catch(s){s!=="cancel"&&k.error("批量删除失败")}},ze=async s=>{if(s!=="updateEmail"&&s==="logout")try{await re.confirm("确认退出登录？","提示",{type:"warning"}),await se.logout(),B.push("/login")}catch{}},Ve=()=>{B.push("/music")},Le=()=>{const e=new Date().toISOString().split("T")[0];!d.query.startTime&&!d.query.endTime&&(A.value=e,x.value=e)},$e=s=>{if(s){const e={...d.query,searchKeyword:V.value||void 0,alertLevel:b.value||void 0,timeWindow:E.value||void 0,triggerMetric:z.value||void 0,startTime:A.value||void 0,endTime:x.value||void 0,currentFilter:M.value!=="all"?M.value:void 0};Object.keys(e).forEach(i=>{e[i]===void 0&&delete e[i]}),B.replace({path:d.path,query:e}).then(()=>{const i={searchKeyword:s,from:"hotspot"};D.value&&(i.musicId=D.value),B.push({path:"/monitor",query:i})})}else k.warning("视频ID无效")};return je(async()=>{if(Le(),d.query.musicId){D.value=parseInt(d.query.musicId);try{const s=await He.getMusicById(D.value);(s==null?void 0:s.code)===200&&(Z.value=s.data)}catch(s){console.warn("获取音乐信息失败:",s)}await Y()}d.query.searchKeyword&&(V.value=d.query.searchKeyword),d.query.alertLevel&&(b.value=parseInt(d.query.alertLevel)),d.query.timeWindow&&(E.value=d.query.timeWindow),d.query.triggerMetric&&(z.value=d.query.triggerMetric),d.query.currentFilter&&(M.value=d.query.currentFilter),d.query.startTime&&(A.value=d.query.startTime),d.query.endTime&&(x.value=d.query.endTime),await Y(),await N()}),(s,e)=>{var Ce;const i=Xe,m=Ze,_=gt,ae=ht,qe=et,We=wt,Be=tt,C=lt,Ye=at,S=yt,ie=st,ge=ot,G=Ct,Ne=bt,p=Tt,R=kt,he=Dt,we=At,Ge=nt,ye=it,f=xt,P=St,Re=It;return g(),I("div",Mt,[a("header",Et,[e[20]||(e[20]=a("div",{class:"header-left"},[a("h1",{class:"system-title"},"")],-1)),a("div",zt,[a("div",Vt,[t(i,{size:32,class:"user-avatar"},{default:l(()=>{var o,u;return[r(n((u=(o=h(se).user)==null?void 0:o.username)==null?void 0:u.charAt(0)),1)]}),_:1}),a("span",Lt,n((Ce=h(se).user)==null?void 0:Ce.username),1),t(qe,{onCommand:ze,class:"user-dropdown"},{dropdown:l(()=>[t(ae,null,{default:l(()=>[t(_,{command:"updateEmail"},{default:l(()=>e[18]||(e[18]=[r("更新邮箱",-1)])),_:1,__:[18]}),t(_,{command:"logout"},{default:l(()=>e[19]||(e[19]=[r("退出登录",-1)])),_:1,__:[19]})]),_:1})]),default:l(()=>[t(m,{class:"dropdown-icon"},{default:l(()=>[t(h(rt))]),_:1})]),_:1})])])]),a("div",$t,[a("nav",qt,[t(Be,{"default-active":s.$route.path,router:"",class:"sidebar-menu"},{default:l(()=>[t(We,{index:"/music",class:"menu-item"},{default:l(()=>[t(m,null,{default:l(()=>[t(h(ut))]),_:1}),e[21]||(e[21]=a("span",null,"音乐管理",-1))]),_:1,__:[21]})]),_:1},8,["default-active"])]),a("main",Wt,[a("div",Bt,[D.value&&Z.value?(g(),I("div",Yt,[a("h2",Nt,[r(n(Z.value.title)+" ",1),a("span",Gt," · "+n(Z.value.author),1)]),e[22]||(e[22]=a("p",{class:"page-meta"},"热度提醒 · 实时监控视频热度变化",-1))])):(g(),I(Pe,{key:1},[e[23]||(e[23]=a("h2",{class:"page-title"},"全局热度提醒",-1)),e[24]||(e[24]=a("p",{class:"page-desc"},"监控所有音乐的视频热度变化，及时发现爆火趋势",-1))],64))]),a("div",Rt,[a("div",{class:F(["stat-card total",{"is-active":M.value==="all"}]),onClick:e[0]||(e[0]=o=>le("all"))},[a("div",Ut,[t(m,{size:"20"},{default:l(()=>[t(h(dt))]),_:1})]),a("div",Ft,[a("div",Ht,n(K.value.totalCount),1),e[25]||(e[25]=a("div",{class:"stat-label"},"总提醒数",-1))])],2),a("div",{class:F(["stat-card level1",{"is-active":M.value==="level1"}]),onClick:e[1]||(e[1]=o=>le("level1"))},[a("div",Kt,[t(m,{size:"20"},{default:l(()=>[t(h(ue))]),_:1})]),a("div",Ot,[a("div",Qt,n(K.value.level1Count),1),e[26]||(e[26]=a("div",{class:"stat-label"},"轻度飙升",-1))])],2),a("div",{class:F(["stat-card level2",{"is-active":M.value==="level2"}]),onClick:e[2]||(e[2]=o=>le("level2"))},[a("div",jt,[t(m,{size:"20"},{default:l(()=>[t(h(ue))]),_:1})]),a("div",Pt,[a("div",Jt,n(K.value.level2Count),1),e[27]||(e[27]=a("div",{class:"stat-label"},"中度飙升",-1))])],2),a("div",{class:F(["stat-card level3",{"is-active":M.value==="level3"}]),onClick:e[3]||(e[3]=o=>le("level3"))},[a("div",Xt,[t(m,{size:"20"},{default:l(()=>[t(h(ue))]),_:1})]),a("div",Zt,[a("div",el,n(K.value.level3Count),1),e[28]||(e[28]=a("div",{class:"stat-label"},"高度爆发",-1))])],2)]),a("div",tl,[a("div",ll,[a("div",al,[D.value?(g(),L(C,{key:0,onClick:Ve,icon:h(be),size:"default"},{default:l(()=>e[29]||(e[29]=[r(" 返回音乐管理 ",-1)])),_:1,__:[29]},8,["icon"])):(g(),L(C,{key:1,onClick:e[4]||(e[4]=o=>h(B).push("/music")),icon:h(be),size:"default"},{default:l(()=>e[30]||(e[30]=[r(" 选择音乐 ",-1)])),_:1,__:[30]},8,["icon"])),t(C,{onClick:e[5]||(e[5]=()=>N()),loading:H.value,icon:h(ct),size:"default"},{default:l(()=>e[31]||(e[31]=[r(" 刷新数据 ",-1)])),_:1,__:[31]},8,["loading","icon"])]),a("div",sl,[t(Ye,{modelValue:V.value,"onUpdate:modelValue":e[6]||(e[6]=o=>V.value=o),placeholder:"搜索视频ID或标题","prefix-icon":h(Te),style:{width:"280px"},clearable:"",onKeyup:Je(ne,["enter"]),onClear:ne},null,8,["modelValue","prefix-icon"]),t(C,{onClick:ne,icon:h(Te),type:"primary"},{default:l(()=>e[32]||(e[32]=[r("搜索",-1)])),_:1,__:[32]},8,["icon"])])]),a("div",ol,[a("div",nl,[e[33]||(e[33]=a("span",{class:"filter-label"},"筛选条件:",-1)),t(ie,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=o=>b.value=o),placeholder:"提醒级别",style:{width:"120px"},onChange:j,clearable:"",size:"default"},{default:l(()=>[t(S,{label:"轻度飙升",value:1}),t(S,{label:"中度飙升",value:2}),t(S,{label:"高度爆发",value:3})]),_:1},8,["modelValue"]),t(ie,{modelValue:E.value,"onUpdate:modelValue":e[8]||(e[8]=o=>E.value=o),placeholder:"时间窗口",style:{width:"120px"},onChange:j,clearable:"",size:"default"},{default:l(()=>[t(S,{label:"短期(1小时)",value:"short"}),t(S,{label:"中期(6小时)",value:"medium"}),t(S,{label:"长期(24小时)",value:"long"})]),_:1},8,["modelValue"]),t(ie,{modelValue:z.value,"onUpdate:modelValue":e[9]||(e[9]=o=>z.value=o),placeholder:"触发指标",style:{width:"120px"},onChange:j,clearable:"",size:"default"},{default:l(()=>[t(S,{label:"点赞",value:"digg"}),t(S,{label:"评论",value:"comment"}),t(S,{label:"收藏",value:"collect"}),t(S,{label:"分享",value:"share"}),t(S,{label:"综合",value:"comprehensive"})]),_:1},8,["modelValue"])]),a("div",il,[e[34]||(e[34]=a("span",{class:"filter-label"},"时间范围:",-1)),t(ge,{modelValue:A.value,"onUpdate:modelValue":e[10]||(e[10]=o=>A.value=o),type:"date",placeholder:"开始日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"140px"},onChange:j,size:"default"},null,8,["modelValue"]),e[35]||(e[35]=a("span",{class:"date-separator"},"至",-1)),t(ge,{modelValue:x.value,"onUpdate:modelValue":e[11]||(e[11]=o=>x.value=o),type:"date",placeholder:"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"140px"},onChange:j,size:"default"},null,8,["modelValue"])])])]),t(Ge,{class:"hotspot-table-card"},{header:l(()=>[a("div",rl,[e[36]||(e[36]=a("span",{class:"card-title"},"热度提醒列表",-1)),a("div",ul,[t(G,{content:"批量操作",placement:"top"},{default:l(()=>[t(C,{disabled:q.value.length===0,onClick:e[12]||(e[12]=o=>O.value=!0),size:"small"},{default:l(()=>[r(" 批量操作 ("+n(q.value.length)+") ",1)]),_:1},8,["disabled"])]),_:1})])])]),default:l(()=>[D.value?$("",!0):(g(),I("div",dl,[t(Ne,{title:"全局热度提醒",description:"当前显示所有音乐的热度提醒数据，您可以选择具体音乐查看更详细的信息",type:"info",closable:!1,style:{"margin-bottom":"16px"}})])),vt((g(),I("div",null,[t(he,{data:U.value,style:{width:"100%"},onSelectionChange:Me,"empty-text":U.value.length===0?"暂无热度提醒数据":"",size:"default","cell-style":{padding:"8px 6px"},"header-cell-style":{padding:"8px 6px",background:"#fafafa"}},{default:l(()=>[t(p,{type:"selection",width:"50"}),t(p,{type:"expand",width:"50"},{default:l(({row:o})=>[a("div",cl,[t(he,{data:o.alerts,size:"small",class:"expand-table",stripe:""},{default:l(()=>[t(p,{label:"检测时间","min-width":"160",align:"center"},{default:l(({row:u})=>[a("span",vl,n(Q(u.detectionTime)),1)]),_:1}),t(p,{label:"提醒级别",width:"110",align:"center"},{default:l(({row:u})=>[t(R,{type:de(u.alertLevel),size:"small"},{default:l(()=>[r(n(ce(u.alertLevel)),1)]),_:2},1032,["type"])]),_:1}),t(p,{label:"时间窗口",width:"110",align:"center"},{default:l(({row:u})=>[t(R,{type:De(u.timeWindow),size:"small"},{default:l(()=>[r(n(ve(u.timeWindow)),1)]),_:2},1032,["type"])]),_:1}),t(p,{label:"触发指标",width:"110",align:"center"},{default:l(({row:u})=>[t(R,{size:"small",type:"info"},{default:l(()=>[r(n(me(u.triggerMetric)),1)]),_:2},1024)]),_:1}),t(p,{label:"触发评分",width:"100",align:"center"},{default:l(({row:u})=>[a("span",{class:F([_e(u.triggerScore,u.timeWindow),"score-text"])},n(oe(u.triggerScore)),3)]),_:1}),t(p,{label:"点赞增长",width:"110",align:"center"},{default:l(({row:u})=>[a("div",ml,[a("div",_l,"+"+n(W(u.diggGrowthRate))+"%",1),a("div",fl,"+"+n(y(te(u.currentDiggCount,u.baselineDiggCount))),1)])]),_:1}),t(p,{label:"评论增长",width:"110",align:"center"},{default:l(({row:u})=>[a("div",pl,[a("div",gl,"+"+n(W(u.commentGrowthRate))+"%",1),a("div",hl,"+"+n(y(te(u.currentCommentCount,u.baselineCommentCount))),1)])]),_:1}),t(p,{label:"收藏增长",width:"110",align:"center"},{default:l(({row:u})=>[a("div",wl,[a("div",yl,"+"+n(W(u.collectGrowthRate))+"%",1),a("div",Cl,"+"+n(y(te(u.currentCollectCount,u.baselineCollectCount))),1)])]),_:1}),t(p,{label:"分享增长",width:"110",align:"center"},{default:l(({row:u})=>[a("div",bl,[a("div",Tl,"+"+n(W(u.shareGrowthRate))+"%",1),a("div",kl,"+"+n(y(te(u.currentShareCount,u.baselineShareCount))),1)])]),_:1}),t(p,{label:"操作",width:"100",align:"center",fixed:"right"},{default:l(({row:u})=>[a("div",Dl,[t(G,{content:"查看详情",placement:"top"},{default:l(()=>[t(C,{size:"small",type:"primary",link:"",icon:h(ke),onClick:Ue=>pe(u)},null,8,["icon","onClick"])]),_:2},1024),t(G,{content:"删除",placement:"top"},{default:l(()=>[t(C,{size:"small",type:"danger",link:"",icon:h(mt),onClick:Ue=>Ie(u)},null,8,["icon","onClick"])]),_:2},1024)])]),_:1})]),_:2},1032,["data"])])]),_:1}),t(p,{label:"视频ID",width:"140"},{default:l(({row:o})=>[a("div",Al,[o.awemeId&&o.videoUrl?(g(),L(we,{key:0,href:o.videoUrl,target:"_blank",type:"primary",class:"video-id-link"},{default:l(()=>[r(n(o.awemeId),1)]),_:2},1032,["href"])):o.awemeId?(g(),L(we,{key:1,href:`https://www.douyin.com/video/${o.awemeId}`,target:"_blank",type:"primary",class:"video-id-link"},{default:l(()=>[r(n(o.awemeId),1)]),_:2},1032,["href"])):(g(),I("span",xl,n(o.awemeId||"N/A"),1))])]),_:1}),t(p,{label:"视频标题",width:"200"},{default:l(({row:o})=>[a("div",Sl,[o.videoTitle?(g(),L(G,{key:0,content:o.videoTitle,placement:"top","show-after":500},{default:l(()=>[a("span",Il,n(o.videoTitle),1)]),_:2},1032,["content"])):(g(),I("span",Ml,"无标题"))])]),_:1}),t(p,{label:"播主",width:"120"},{default:l(({row:o})=>[a("div",El,[a("span",zl,n(o.authorNickname||"N/A"),1)])]),_:1}),D.value?$("",!0):(g(),L(p,{key:0,label:"音乐信息",width:"180"},{default:l(({row:o})=>[a("div",Vl,[o.musicTitle?(g(),I("div",Ll,n(o.musicTitle),1)):$("",!0),o.musicAuthor?(g(),I("div",$l,n(o.musicAuthor),1)):$("",!0),!o.musicTitle&&!o.musicAuthor?(g(),I("span",ql,"音乐信息不详")):$("",!0)])]),_:1})),t(p,{label:"提醒统计",width:"180",align:"center"},{default:l(({row:o})=>[a("div",Wl,[a("div",Bl,"共 "+n(o.totalAlerts)+" 条提醒",1),a("div",Yl,[o.level1Count>0?(g(),L(R,{key:0,type:"success",size:"small"},{default:l(()=>[r("轻度"+n(o.level1Count),1)]),_:2},1024)):$("",!0),o.level2Count>0?(g(),L(R,{key:1,type:"warning",size:"small"},{default:l(()=>[r("中度"+n(o.level2Count),1)]),_:2},1024)):$("",!0),o.level3Count>0?(g(),L(R,{key:2,type:"danger",size:"small"},{default:l(()=>[r("高度"+n(o.level3Count),1)]),_:2},1024)):$("",!0)])])]),_:1}),t(p,{label:"最高评分",width:"120",align:"center"},{default:l(({row:o})=>[a("div",Nl,[a("span",{class:F([_e(o.maxTriggerScore,o.maxTriggerScoreTimeWindow),"score-text"])},n(oe(o.maxTriggerScore)),3)])]),_:1}),t(p,{label:"预警数据",width:"130"},{default:l(({row:o})=>[a("div",Gl,[a("div",Rl,[e[37]||(e[37]=a("div",{class:"heart-icon"},[a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])],-1)),a("span",null,n(y(o.latestAlertDiggCount||0)),1)]),a("div",Ul,[t(m,{size:"14"},{default:l(()=>[t(h(_t))]),_:1}),a("span",null,n(y(o.latestAlertCommentCount||0)),1)])])]),_:1}),t(p,{label:"最新检测时间",width:"150",align:"center"},{default:l(({row:o})=>[a("div",Fl,n(Q(o.latestDetectionTime)),1)]),_:1}),t(p,{label:"操作",width:"150",fixed:"right"},{default:l(({row:o})=>[a("div",Hl,[t(G,{content:"查看统计",placement:"top"},{default:l(()=>[t(C,{type:"primary",size:"small",icon:h(ft),onClick:u=>xe(o.awemeId),link:""},null,8,["icon","onClick"])]),_:2},1024),t(G,{content:"查看详情",placement:"top"},{default:l(()=>[t(C,{type:"primary",size:"small",icon:h(ke),onClick:u=>pe(o.latestAlert),link:""},null,8,["icon","onClick"])]),_:2},1024),t(G,{content:"跳转监控",placement:"top"},{default:l(()=>[t(C,{type:"success",size:"small",icon:h(pt),onClick:u=>$e(o.awemeId),link:""},null,8,["icon","onClick"])]),_:2},1024)])]),_:1})]),_:1},8,["data","empty-text"])])),[[Re,H.value]])]),_:1})])]),t(ye,{modelValue:O.value,"onUpdate:modelValue":e[14]||(e[14]=o=>O.value=o),title:"批量操作",width:"400px"},{footer:l(()=>[t(C,{onClick:e[13]||(e[13]=o=>O.value=!1)},{default:l(()=>e[38]||(e[38]=[r("取消",-1)])),_:1,__:[38]}),t(C,{type:"danger",onClick:Ee},{default:l(()=>e[39]||(e[39]=[r(" 批量删除 ",-1)])),_:1,__:[39]})]),default:l(()=>[a("p",null,"已选择 "+n(q.value.length)+" 个热度提醒",1)]),_:1},8,["modelValue"]),t(ye,{modelValue:ee.value,"onUpdate:modelValue":e[17]||(e[17]=o=>ee.value=o),title:"热度提醒详情",width:"800px"},{footer:l(()=>[t(C,{onClick:e[15]||(e[15]=o=>ee.value=!1)},{default:l(()=>e[45]||(e[45]=[r("关闭",-1)])),_:1,__:[45]}),t(C,{type:"primary",onClick:e[16]||(e[16]=o=>{var u;return Se((u=c.value)==null?void 0:u.awemeId)})},{default:l(()=>e[46]||(e[46]=[r("查看视频",-1)])),_:1,__:[46]})]),default:l(()=>[c.value?(g(),I("div",Kl,[a("div",Ol,[e[40]||(e[40]=a("h4",null,"基本信息",-1)),t(P,{column:2,border:""},{default:l(()=>[t(f,{label:"视频ID"},{default:l(()=>[r(n(c.value.awemeId),1)]),_:1}),t(f,{label:"视频标题"},{default:l(()=>[r(n(c.value.videoTitle||"N/A"),1)]),_:1}),t(f,{label:"播主昵称"},{default:l(()=>[r(n(c.value.authorNickname||"N/A"),1)]),_:1}),t(f,{label:"提醒级别"},{default:l(()=>[t(R,{type:de(c.value.alertLevel),size:"small"},{default:l(()=>[r(n(ce(c.value.alertLevel)),1)]),_:1},8,["type"])]),_:1}),t(f,{label:"时间窗口"},{default:l(()=>[r(n(ve(c.value.timeWindow)),1)]),_:1}),t(f,{label:"触发指标"},{default:l(()=>[r(n(me(c.value.triggerMetric)),1)]),_:1})]),_:1})]),a("div",Ql,[e[41]||(e[41]=a("h4",null,"评分数据",-1)),t(P,{column:1,border:""},{default:l(()=>[t(f,{label:"触发评分"},{default:l(()=>[r(n(oe(c.value.triggerScore)),1)]),_:1})]),_:1})]),a("div",jl,[e[42]||(e[42]=a("h4",null,"增长数据",-1)),t(P,{column:2,border:""},{default:l(()=>[t(f,{label:"点赞增长率"},{default:l(()=>[r("+"+n(W(c.value.diggGrowthRate))+"%",1)]),_:1}),t(f,{label:"评论增长率"},{default:l(()=>[r("+"+n(W(c.value.commentGrowthRate))+"%",1)]),_:1}),t(f,{label:"收藏增长率"},{default:l(()=>[r("+"+n(W(c.value.collectGrowthRate))+"%",1)]),_:1}),t(f,{label:"分享增长率"},{default:l(()=>[r("+"+n(W(c.value.shareGrowthRate))+"%",1)]),_:1})]),_:1})]),a("div",Pl,[e[43]||(e[43]=a("h4",null,"当前数据 vs 基准数据",-1)),t(P,{column:4,border:""},{default:l(()=>[t(f,{label:"当前点赞"},{default:l(()=>[r(n(y(c.value.currentDiggCount)),1)]),_:1}),t(f,{label:"基准点赞"},{default:l(()=>[r(n(y(c.value.baselineDiggCount)),1)]),_:1}),t(f,{label:"当前评论"},{default:l(()=>[r(n(y(c.value.currentCommentCount)),1)]),_:1}),t(f,{label:"基准评论"},{default:l(()=>[r(n(y(c.value.baselineCommentCount)),1)]),_:1}),t(f,{label:"当前收藏"},{default:l(()=>[r(n(y(c.value.currentCollectCount)),1)]),_:1}),t(f,{label:"基准收藏"},{default:l(()=>[r(n(y(c.value.baselineCollectCount)),1)]),_:1}),t(f,{label:"当前分享"},{default:l(()=>[r(n(y(c.value.currentShareCount)),1)]),_:1}),t(f,{label:"基准分享"},{default:l(()=>[r(n(y(c.value.baselineShareCount)),1)]),_:1})]),_:1})]),a("div",Jl,[e[44]||(e[44]=a("h4",null,"时间信息",-1)),t(P,{column:2,border:""},{default:l(()=>[t(f,{label:"检测时间"},{default:l(()=>[r(n(Q(c.value.detectionTime)),1)]),_:1}),t(f,{label:"基准时间"},{default:l(()=>[r(n(Q(c.value.baselineTime)),1)]),_:1}),t(f,{label:"创建时间"},{default:l(()=>[r(n(Q(c.value.createTime)),1)]),_:1}),t(f,{label:"时间窗口"},{default:l(()=>[r(n(c.value.timeWindowHours)+"小时",1)]),_:1})]),_:1})])])):$("",!0)]),_:1},8,["modelValue"])])}}},ia=Fe(Xl,[["__scopeId","data-v-a564b625"]]);export{ia as default};
