import{u as w,a as D,r as v,n as _,p as F,o as l,c as d,d as t,h as r,t as e,s as g,N as S,O as V}from"./index-05b32c45.js";import{m as z}from"./monitor-f783f035.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const C={style:{padding:"20px",background:"#f5f5f5","min-height":"100vh"}},E={style:{"margin-bottom":"20px"}},I={style:{display:"flex",gap:"10px"}},N={style:{background:"white",border:"1px solid #ddd","border-radius":"4px",padding:"20px","margin-bottom":"20px"}},T={style:{"line-height":"1.6"}},$={style:{background:"white",border:"1px solid #ddd","border-radius":"4px",padding:"20px","margin-bottom":"20px"}},B={key:0,style:{"text-align":"center",padding:"40px"}},L={key:1,style:{"text-align":"center",padding:"40px",color:"#666"}},M={key:2},j={style:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px","margin-bottom":"20px"}},O={style:{"text-align":"center",padding:"20px",background:"#f8f9fa","border-radius":"4px"}},P={style:{"font-size":"24px","font-weight":"bold",color:"#409EFF","margin-bottom":"8px"}},R={style:{"text-align":"center",padding:"20px",background:"#f8f9fa","border-radius":"4px"}},q={style:{"font-size":"24px","font-weight":"bold",color:"#409EFF","margin-bottom":"8px"}},G={__name:"StandaloneDashboard",setup(H){const f=w(),p=D(),a=v(!1),s=v([]),k=_(()=>s.value.filter(n=>{var o;return((o=n.monitorVideo)==null?void 0:o.status)===1}).length),c=n=>{switch(n){case 1:return"启用";case 0:return"停用";case 2:return"无权限";case 3:return"失败";default:return"未知"}},u=n=>{console.log("导航到:",n),f.push(n)},x=async()=>{a.value=!0;try{console.log("独立Dashboard: 开始加载数据...");const n=await z.getMonitorList();console.log("独立Dashboard: API响应:",n),n.code===200&&(s.value=n.data||[],console.log("独立Dashboard: 监控数据:",s.value))}catch(n){console.error("独立Dashboard: 加载数据出错:",n)}finally{a.value=!1}};return F(()=>{console.log("独立Dashboard组件已挂载"),x()}),(n,o)=>{var b;return l(),d("div",C,[t("div",E,[o[3]||(o[3]=t("h1",{style:{color:"#333","margin-bottom":"10px"}},"独立仪表板测试",-1)),t("div",I,[t("button",{onClick:o[0]||(o[0]=i=>u("/monitor")),style:{padding:"8px 16px",background:"#409EFF",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 监控管理 "),t("button",{onClick:o[1]||(o[1]=i=>u("/test")),style:{padding:"8px 16px",background:"#28a745",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 测试页面 "),t("button",{onClick:o[2]||(o[2]=i=>u("/basic")),style:{padding:"8px 16px",background:"#6c757d",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 基础测试 ")])]),t("div",N,[o[10]||(o[10]=t("h3",{style:{"margin-top":"0"}},"调试信息",-1)),t("div",T,[t("p",null,[o[4]||(o[4]=t("strong",null,"用户信息:",-1)),r(" "+e(((b=g(p).user)==null?void 0:b.username)||"未登录"),1)]),t("p",null,[o[5]||(o[5]=t("strong",null,"Token:",-1)),r(" "+e(g(p).token?"已设置":"未设置"),1)]),t("p",null,[o[6]||(o[6]=t("strong",null,"认证状态:",-1)),r(" "+e(g(p).isAuthenticated?"已认证":"未认证"),1)]),t("p",null,[o[7]||(o[7]=t("strong",null,"监控数据数量:",-1)),r(" "+e(s.value.length),1)]),t("p",null,[o[8]||(o[8]=t("strong",null,"加载状态:",-1)),r(" "+e(a.value?"加载中":"已完成"),1)]),t("p",null,[o[9]||(o[9]=t("strong",null,"当前路由:",-1)),r(" "+e(n.$route.path),1)])])]),t("div",$,[t("div",{style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"15px"}},[o[11]||(o[11]=t("h3",{style:{margin:"0"}},"数据概览",-1)),t("button",{onClick:x,style:{padding:"8px 16px",background:"#409EFF",color:"white",border:"none","border-radius":"4px",cursor:"pointer"}}," 刷新数据 ")]),a.value?(l(),d("div",B,o[12]||(o[12]=[t("p",null,"加载中...",-1)]))):s.value.length===0?(l(),d("div",L,o[13]||(o[13]=[t("p",null,"暂无监控视频数据",-1),t("p",{style:{"font-size":"12px","margin-top":"10px"}},"请前往监控管理页面添加视频",-1)]))):(l(),d("div",M,[t("div",j,[t("div",O,[t("div",P,e(s.value.length),1),o[14]||(o[14]=t("div",{style:{color:"#666","font-size":"14px"}},"监控视频数",-1))]),t("div",R,[t("div",q,e(k.value),1),o[15]||(o[15]=t("div",{style:{color:"#666","font-size":"14px"}},"监控中",-1))])]),t("div",null,[o[18]||(o[18]=t("h4",null,"最近监控视频",-1)),(l(!0),d(S,null,V(s.value.slice(0,5),(i,h)=>{var m,y;return l(),d("div",{key:h,style:{padding:"10px",border:"1px solid #eee","margin-bottom":"10px","border-radius":"4px"}},[t("p",null,[o[16]||(o[16]=t("strong",null,"视频ID:",-1)),r(" "+e(((m=i.monitorVideo)==null?void 0:m.awemeId)||"N/A"),1)]),t("p",null,[o[17]||(o[17]=t("strong",null,"状态:",-1)),r(" "+e(c((y=i.monitorVideo)==null?void 0:y.status)),1)])])}),128))])]))])])}}},U=A(G,[["__scopeId","data-v-2c19241b"]]);export{U as default};
