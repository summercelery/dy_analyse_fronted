import{_ as Ot}from"./_plugin-vue_export-helper-d6af9df2.js";/* empty css                  *//* empty css                     *//* empty css                       */import{p as Ee}from"./tagUtils-de5cbb20.js";/* empty css                     *//* empty css                  */import{m as We}from"./music-5888d069.js";/* empty css                *//* empty css                 */import{n as F,p as Lt,u as Bt,a as Yt,r as _,q as Ht,s as Rt,o as n,c as p,d as o,e as l,w as s,t as r,v as h,h as d,F as Q,x as ie,y as S,z as ye,A as V,g as Xe,B as c,C as Ce,D as Gt,G as Jt,H as jt,I as Kt,k as Qt,J as Wt,K as Xt,i as Zt,L as ea,M as ta,N as aa,O as la,P as sa,Q as oa,R as Ze,S as na,T as ia,U as ra,V as ua,W as da,X as Ve,Y as ca,f as va,Z as pa,_ as ma,$ as fa,a0 as ga,a1 as _a,a2 as ha,a3 as ya,a4 as Ca,a5 as ka,a6 as wa,a7 as xa,a8 as Sa,a9 as Ia,aa as ba,ab as Ea,ac as Va,ad as Ta,ae as Ma,af as Da,ag as $a,ah as Na,ai as za,aj as Aa,j as Pa,ak as Ua,al as Fa,l as qa,am as Oa,an as La}from"./index-bf792e0d.js";const R={getMonitorList(C={}){return F({url:"/monitor/list",method:"get",params:C,paramsSerializer:{serialize:f=>{const P=new URLSearchParams;return Object.keys(f).forEach(G=>{const q=f[G];Array.isArray(q)?P.append(G,JSON.stringify(q)):q!=null&&P.append(G,q)}),P.toString()}}})},addMonitor(C){return F({url:"/monitor/add",method:"post",data:C})},updateStatus(C,f){return F({url:`/monitor/status/${C}`,method:"put",data:f})},deleteMonitor(C){return F({url:`/monitor/${C}`,method:"delete"})},uploadExcel(C){return F({url:"/monitor/upload/excel",method:"post",data:C,headers:{"Content-Type":"multipart/form-data"}})},uploadExcelAsync(C){return F({url:"/monitor/upload/excel/async",method:"post",data:C,headers:{"Content-Type":"multipart/form-data"}})},getTaskProgress(C){return F({url:`/import-task/${C}/progress`,method:"get"})},getTaskDetails(C){return F({url:`/import-task/${C}`,method:"get"})},getUserTasks(C=10){return F({url:`/import-task/list?limit=${C}`,method:"get"})},getMonitorStatistics(C){return F({url:"/monitor/statistics",method:"get",params:{musicId:C}})},getMonitorTags(C){return F({url:"/monitor/tags",method:"get",params:{musicId:C}})},getMonitorChannels(C){return F({url:"/monitor/channels",method:"get",params:{musicId:C}})}};const Ba={class:"monitor-layout"},Ya={class:"header"},Ha={class:"header-right"},Ra={class:"user-info"},Ga={class:"username"},Ja={class:"main-container"},ja={class:"sidebar"},Ka={class:"content"},Qa={class:"page-header"},Wa={key:0,class:"page-title-section"},Xa={class:"page-title"},Za={class:"music-meta"},el={class:"page-meta"},tl={key:0},al={key:0,class:"stats-row"},ll={class:"stat-icon"},sl={class:"stat-info"},ol={class:"stat-value"},nl={class:"stat-icon"},il={class:"stat-info"},rl={class:"stat-value"},ul={class:"stat-icon"},dl={class:"stat-info"},cl={class:"stat-value"},vl={class:"stat-icon"},pl={class:"stat-info"},ml={class:"stat-value"},fl={class:"stat-icon"},gl={class:"stat-info"},_l={class:"stat-value"},hl={key:1,class:"section-divider"},yl={key:2,class:"toolbar"},Cl={class:"toolbar-left"},kl={class:"toolbar-right"},wl={key:0,class:"hotspot-search-controls"},xl={class:"time-range-controls"},Sl={key:1,class:"normal-search-controls"},Il={key:3,class:"tag-filter-section"},bl={class:"tag-filter-row"},El={class:"tag-filter-content"},Vl={key:0,class:"filter-group"},Tl={class:"tag-count"},Ml={key:1,class:"filter-group"},Dl={class:"tag-count"},$l={class:"card-header"},Nl={class:"header-actions"},zl={key:0,class:"no-music-selected"},Al={key:1},Pl={class:"video-id"},Ul={key:1};const Fl={class:"video-desc"},ql={class:"desc-text"},Ol={key:1,class:"na-text"},Ll={class:"author-name"},Bl={key:0,class:"hashtag-list"},Yl={key:1,class:"na-text"},Hl={key:0,class:"search-tag-list"},Rl={key:1,class:"na-text"},Gl={key:0,class:"search-channel-list"},Jl={key:1,class:"na-text"},jl={key:0,class:"stats-preview"},Kl={class:"stats-item"},Ql={class:"stats-item"},Wl={key:1,class:"na-text"},Xl={class:"publish-time"},Zl={class:"create-time"},es={class:"table-actions"},ts={key:0,class:"pagination-container"},as={style:{"line-height":"1.6"}},ls={style:{margin:"8px 0"}},ss={class:"music-info-display"},os={class:"music-title"},ns={key:0,class:"music-album"},is={key:1,class:"music-tags"},rs={class:"music-info-display"},us={class:"task-progress-container"},ds={class:"task-info"},cs={class:"progress-section"},vs={key:0,class:"progress-stats"},ps={class:"task-stats-row"},ms={class:"task-stats-row"},fs={style:{color:"#67c23a"}},gs={style:{color:"#909399"}},_s={style:{color:"#f56c6c"}},hs={key:0,class:"processing-tip"},ys={key:1,class:"completed-message"},Cs={key:2,class:"failed-message"},ks={__name:"Monitor",setup(C){const f=Lt(),P=Bt(),G=Yt(),q=_(!1),Te=_(!1),Me=_([]),W=_(""),J=_([]),y=_(null),b=_(null),$=_([]),le=_([]),N=_([]),se=_([]),X=_("diggCount"),Z=_("desc"),z=_(!1),O=_(""),L=_(""),T=_(1),oe=_(10),De=_(0),K=_({totalCount:0,manualCount:0,autoCount:0,abnormalCount:0,hotspotAlertCount:0}),re=_(!1),ue=_(!1),ke=_(!1),$e=_(!1),ne=_("single"),I=_({videoUrl:"",file:null}),w=_({id:null,fileName:"",status:"PENDING",progress:0,totalCount:0,processedCount:0,successCount:0,skipCount:0,errorCount:0}),B=_(null),ve=_(!1),Ne=_(!1),pe=_({email:""}),et=t=>{oe.value=t,T.value=1,E(1)},tt=t=>{T.value=t,E(t)},de=()=>{T.value=1,E(1)},at=()=>{if(z.value=!z.value,!z.value)O.value="",L.value="";else{if(!O.value){const t=new Date;t.setHours(0,0,0,0);const e=t.getFullYear(),u=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),v=String(t.getHours()).padStart(2,"0"),k=String(t.getMinutes()).padStart(2,"0"),M=String(t.getSeconds()).padStart(2,"0");O.value=`${e}-${u}-${i} ${v}:${k}:${M}`}if(!L.value){const t=new Date;t.setHours(23,59,59,0);const e=t.getFullYear(),u=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),v=String(t.getHours()).padStart(2,"0"),k=String(t.getMinutes()).padStart(2,"0"),M=String(t.getSeconds()).padStart(2,"0");L.value=`${e}-${u}-${i} ${v}:${k}:${M}`}}T.value=1,E(1),c.success(z.value?"已开启热度异动时间筛选":"已关闭热度异动时间筛选")},Ae=()=>{z.value&&O.value&&L.value&&(T.value=1,E(1))},ee=async()=>{if(y.value)try{const t=await R.getMonitorStatistics(y.value);console.log("Monitor页面: 统计数据API响应:",t),t.code===200?(K.value=t.data,console.log("Monitor页面: 统计数据:",K.value)):(console.warn("获取统计数据失败:",t.message),K.value={totalCount:0,manualCount:0,autoCount:0,abnormalCount:0,hotspotAlertCount:0})}catch(t){console.error("Monitor页面: 加载统计数据失败:",t),K.value={totalCount:0,manualCount:0,autoCount:0,abnormalCount:0,hotspotAlertCount:0}}},te=async()=>{if(y.value)try{const[t,e]=await Promise.all([R.getMonitorTags(y.value),R.getMonitorChannels(y.value)]);console.log("Monitor页面: 标签统计API响应:",t),console.log("Monitor页面: 频道统计API响应:",e),t.code===200?le.value=t.data||[]:(console.warn("获取标签数据失败:",t.message),le.value=[]),e.code===200?se.value=e.data||[]:(console.warn("获取频道数据失败:",e.message),se.value=[]),console.log("Monitor页面: 标签数据:",le.value),console.log("Monitor页面: 频道数据:",se.value)}catch(t){console.error("Monitor页面: 加载标签和频道数据失败:",t),le.value=[],se.value=[]}},Y=_("all"),we=()=>{T.value=1,E(1)},me=t=>{var u;const e=(u=t.monitorVideo)==null?void 0:u.tag;if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string")try{const i=JSON.parse(e);if(Array.isArray(i))return i}catch{return e.split(",").map(v=>v.trim()).filter(v=>v)}return[]},fe=t=>{var u;const e=(u=t.monitorVideo)==null?void 0:u.channel;if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string")try{const i=JSON.parse(e);if(Array.isArray(i))return i}catch{return e.split(",").map(v=>v.trim()).filter(v=>v)}return[]},lt=t=>{const e=$.value.indexOf(t);e>-1?$.value.splice(e,1):$.value.push(t),T.value=1,E(1);const u=$.value.length+N.value.length;u>0?c.success(`已选择 ${u} 个筛选条件`):c.success("已清除所有筛选条件")},st=t=>{const e=N.value.indexOf(t);e>-1?N.value.splice(e,1):N.value.push(t),T.value=1,E(1);const u=$.value.length+N.value.length;u>0?c.success(`已选择 ${u} 个筛选条件`):c.success("已清除所有筛选条件")},ot=t=>{},nt=t=>{},it=()=>{$.value=[],N.value=[],T.value=1,E(1),c.success("已清除所有筛选条件")},xe=t=>{Y.value=t,z.value=!1,O.value="",L.value="",T.value=1,E(1);const e={all:"已显示所有监控视频",manual:"已过滤显示手动添加的视频",error:"已过滤显示异常监控的视频",auto:"已过滤显示自动添加的视频"};c.success(e[t]||"过滤完成")},ge=t=>{var u;let e=null;if((u=t.videoInfo)!=null&&u.topics?e=t.videoInfo.topics:t.topics&&(e=t.topics),Array.isArray(e))return e;if(typeof e=="string")try{const i=JSON.parse(e);if(Array.isArray(i))return i}catch{}return[]},ze=t=>{var i;let e=null;return(i=t.videoInfo)!=null&&i.desc?e=t.videoInfo.desc:t.desc&&(e=t.desc),e?e.replace(/#[^\s#]*/g,"").trim()||e:""},Pe=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",rt=t=>t?new Date(t).toLocaleString("zh-CN"):"N/A",ut=t=>{if(!t)return"N/A";const e=t.toString().length===10;return new Date(e?t*1e3:t).toLocaleString("zh-CN")},dt=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",ct=t=>{switch(t){case 1:return"success";case 0:return"info";case 2:return"warning";case 3:return"danger";default:return"info"}},vt=t=>{switch(t){case 1:return"启用";case 0:return"停用";case 2:return"无权限";case 3:return"失败";default:return"未知"}},E=async(t=1)=>{if(q.value=!0,!y.value){c.warning("请先选择要查看的音乐监控"),q.value=!1,P.push("/music");return}try{const e={musicId:y.value,pageNum:t,pageSize:oe.value};if(W.value){const v=W.value.trim();/^\d+$/.test(v)?e.videoId=v:v.includes("douyin.com")||v.includes("iesdouyin.com")?e.videoUrl=v:e.authorName=v}$.value.length>0&&(e.tag=$.value),N.value.length>0&&(e.channel=N.value),Y.value==="manual"?e.type=1:Y.value==="auto"&&(e.type=0),Y.value==="error"&&(e.status=0);const u={diggCount:"digg_count",publishTime:"video_publish_time",createTime:"create_time"};e.sortBy=u[X.value]||"create_time",e.sortOrder=Z.value.toUpperCase(),z.value&&(e.todayChanged=1,O.value&&(e.startTime=O.value),L.value&&(e.endTime=L.value)),console.log("Monitor页面: 查询参数:",e);const i=await R.getMonitorList(e);if(console.log("Monitor页面: 监控列表API响应:",i),i.code===200){const v=i.data||{},k=v.list||[];console.log("Monitor页面: 新接口响应数据:",v),console.log("Monitor页面: 监控列表数据:",k),T.value=v.pageNum||1,De.value=v.total||0;const M=k.map(m=>({monitorVideo:{id:m.monitorVideoId,awemeId:m.videoId,videoUrl:m.videoUrl,musicId:m.musicId,status:m.status,type:m.type,createTime:m.createTime,videoPublishTime:m.videoPublishTime,tag:m.searchTags,channel:m.searchChannel},videoInfo:{desc:m.videoDescription,authorId:m.authorId,topics:m.topicTags?JSON.parse(m.topicTags):[]},authorInfo:{nickname:m.authorName,followerCount:m.followerCount,authorId:m.authorId},latestStats:{diggCount:m.latestDiggCount,commentCount:m.latestCommentCount},userMonitor:{musicId:m.musicId}}));if(console.log("Monitor页面: 转换后的数据:",M),y.value&&!b.value)try{const m=await We.getMusicById(y.value);m.code===200&&(b.value=m.data)}catch(m){console.warn("获取音乐信息失败:",m)}Me.value=M,t===1&&(await ee(),await te())}else c.error(i.message||"加载监控列表失败")}catch(e){console.error("Monitor页面: 加载监控列表失败:",e),c.error("加载监控列表失败")}finally{q.value=!1}},pt=async()=>{var t,e,u,i;if(!I.value.videoUrl.trim()){c.warning("请输入视频链接或ID");return}if(!y.value){c.warning("请先选择要监控的音乐");return}Te.value=!0;try{const v=await R.addMonitor({videoUrl:I.value.videoUrl.trim(),musicId:y.value});v.code===200?(c.success("添加监控成功"),re.value=!1,I.value={videoUrl:"",file:null},await E(),await ee(),await te()):(t=v.message)!=null&&t.includes("音乐ID不能为空，音乐为必选项")?c.error("音乐为必选项，请先选择音乐"):(e=v.message)!=null&&e.includes("指定的音乐不存在，请选择有效的音乐")?c.error("所选音乐不存在，请重新选择"):(u=v.message)!=null&&u.includes("视频链接不能为空")?c.error("请输入视频链接"):(i=v.message)!=null&&i.includes("添加失败，可能是链接格式错误或已存在")?c.error("视频链接格式错误或该视频已在监控中"):c.error(v.message||"添加监控失败")}catch{c.error("添加监控失败")}finally{Te.value=!1}},Ue=()=>{if(I.value={videoUrl:"",file:null},_e.value)try{_e.value.clearFiles()}catch(t){console.warn("清理上传组件失败:",t)}},mt=()=>{const t=document.createElement("a");t.href="/监控视频模板.xlsx",t.download="监控视频模板.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t)},_e=_(),ft=t=>{var i,v;if(console.log("文件选择:",t),!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv","application/csv"].includes(t.raw.type)&&!t.name.endsWith(".csv")){c.error("请选择 .xlsx、.xls 或 .csv 格式的文件");try{(i=_e.value)==null||i.clearFiles()}catch(k){console.warn("清理上传文件失败:",k)}I.value.file=null;return}const u=10*1024*1024;if(t.raw.size>u){c.error("文件大小不能超过 10MB");try{(v=_e.value)==null||v.clearFiles()}catch(k){console.warn("清理上传文件失败:",k)}I.value.file=null;return}I.value.file=t.raw},gt=()=>{console.log("文件移除"),I.value.file=null},_t=async()=>{var t,e,u,i,v;if(!y.value){c.warning("请先选择要监控的音乐");return}if(!I.value.file){c.warning("请选择要上传的Excel文件");return}if(!I.value.file.name){c.error("文件信息不完整，请重新选择文件"),I.value.file=null;return}$e.value=!0;try{const k=new FormData;k.append("file",I.value.file),k.append("musicId",y.value.toString()),console.log("开始上传Excel文件:",{fileName:I.value.file.name,fileSize:I.value.file.size,musicId:y.value});const M=await R.uploadExcelAsync(k);if(M.code===200){const{taskId:m,message:Oe}=M.data;c.success("文件上传成功，正在后台处理中...");const A=((t=I.value.file)==null?void 0:t.name)||"未知文件";re.value=!1,Ue(),ht(m,A)}else{let m=M.message||"Excel上传失败";(e=M.message)!=null&&e.includes("请选择要上传的Excel文件")?m="请选择要上传的Excel文件":(u=M.message)!=null&&u.includes("文件格式不正确，请上传Excel文件(.xlsx或.xls)")?m="文件格式不正确，请上传Excel文件(.xlsx或.xls)":(i=M.message)!=null&&i.includes("音乐ID不能为空，音乐为必选项")?m="音乐为必选项，请先选择音乐":(v=M.message)!=null&&v.includes("指定的音乐不存在，请选择有效的音乐")&&(m="所选音乐不存在，请重新选择音乐"),c.error(m)}}catch(k){console.error("Excel上传失败:",k),c.error("Excel上传失败，请检查网络连接后重试")}finally{$e.value=!1}},ht=(t,e)=>{w.value={id:t,fileName:e,status:"PENDING",progress:0,totalCount:0,processedCount:0,successCount:0,skipCount:0,errorCount:0},ke.value=!0,yt()},yt=()=>{B.value&&clearInterval(B.value),B.value=setInterval(async()=>{try{const t=await R.getTaskProgress(w.value.id);if(t.code===200){const e=t.data;w.value={...w.value,...e},(e.status==="COMPLETED"||e.status==="FAILED")&&(clearInterval(B.value),B.value=null,e.status==="COMPLETED"&&(await E(),await ee(),await te()))}}catch(t){console.error("查询任务进度失败:",t)}},2e3)},Fe=()=>{B.value&&(clearInterval(B.value),B.value=null),ke.value=!1},Ct=t=>{switch(t){case"PENDING":return"等待处理";case"PROCESSING":return"处理中";case"COMPLETED":return"已完成";case"FAILED":return"处理失败";default:return"未知状态"}},kt=t=>{switch(t){case"PENDING":return"info";case"PROCESSING":return"warning";case"COMPLETED":return"success";case"FAILED":return"danger";default:return"info"}},wt=t=>{if(t){const e={...f.query,searchKeyword:W.value||void 0,selectedSearchTags:$.value.length>0?JSON.stringify($.value):void 0,selectedSearchChannels:N.value.length>0?JSON.stringify(N.value):void 0,currentFilter:Y.value!=="all"?Y.value:void 0,sortField:X.value!=="diggCount"?X.value:void 0,sortOrder:Z.value!=="desc"?Z.value:void 0,currentPage:T.value!==1?T.value:void 0,pageSize:oe.value!==10?oe.value:void 0,showHotspotFilter:z.value?"true":void 0,startTime:O.value||void 0,endTime:L.value||void 0};Object.keys(e).forEach(u=>{e[u]===void 0&&delete e[u]}),P.replace({path:f.path,query:e}).then(()=>{P.push(`/stats/${t}`)})}else c.warning("视频ID无效")},xt=async t=>{var v;const u=((v=t.monitorVideo)==null?void 0:v.status)===1?0:1,i=u===1?"启用":"停用";try{await Ce.confirm(`确认${i}该监控视频？`,"提示",{type:"warning"});const k=await R.updateStatus(t.monitorVideo.id,{status:u});k.code===200?(await E(),await ee(),await te(),c.success(`${i}成功`)):c.error(k.message||`${i}失败`)}catch(k){k!=="cancel"&&c.error(`${i}失败`)}},St=async t=>{try{await Ce.confirm("确认删除该监控视频？删除后无法恢复","警告",{type:"warning",confirmButtonText:"确认删除",cancelButtonText:"取消"});const e=await R.deleteMonitor(t.monitorVideo.id);e.code===200?(await E(),await ee(),await te(),c.success("删除成功")):c.error(e.message||"删除失败")}catch(e){e!=="cancel"&&c.error("删除失败")}},It=t=>{J.value=t},qe=async t=>{const e=t===1?"启用":"停用";try{await Ce.confirm(`确认批量${e}选中的 ${J.value.length} 个监控项？`,"提示",{type:"warning"});const u=J.value.map(i=>R.updateStatus(i.monitorVideo.id,{status:t}));await Promise.all(u),await E(),await ee(),await te(),ue.value=!1,J.value=[],c.success(`批量${e}成功`)}catch(u){u!=="cancel"&&c.error(`批量${e}失败`)}},bt=async()=>{try{await Ce.confirm(`确认批量删除选中的 ${J.value.length} 个监控项？删除后无法恢复`,"警告",{type:"warning",confirmButtonText:"确认删除",cancelButtonText:"取消"});const t=J.value.map(e=>R.deleteMonitor(e.monitorVideo.id));await Promise.all(t),await E(),await ee(),await te(),ue.value=!1,J.value=[],c.success("批量删除成功")}catch(t){t!=="cancel"&&c.error("批量删除失败")}},Et=async t=>{var e;if(t==="updateEmail"){pe.value.email=((e=G.user)==null?void 0:e.email)||"",ve.value=!0;return}if(t==="logout")try{await Ce.confirm("确认退出登录？","提示",{type:"warning"}),await G.logout(),P.push("/login")}catch{}},Vt=t=>/^[\w.!#$%&'*+/=?^`{|}~-]+@[\w-]+(\.[\w-]+)+$/.test(t),Tt=async()=>{const t=(pe.value.email||"").trim();if(!t){c.warning("请输入邮箱地址");return}if(!Vt(t)){c.warning("邮箱格式不正确");return}Ne.value=!0;try{const e=await wa.updateEmail({email:t});e.code===200?(G.setUser({...G.user||{},email:t}),c.success("邮箱更新成功"),ve.value=!1):c.error(e.message||"邮箱更新失败")}catch{c.error("邮箱更新失败，请稍后重试")}finally{Ne.value=!1}},Mt=()=>{if(f.query.from==="hotspot"){const t={};y.value&&(t.musicId=y.value),P.push({path:"/hotspot",query:t})}else P.push("/music")},Dt=t=>{var u,i;const e=((u=t==null?void 0:t.videoInfo)==null?void 0:u.authorId)||((i=t==null?void 0:t.authorInfo)==null?void 0:i.authorId);e?P.push(`/author/${e}`):c.warning("无法获取播主ID")};return Ht(async()=>{if(f.query.musicId){y.value=parseInt(f.query.musicId);try{const t=await We.getMusicById(y.value);(t==null?void 0:t.code)===200&&(b.value=t.data)}catch(t){console.warn("获取音乐信息失败:",t)}await ee(),await te()}if(f.query.searchKeyword&&(W.value=f.query.searchKeyword),f.query.selectedSearchTags)try{$.value=JSON.parse(f.query.selectedSearchTags)}catch(t){console.warn("解析selectedSearchTags失败:",t)}if(f.query.selectedSearchChannels)try{N.value=JSON.parse(f.query.selectedSearchChannels)}catch(t){console.warn("解析selectedSearchChannels失败:",t)}f.query.currentFilter&&(Y.value=f.query.currentFilter),f.query.sortField&&(X.value=f.query.sortField),f.query.sortOrder&&(Z.value=f.query.sortOrder),f.query.currentPage&&(T.value=parseInt(f.query.currentPage)),f.query.pageSize&&(oe.value=parseInt(f.query.pageSize)),f.query.showHotspotFilter&&(z.value=f.query.showHotspotFilter==="true"),f.query.startTime&&(O.value=f.query.startTime),f.query.endTime&&(L.value=f.query.endTime),await E(T.value)}),Rt(()=>{B.value&&(clearInterval(B.value),B.value=null)}),(t,e)=>{var Ge;const u=Gt,i=Jt,v=xa,k=Sa,M=jt,m=Ia,Oe=Kt,A=ba,x=Qt,j=Ea,Se=Wt,Le=Xt,Ie=Zt,ae=Va,$t=Ta,U=Ma,Be=Da,Nt=$a,zt=Na,At=ea,Ye=za,Pt=Aa,he=Pa,He=Ua,Ut=Fa,Re=qa,be=ta,Ft=Oa,qt=La;return n(),p("div",Ba,[o("header",Ya,[e[33]||(e[33]=o("div",{class:"header-left"},[o("h1",{class:"system-title"},"")],-1)),o("div",Ha,[o("div",Ra,[l(u,{size:32,class:"user-avatar"},{default:s(()=>{var a,g;return[d(r((g=(a=h(G).user)==null?void 0:a.username)==null?void 0:g.charAt(0)),1)]}),_:1}),o("span",Ga,r((Ge=h(G).user)==null?void 0:Ge.username),1),l(M,{onCommand:Et,class:"user-dropdown"},{dropdown:s(()=>[l(k,null,{default:s(()=>[l(v,{command:"updateEmail"},{default:s(()=>e[31]||(e[31]=[d("更新邮箱",-1)])),_:1,__:[31]}),l(v,{command:"logout"},{default:s(()=>e[32]||(e[32]=[d("退出登录",-1)])),_:1,__:[32]})]),_:1})]),default:s(()=>[l(i,{class:"dropdown-icon"},{default:s(()=>[l(h(aa))]),_:1})]),_:1})])])]),o("div",Ja,[o("nav",ja,[l(Oe,{"default-active":t.$route.path,router:"",class:"sidebar-menu"},{default:s(()=>[l(m,{index:"/music",class:"menu-item"},{default:s(()=>[l(i,null,{default:s(()=>[l(h(la))]),_:1}),e[34]||(e[34]=o("span",null,"音乐管理",-1))]),_:1,__:[34]})]),_:1},8,["default-active"])]),o("main",Ka,[o("div",Qa,[y.value&&b.value?(n(),p("div",Wa,[o("h2",Xa,[d(r(b.value.title)+" ",1),o("span",Za," · "+r(b.value.author),1)]),o("p",el,[o("span",null,"专辑："+r(b.value.album||"-"),1),b.value.tagList&&h(Ee)(b.value.tagList).length?(n(),p("span",tl,[e[35]||(e[35]=d(" · 标签： ",-1)),(n(!0),p(Q,null,ie(h(Ee)(b.value.tagList),a=>(n(),V(A,{key:a,size:"small",class:"music-tag"},{default:s(()=>[d(r(a),1)]),_:2},1024))),128))])):S("",!0)])])):(n(),p(Q,{key:1},[e[36]||(e[36]=o("h2",{class:"page-title"},"监控管理",-1)),e[37]||(e[37]=o("p",{class:"page-desc"},"管理您的抖音视频监控任务，实时掌握数据变化",-1))],64))]),y.value?(n(),p("div",al,[o("div",{class:ye(["stat-card total",{"is-active":Y.value==="all"&&!z.value}]),onClick:e[0]||(e[0]=a=>xe("all"))},[o("div",ll,[l(i,{size:"20"},{default:s(()=>[l(h(sa))]),_:1})]),o("div",sl,[o("div",ol,r(K.value.totalCount),1),e[38]||(e[38]=o("div",{class:"stat-label"},"监控视频总数",-1))])],2),o("div",{class:ye(["stat-card hotspot",{"is-active":z.value}]),onClick:at},[o("div",nl,[l(i,{size:"20"},{default:s(()=>[l(h(oa))]),_:1})]),o("div",il,[o("div",rl,r(K.value.hotspotAlertCount||0),1),e[39]||(e[39]=o("div",{class:"stat-label"},"热度异动",-1))])],2),o("div",{class:ye(["stat-card manual",{"is-active":Y.value==="manual"&&!z.value}]),onClick:e[1]||(e[1]=a=>xe("manual"))},[o("div",ul,[l(i,{size:"20"},{default:s(()=>[l(h(Ze))]),_:1})]),o("div",dl,[o("div",cl,r(K.value.manualCount),1),e[40]||(e[40]=o("div",{class:"stat-label"},"手动添加",-1))])],2),o("div",{class:ye(["stat-card auto",{"is-active":Y.value==="auto"&&!z.value}]),onClick:e[2]||(e[2]=a=>xe("auto"))},[o("div",vl,[l(i,{size:"20"},{default:s(()=>[l(h(na))]),_:1})]),o("div",pl,[o("div",ml,r(K.value.autoCount),1),e[41]||(e[41]=o("div",{class:"stat-label"},"自动添加",-1))])],2),o("div",{class:ye(["stat-card error",{"is-active":Y.value==="error"&&!z.value}]),onClick:e[3]||(e[3]=a=>xe("error"))},[o("div",fl,[l(i,{size:"20"},{default:s(()=>[l(h(ia))]),_:1})]),o("div",gl,[o("div",_l,r(K.value.abnormalCount),1),e[42]||(e[42]=o("div",{class:"stat-label"},"异常监控",-1))])],2)])):S("",!0),y.value?(n(),p("div",hl)):S("",!0),y.value?(n(),p("div",yl,[o("div",Cl,[y.value?(n(),V(x,{key:0,onClick:Mt,icon:h(ra)},{default:s(()=>[d(r(h(f).query.from==="hotspot"?"返回热度提醒":"返回音乐管理"),1)]),_:1},8,["icon"])):S("",!0),l(x,{type:"primary",onClick:e[4]||(e[4]=a=>re.value=!0),icon:h(ua)},{default:s(()=>e[43]||(e[43]=[d(" 添加监控 ",-1)])),_:1,__:[43]},8,["icon"]),l(x,{onClick:e[5]||(e[5]=()=>E()),loading:q.value,icon:h(da)},{default:s(()=>e[44]||(e[44]=[d(" 刷新 ",-1)])),_:1,__:[44]},8,["loading","icon"])]),o("div",kl,[z.value?(n(),p("div",wl,[l(Se,{modelValue:X.value,"onUpdate:modelValue":e[6]||(e[6]=a=>X.value=a),placeholder:"排序方式",style:{width:"120px"},onChange:we},{default:s(()=>[l(j,{label:"按点赞数",value:"diggCount"}),l(j,{label:"按发布时间",value:"publishTime"}),l(j,{label:"按创建时间",value:"createTime"})]),_:1},8,["modelValue"]),l(Se,{modelValue:Z.value,"onUpdate:modelValue":e[7]||(e[7]=a=>Z.value=a),placeholder:"排序顺序",style:{width:"90px"},onChange:we},{default:s(()=>[l(j,{label:"降序",value:"desc"}),l(j,{label:"升序",value:"asc"})]),_:1},8,["modelValue"]),o("div",xl,[l(Le,{modelValue:O.value,"onUpdate:modelValue":e[8]||(e[8]=a=>O.value=a),type:"datetime",placeholder:"开始时间",style:{width:"160px"},format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",onChange:Ae},null,8,["modelValue"]),e[45]||(e[45]=o("span",{class:"time-separator"},"至",-1)),l(Le,{modelValue:L.value,"onUpdate:modelValue":e[9]||(e[9]=a=>L.value=a),type:"datetime",placeholder:"结束时间",style:{width:"160px"},format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",onChange:Ae},null,8,["modelValue"])]),l(Ie,{modelValue:W.value,"onUpdate:modelValue":e[10]||(e[10]=a=>W.value=a),placeholder:"搜索视频ID、链接或播主名称","prefix-icon":h(Ve),style:{width:"250px"},clearable:"",onKeyup:Xe(de,["enter"]),onClear:de},null,8,["modelValue","prefix-icon"]),l(x,{onClick:de,icon:h(Ve),type:"primary"},{default:s(()=>e[46]||(e[46]=[d("搜索",-1)])),_:1,__:[46]},8,["icon"])])):(n(),p("div",Sl,[l(Se,{modelValue:X.value,"onUpdate:modelValue":e[11]||(e[11]=a=>X.value=a),placeholder:"排序方式",style:{width:"140px","margin-right":"12px"},onChange:we},{default:s(()=>[l(j,{label:"按点赞数",value:"diggCount"}),l(j,{label:"按发布时间",value:"publishTime"}),l(j,{label:"按创建时间",value:"createTime"})]),_:1},8,["modelValue"]),l(Se,{modelValue:Z.value,"onUpdate:modelValue":e[12]||(e[12]=a=>Z.value=a),placeholder:"排序顺序",style:{width:"100px","margin-right":"12px"},onChange:we},{default:s(()=>[l(j,{label:"降序",value:"desc"}),l(j,{label:"升序",value:"asc"})]),_:1},8,["modelValue"]),l(Ie,{modelValue:W.value,"onUpdate:modelValue":e[13]||(e[13]=a=>W.value=a),placeholder:"搜索视频ID、链接或播主名称","prefix-icon":h(Ve),style:{width:"300px"},clearable:"",onKeyup:Xe(de,["enter"]),onClear:de},null,8,["modelValue","prefix-icon"]),l(x,{onClick:de,icon:h(Ve),style:{"margin-left":"8px"}},{default:s(()=>e[47]||(e[47]=[d("搜索",-1)])),_:1,__:[47]},8,["icon"])]))])])):S("",!0),le.value.length>0||se.value.length>0?(n(),p("div",Il,[o("div",bl,[o("div",El,[le.value.length>0?(n(),p("div",Vl,[e[48]||(e[48]=o("span",{class:"filter-group-title"},"搜索标签：",-1)),(n(!0),p(Q,null,ie(le.value,a=>(n(),V(A,{key:`tag-${a.tagName}`,size:"large",type:$.value.includes(a.tagName)?"primary":"info",effect:$.value.includes(a.tagName)?"dark":"light",class:"filter-tag",onClick:g=>lt(a.tagName)},{default:s(()=>[d(r(a.tagName)+" ",1),o("span",Tl," ("+r(a.videoCount)+") ",1)]),_:2},1032,["type","effect","onClick"]))),128))])):S("",!0),se.value.length>0?(n(),p("div",Ml,[e[49]||(e[49]=o("span",{class:"filter-group-title"},"搜索类型：",-1)),(n(!0),p(Q,null,ie(se.value,a=>(n(),V(A,{key:`channel-${a.channelName}`,size:"large",type:N.value.includes(a.channelName)?"warning":"info",effect:N.value.includes(a.channelName)?"dark":"light",class:"filter-tag",onClick:g=>st(a.channelName)},{default:s(()=>[d(r(a.channelName)+" ",1),o("span",Dl," ("+r(a.videoCount)+") ",1)]),_:2},1032,["type","effect","onClick"]))),128))])):S("",!0)]),$.value.length>0||N.value.length>0?(n(),V(x,{key:0,type:"text",size:"small",onClick:it,class:"clear-tags-btn"},{default:s(()=>[d(" 清除所有 ("+r($.value.length+N.value.length)+") ",1)]),_:1})):S("",!0)])])):S("",!0),l(At,{class:"monitor-table-card"},{header:s(()=>[o("div",$l,[e[50]||(e[50]=o("span",{class:"card-title"},"监控列表",-1)),o("div",Nl,[l(ae,{content:"批量操作",placement:"top"},{default:s(()=>[l(x,{disabled:J.value.length===0,onClick:e[14]||(e[14]=a=>ue.value=!0),size:"small"},{default:s(()=>[d(" 批量操作 ("+r(J.value.length)+") ",1)]),_:1},8,["disabled"])]),_:1})])])]),default:s(()=>[y.value?ca((n(),p("div",Al,[l(Nt,{data:Me.value,style:{width:"100%"},onSelectionChange:It,"empty-text":Me.value.length===0?"暂无监控数据":"",size:"default","cell-style":{padding:"6px 6px"},"header-cell-style":{padding:"8px 6px",background:"#fafafa"}},{default:s(()=>[l(U,{type:"selection",width:"50"}),l(U,{label:"视频ID",width:"140"},{default:s(({row:a})=>{var g,D,H,ce,Je,je;return[o("div",Pl,[(g=a.monitorVideo)!=null&&g.awemeId||(D=a.monitorVideo)!=null&&D.id||a.awemeId?(n(),V(Be,{key:0,href:`https://www.douyin.com/video/${((H=a.monitorVideo)==null?void 0:H.awemeId)||((ce=a.monitorVideo)==null?void 0:ce.id)||a.awemeId}`,target:"_blank",type:"primary",class:"video-id-link"},{default:s(()=>{var Ke,Qe;return[d(r(((Ke=a.monitorVideo)==null?void 0:Ke.awemeId)||((Qe=a.monitorVideo)==null?void 0:Qe.id)||a.awemeId||"N/A"),1)]}),_:2},1032,["href"])):(n(),p("span",Ul,r(((Je=a.monitorVideo)==null?void 0:Je.awemeId)||((je=a.monitorVideo)==null?void 0:je.id)||a.awemeId||"N/A"),1))]),S("",!0)]}),_:1}),l(U,{label:"视频描述",width:"200"},{default:s(({row:a})=>[o("div",Fl,[ze(a)?(n(),V(ae,{key:0,content:ze(a),placement:"top","show-after":500},{default:s(()=>[o("span",ql,r(ze(a)),1)]),_:2},1032,["content"])):(n(),p("span",Ol,"无描述"))])]),_:1}),l(U,{label:"播主名称",width:"115"},{default:s(({row:a})=>{var g;return[o("div",Ll,[l(Be,{type:"primary",class:"author-nickname",onClick:va(D=>Dt(a),["stop"])},{default:s(()=>{var D,H;return[d(r(((D=a.authorInfo)==null?void 0:D.nickname)||((H=a.videoInfo)==null?void 0:H.authorId)||"N/A"),1)]}),_:2},1032,["onClick"]),(g=a.authorInfo)!=null&&g.followerCount?(n(),V(A,{key:0,size:"small",type:"info",class:"author-followers-tag"},{default:s(()=>[d(" 粉丝 "+r(dt(a.authorInfo.followerCount)),1)]),_:2},1024)):S("",!0)])]}),_:1}),l(U,{label:"话题标签",width:"200"},{default:s(({row:a})=>[ge(a).length>0?(n(),p("div",Bl,[(n(!0),p(Q,null,ie(ge(a).slice(0,5),g=>(n(),V(A,{key:g,size:"small",type:"info",class:"hashtag-tag"},{default:s(()=>[d(r(g),1)]),_:2},1024))),128)),ge(a).length>5?(n(),V(ae,{key:0,content:ge(a).slice(5).join("、"),placement:"top"},{default:s(()=>[l(A,{size:"small",type:"info",class:"hashtag-more"},{default:s(()=>[d(" +"+r(ge(a).length-5),1)]),_:2},1024)]),_:2},1032,["content"])):S("",!0)])):(n(),p("span",Yl,"无话题标签"))]),_:1}),l(U,{label:"搜索标签",width:"120"},{default:s(({row:a})=>[me(a).length>0?(n(),p("div",Hl,[(n(!0),p(Q,null,ie(me(a).slice(0,3),g=>(n(),V(A,{key:g,size:"small",type:"success",class:"search-tag",onClick:D=>ot(g)},{default:s(()=>[d(r(g),1)]),_:2},1032,["onClick"]))),128)),me(a).length>3?(n(),V(ae,{key:0,content:me(a).slice(3).join("、"),placement:"top"},{default:s(()=>[l(A,{size:"small",type:"success",class:"search-tag-more"},{default:s(()=>[d(" +"+r(me(a).length-3),1)]),_:2},1024)]),_:2},1032,["content"])):S("",!0)])):(n(),p("span",Rl,"无搜索标签"))]),_:1}),l(U,{label:"搜索类型",width:"100"},{default:s(({row:a})=>[fe(a).length>0?(n(),p("div",Gl,[(n(!0),p(Q,null,ie(fe(a).slice(0,3),g=>(n(),V(A,{key:g,size:"small",type:"warning",class:"search-channel",onClick:D=>nt(g)},{default:s(()=>[d(r(g),1)]),_:2},1032,["onClick"]))),128)),fe(a).length>3?(n(),V(ae,{key:0,content:fe(a).slice(3).join("、"),placement:"top"},{default:s(()=>[l(A,{size:"small",type:"warning",class:"search-channel-more"},{default:s(()=>[d(" +"+r(fe(a).length-3),1)]),_:2},1024)]),_:2},1032,["content"])):S("",!0)])):(n(),p("span",Jl,"无搜索类型"))]),_:1}),l(U,{label:"最新数据",width:"130"},{default:s(({row:a})=>[a.latestStats?(n(),p("div",jl,[o("div",Kl,[e[52]||(e[52]=o("div",{class:"heart-icon"},[o("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor"},[o("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])],-1)),o("span",null,r(Pe(a.latestStats.diggCount||0)),1)]),o("div",Ql,[l(i,{size:"14"},{default:s(()=>[l(h(pa))]),_:1}),o("span",null,r(Pe(a.latestStats.commentCount||0)),1)])])):(n(),p("span",Wl,"暂无数据"))]),_:1}),l(U,{label:"发布时间",width:"150",align:"center"},{default:s(({row:a})=>{var g;return[o("div",Xl,r(ut((g=a.monitorVideo)==null?void 0:g.videoPublishTime)),1)]}),_:1}),l(U,{label:"创建时间",width:"150",align:"center"},{default:s(({row:a})=>{var g;return[o("div",Zl,r(rt((g=a.monitorVideo)==null?void 0:g.createTime)),1)]}),_:1}),l(U,{label:"状态",width:"100",align:"center"},{default:s(({row:a})=>{var g;return[l(A,{type:ct((g=a.monitorVideo)==null?void 0:g.status),size:"small",class:"status-tag"},{default:s(()=>{var D;return[d(r(vt((D=a.monitorVideo)==null?void 0:D.status)),1)]}),_:2},1032,["type"])]}),_:1}),l(U,{label:"操作",width:"160",fixed:"right"},{default:s(({row:a})=>{var g;return[o("div",es,[l(ae,{content:"查看统计",placement:"top"},{default:s(()=>[l(x,{type:"primary",size:"small",icon:h(ma),onClick:D=>{var H;return wt((H=a.monitorVideo)==null?void 0:H.awemeId)},link:""},null,8,["icon","onClick"])]),_:2},1024),l(ae,{content:((g=a.monitorVideo)==null?void 0:g.status)===1?"停用监控":"启用监控",placement:"top"},{default:s(()=>{var D,H;return[l(x,{type:((D=a.monitorVideo)==null?void 0:D.status)===1?"warning":"success",size:"small",icon:((H=a.monitorVideo)==null?void 0:H.status)===1?h(fa):h(ga),onClick:ce=>xt(a),link:""},{default:s(()=>{var ce;return[d(r(((ce=a.monitorVideo)==null?void 0:ce.status)===1?"停用":"启用"),1)]}),_:2},1032,["type","icon","onClick"])]}),_:2},1032,["content"]),l(ae,{content:"删除监控",placement:"top"},{default:s(()=>[l(x,{type:"danger",size:"small",icon:h(_a),onClick:D=>St(a),link:""},null,8,["icon","onClick"])]),_:2},1024)])]}),_:1})]),_:1},8,["data","empty-text"]),De.value>0?(n(),p("div",ts,[l(zt,{"current-page":T.value,"onUpdate:currentPage":e[16]||(e[16]=a=>T.value=a),"page-size":oe.value,"onUpdate:pageSize":e[17]||(e[17]=a=>oe.value=a),"page-sizes":[10,20,50,100],total:De.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:et,onCurrentChange:tt,class:"pagination"},null,8,["current-page","page-size","total"])])):S("",!0)])),[[qt,q.value]]):(n(),p("div",zl,[l($t,{description:"请先选择要查看监控的音乐","image-size":120},{default:s(()=>[l(x,{type:"primary",onClick:e[15]||(e[15]=a=>h(P).push("/music"))},{default:s(()=>e[51]||(e[51]=[d(" 选择音乐 ",-1)])),_:1,__:[51]})]),_:1})]))]),_:1})])]),l(be,{modelValue:re.value,"onUpdate:modelValue":e[22]||(e[22]=a=>re.value=a),title:"添加监控视频",width:"600px"},{footer:s(()=>[l(x,{onClick:e[20]||(e[20]=a=>re.value=!1)},{default:s(()=>e[62]||(e[62]=[d("取消",-1)])),_:1,__:[62]}),l(x,{type:"primary",onClick:e[21]||(e[21]=a=>ne.value==="single"?pt():_t()),loading:ne.value==="single"?Te.value:$e.value,disabled:ne.value==="batch"&&!I.value.file},{default:s(()=>[d(r(ne.value==="single"?"添加监控":"开始导入"),1)]),_:1},8,["loading","disabled"])]),default:s(()=>[l(Pt,{modelValue:ne.value,"onUpdate:modelValue":e[18]||(e[18]=a=>ne.value=a),style:{"margin-bottom":"20px"},onChange:Ue},{default:s(()=>[l(Ye,{label:"single"},{default:s(()=>e[53]||(e[53]=[d("单个添加",-1)])),_:1,__:[53]}),l(Ye,{label:"batch"},{default:s(()=>e[54]||(e[54]=[d("批量导入",-1)])),_:1,__:[54]})]),_:1},8,["modelValue"]),l(Re,{model:I.value,"label-width":"100px"},{default:s(()=>[ne.value==="single"?(n(),V(he,{key:0,label:"视频链接"},{default:s(()=>[l(Ie,{modelValue:I.value.videoUrl,"onUpdate:modelValue":e[19]||(e[19]=a=>I.value.videoUrl=a),placeholder:"请输入抖音视频链接或ID"},null,8,["modelValue"])]),_:1})):(n(),p(Q,{key:1},[l(He,{title:"批量导入说明",type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},{default:s(()=>[o("div",as,[e[56]||(e[56]=o("p",null,[o("strong",null,"Excel文件格式要求：")],-1)),e[57]||(e[57]=o("ul",{style:{margin:"8px 0","padding-left":"20px"}},[o("li",null,"支持 .xlsx、.xls 和 .csv 格式"),o("li",null,"第一行为标题行（监控视频地址），会被跳过"),o("li",null,"从第二行开始，第一列为视频链接")],-1)),o("p",ls,[l(x,{type:"primary",size:"small",onClick:mt,icon:h(ha)},{default:s(()=>e[55]||(e[55]=[d(" 下载Excel模板 ",-1)])),_:1,__:[55]},8,["icon"])])])]),_:1}),l(he,{label:"Excel文件",required:""},{default:s(()=>[l(Ut,{ref_key:"uploadRef",ref:_e,"auto-upload":!1,"show-file-list":!0,limit:1,accept:".xlsx,.xls,.csv","on-change":ft,"on-remove":gt},{tip:s(()=>e[59]||(e[59]=[o("div",{class:"el-upload__tip",style:{color:"#909399","font-size":"12px","margin-top":"5px"}}," 支持 .xlsx/.xls/.csv 文件，且不超过 10MB ",-1)])),default:s(()=>[l(x,{icon:h(ya)},{default:s(()=>e[58]||(e[58]=[d("选择Excel文件",-1)])),_:1,__:[58]},8,["icon"])]),_:1},512)]),_:1})],64)),y.value&&b.value?(n(),V(he,{key:2,label:"音乐信息"},{default:s(()=>[o("div",ss,[o("div",os,r(b.value.title)+" - "+r(b.value.author),1),b.value.album?(n(),p("div",ns,"专辑："+r(b.value.album),1)):S("",!0),b.value.tagList&&h(Ee)(b.value.tagList).length?(n(),p("div",is,[e[60]||(e[60]=d(" 标签： ",-1)),(n(!0),p(Q,null,ie(h(Ee)(b.value.tagList),a=>(n(),V(A,{key:a,size:"small",class:"music-tag"},{default:s(()=>[d(r(a),1)]),_:2},1024))),128))])):S("",!0)])]),_:1})):(n(),V(he,{key:3,label:"音乐信息"},{default:s(()=>[o("div",rs,[l(He,{title:"请先选择音乐",type:"warning",closable:!1,"show-icon":""},{default:s(()=>e[61]||(e[61]=[o("p",null,"添加监控视频前，请先在音乐管理页面选择要监控的音乐",-1)])),_:1})])]),_:1}))]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(be,{modelValue:ue.value,"onUpdate:modelValue":e[26]||(e[26]=a=>ue.value=a),title:"批量操作",width:"400px"},{footer:s(()=>[l(x,{onClick:e[23]||(e[23]=a=>ue.value=!1)},{default:s(()=>e[63]||(e[63]=[d("取消",-1)])),_:1,__:[63]}),l(x,{type:"success",onClick:e[24]||(e[24]=a=>qe(1))},{default:s(()=>e[64]||(e[64]=[d(" 批量启用 ",-1)])),_:1,__:[64]}),l(x,{type:"warning",onClick:e[25]||(e[25]=a=>qe(0))},{default:s(()=>e[65]||(e[65]=[d(" 批量停用 ",-1)])),_:1,__:[65]}),l(x,{type:"danger",onClick:bt},{default:s(()=>e[66]||(e[66]=[d(" 批量删除 ",-1)])),_:1,__:[66]})]),default:s(()=>[o("p",null,"已选择 "+r(J.value.length)+" 个监控项",1)]),_:1},8,["modelValue"]),l(be,{modelValue:ke.value,"onUpdate:modelValue":e[27]||(e[27]=a=>ke.value=a),title:"导入进度",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1,onClose:Fe},{footer:s(()=>[l(x,{onClick:Fe,disabled:w.value.status==="PROCESSING"},{default:s(()=>[d(r(w.value.status==="PROCESSING"?"处理中...":"关闭"),1)]),_:1},8,["disabled"])]),default:s(()=>[o("div",us,[o("div",ds,[o("p",null,[e[67]||(e[67]=o("strong",null,"文件名：",-1)),d(r(w.value.fileName),1)]),o("p",null,[e[68]||(e[68]=o("strong",null,"任务ID：",-1)),d(r(w.value.id),1)]),o("p",null,[e[69]||(e[69]=o("strong",null,"状态：",-1)),l(A,{type:kt(w.value.status),size:"small"},{default:s(()=>[d(r(Ct(w.value.status)),1)]),_:1},8,["type"])])]),o("div",cs,[l(Ft,{percentage:w.value.progress,status:w.value.status==="COMPLETED"?"success":w.value.status==="FAILED"?"exception":null},null,8,["percentage","status"]),w.value.totalCount>0?(n(),p("div",vs,[o("div",ps,[o("span",null,"总计："+r(w.value.totalCount),1),o("span",null,"已处理："+r(w.value.processedCount),1)]),o("div",ms,[o("span",fs,"成功："+r(w.value.successCount),1),o("span",gs,"跳过："+r(w.value.skipCount),1),o("span",_s,"失败："+r(w.value.errorCount),1)])])):S("",!0)]),w.value.status==="PROCESSING"?(n(),p("div",hs,[l(i,{class:"rotating"},{default:s(()=>[l(h(Ca))]),_:1}),e[70]||(e[70]=o("span",null,"正在处理中，请稍候...",-1))])):S("",!0),w.value.status==="COMPLETED"?(n(),p("div",ys,[l(i,{style:{color:"#67c23a"}},{default:s(()=>[l(h(Ze))]),_:1}),e[71]||(e[71]=o("span",null,"导入完成！",-1))])):S("",!0),w.value.status==="FAILED"?(n(),p("div",Cs,[l(i,{style:{color:"#f56c6c"}},{default:s(()=>[l(h(ka))]),_:1}),e[72]||(e[72]=o("span",null,"导入失败，请重试",-1))])):S("",!0)])]),_:1},8,["modelValue"]),l(be,{modelValue:ve.value,"onUpdate:modelValue":e[30]||(e[30]=a=>ve.value=a),title:"更新邮箱",width:"420px"},{footer:s(()=>[l(x,{onClick:e[29]||(e[29]=a=>ve.value=!1)},{default:s(()=>e[73]||(e[73]=[d("取消",-1)])),_:1,__:[73]}),l(x,{type:"primary",loading:Ne.value,onClick:Tt},{default:s(()=>e[74]||(e[74]=[d("确定",-1)])),_:1,__:[74]},8,["loading"])]),default:s(()=>[l(Re,{model:pe.value,"label-width":"80px"},{default:s(()=>[l(he,{label:"邮箱"},{default:s(()=>[l(Ie,{modelValue:pe.value.email,"onUpdate:modelValue":e[28]||(e[28]=a=>pe.value.email=a),placeholder:"请输入新的邮箱地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ns=Ot(ks,[["__scopeId","data-v-a98f28e2"]]);export{Ns as default};
