import{_ as es}from"./_plugin-vue_export-helper-d6af9df2.js";/* empty css                  *//* empty css                       *//* empty css                     */import{p as st}from"./tagUtils-de5cbb20.js";import{u as ts,i as ls,a as ss,b as as,c as os,d as ns,e as is}from"./install-c708aa89.js";import{H as rs,v as Jt}from"./index.esm.min-7eb9cc43.js";import{m as Kt}from"./music-6a137b53.js";/* empty css                */import{n as j,p as us,u as ds,a as cs,r as f,q as ms,s as vs,o as i,c as d,d as s,e as a,w as o,t as u,v as _,h as m,F as R,x as de,y as C,z as P,A as w,g as Qt,B as v,C as De,D as ps,G as fs,H as gs,I as _s,k as ys,J as hs,K as ks,i as Cs,L as ws,M as bs,N as Ss,O as Vs,P as Ts,Q as Wt,R as Xt,S as Zt,T as xs,U as Is,V as gt,W as Ds,X as at,Y as _t,f as As,Z as el,_ as Es,$ as Ms,a0 as $s,a1 as tl,a2 as ll,a3 as Us,a4 as zs,a5 as sl,a6 as Ns,a7 as ot,a8 as Ps,a9 as Fs,aa as Ls,ab as Hs,ac as qs,ad as Os,ae as Ys,af as Bs,ag as js,ah as Rs,ai as Gs,aj as Js,ak as Ks,al as Qs,am as Ws,j as Xs,an as Zs,ao as ea,l as ta,ap as la,aq as sa,ar as aa,as as oa,at as na}from"./index-a6d8c1ed.js";import{a as ia}from"./author-af7b27c9.js";const G={getMonitorList(b={}){return j({url:"/monitor/list",method:"get",params:b,paramsSerializer:{serialize:h=>{const J=new URLSearchParams;return Object.keys(h).forEach(O=>{const U=h[O];Array.isArray(U)?J.append(O,JSON.stringify(U)):U!=null&&J.append(O,U)}),J.toString()}}})},addMonitor(b){return j({url:"/monitor/add",method:"post",data:b})},updateStatus(b,h){return j({url:`/monitor/status/${b}`,method:"put",data:h})},deleteMonitor(b){return j({url:`/monitor/${b}`,method:"delete"})},uploadExcel(b){return j({url:"/monitor/upload/excel",method:"post",data:b,headers:{"Content-Type":"multipart/form-data"}})},uploadExcelAsync(b){return j({url:"/monitor/upload/excel/async",method:"post",data:b,headers:{"Content-Type":"multipart/form-data"}})},getTaskProgress(b){return j({url:`/import-task/${b}/progress`,method:"get"})},getTaskDetails(b){return j({url:`/import-task/${b}`,method:"get"})},getUserTasks(b=10){return j({url:`/import-task/list?limit=${b}`,method:"get"})},getMonitorStatistics(b){return j({url:"/monitor/statistics",method:"get",params:b,paramsSerializer:{serialize:h=>{const J=new URLSearchParams;return Object.keys(h).forEach(O=>{const U=h[O];Array.isArray(U)?J.append(O,JSON.stringify(U)):U!=null&&J.append(O,U)}),J.toString()}}})},getMonitorTags(b){return j({url:"/monitor/tags",method:"get",params:{musicId:b}})},getMonitorChannels(b){return j({url:"/monitor/channels",method:"get",params:{musicId:b}})},updateCustomSelection(b){return j({url:"/monitor/custom-selection",method:"put",data:b})},getVideoInvestments(b){return j({url:`/investment/video/${b}`,method:"get"})}};const ra={class:"monitor-layout"},ua={class:"header"},da={class:"header-right"},ca={class:"user-info"},ma={class:"username"},va={class:"main-container"},pa={class:"sidebar"},fa={class:"content"},ga={class:"page-header"},_a={key:0,class:"page-title-section"},ya={class:"page-title"},ha={class:"music-meta"},ka={class:"page-meta"},Ca={key:0},wa={key:0,class:"stats-row"},ba={class:"stat-icon"},Sa={class:"stat-info"},Va={class:"stat-value"},Ta={class:"stat-icon"},xa={class:"stat-info"},Ia={class:"stat-value"},Da={class:"stat-icon"},Aa={class:"stat-info"},Ea={class:"stat-value"},Ma={class:"stat-icon"},$a={class:"stat-info"},Ua={class:"stat-value"},za={class:"stat-icon"},Na={class:"stat-info"},Pa={class:"stat-value"},Fa={key:1,class:"section-divider"},La={key:2,class:"toolbar"},Ha={class:"toolbar-left"},qa={class:"toolbar-right"},Oa={key:0,class:"hotspot-search-controls"},Ya={class:"time-range-controls"},Ba={key:1,class:"normal-search-controls"},ja={key:3,class:"tag-filter-section"},Ra={class:"tag-filter-row"},Ga={class:"tag-filter-content"},Ja={key:0,class:"filter-group"},Ka={class:"tag-count"},Qa={key:1,class:"filter-group"},Wa={class:"tag-count"},Xa={class:"card-header"},Za={class:"header-actions"},eo={key:0,class:"no-music-selected"},to={key:1},lo={class:"video-id"},so={key:0,class:"hotspot-video-container"},ao={key:1,class:"video-id-text hotspot-video-id"},oo={key:1,class:"custom-video-container"},no={key:1,class:"video-id-text custom-video-id"},io={key:1,class:"video-id-text"};const ro={class:"video-desc"},uo={class:"desc-text"},co={key:1,class:"na-text"},mo={class:"author-name"},vo={key:0,class:"hashtag-list"},po={key:1,class:"na-text"},fo={class:"latest-alert-time"},go={key:0,class:"alert-time"},_o={key:1,class:"na-text"},yo={class:"video-remark"},ho={class:"remark-text"},ko={key:1,class:"na-text"},Co={class:"total-investment"},wo={key:0,class:"investment-amount"},bo={key:1,class:"na-text"},So={key:0,class:"search-tag-list"},Vo={key:1,class:"na-text"},To={key:0,class:"search-channel-list"},xo={key:1,class:"na-text"},Io={key:0,class:"stats-preview"},Do={class:"stats-item"},Ao={class:"stats-item"},Eo={key:1,class:"na-text"},Mo={class:"publish-time"},$o={class:"create-time"},Uo={class:"table-actions"},zo={key:0,class:"pagination-container"},No={style:{"line-height":"1.6"}},Po={style:{margin:"8px 0"}},Fo={class:"music-info-display"},Lo={class:"music-title"},Ho={key:0,class:"music-album"},qo={key:1,class:"music-tags"},Oo={class:"music-info-display"},Yo={class:"task-progress-container"},Bo={class:"task-info"},jo={class:"progress-section"},Ro={key:0,class:"progress-stats"},Go={class:"task-stats-row"},Jo={class:"task-stats-row"},Ko={style:{color:"#67c23a"}},Qo={style:{color:"#909399"}},Wo={style:{color:"#f56c6c"}},Xo={key:0,class:"processing-tip"},Zo={key:1,class:"completed-message"},en={key:2,class:"failed-message"},tn={class:"stats-dialog-content"},ln={class:"stats-header"},sn={class:"video-info"},an={class:"video-id-value"},on={class:"time-range-selector"},nn={class:"stats-content"},rn={key:0,class:"stats-grid"},un={class:"stat-info"},dn={class:"stat-value"},cn={key:0,class:"stat-trend"},mn={class:"stat-icon"},vn={class:"stat-info"},pn={class:"stat-value"},fn={key:0,class:"stat-trend"},gn={class:"stat-icon"},_n={class:"stat-info"},yn={class:"stat-value"},hn={key:0,class:"stat-trend"},kn={class:"stat-icon"},Cn={class:"stat-info"},wn={class:"stat-value"},bn={key:0,class:"stat-trend"},Sn={class:"card-header"},Vn={class:"chart-legend"},Tn={class:"chart-container"},xn={key:1,class:"empty-chart"},In={key:0,class:"author-info-dialog"},Dn={class:"custom-selection-content"},An={key:0,class:"video-info-section"},En={class:"video-title"},Mn={class:"description-section"},$n={class:"investment-section"},Un={key:0,class:"loading-tip"},zn={key:0},Nn={class:"investment-row"},Pn={class:"action-buttons"},Fn={key:1,class:"no-investment-records"},Ln={__name:"Monitor",setup(b){ts([ls,ss,as,os,ns,is]);const h=us(),J=ds(),O=cs(),U=f(!1),nt=f(!1),it=f([]),ce=f(""),Z=f([]),V=f(null),$=f(null),K=f([]),me=f([]),Q=f([]),ve=f([]),ke=f("diggCount"),Ce=f("desc"),H=f(!1),pe=f(""),fe=f(""),z=f(1),Ae=f(10),rt=f(0),le=f({totalCount:0,manualCount:0,autoCount:0,abnormalCount:0,hotspotAlertCount:0}),we=f(!1),be=f(!1),Ye=f(!1),ut=f(!1),ge=f("single"),M=f({videoUrl:"",file:null}),I=f({id:null,fileName:"",status:"PENDING",progress:0,totalCount:0,processedCount:0,successCount:0,skipCount:0,errorCount:0}),W=f(null),Ee=f(!1),dt=f(!1),Me=f({email:""}),Be=f(!1),je=f(!1),$e=f(null),_e=f(null),Re=f("7"),Ue=f(null),Ge=f(null),A=f({digg:0,comment:0,collect:0,share:0}),N=f({likes:!0,comments:!0,collects:!0,shares:!0}),Je=f(!1),Ke=f(!1),Y=f(null),Qe=f(!1),Se=f(!1),We=f(!1),F=f(null),L=f({description:"",amounts:[{id:null,amount:null,investmentTime:""}]}),al=t=>{Ae.value=t,z.value=1,E(1)},ol=t=>{z.value=t,E(t)},Ve=()=>{z.value=1,E(1)},nl=()=>{if(H.value=!H.value,!H.value)pe.value="",fe.value="";else{const t=new Date;t.setTime(t.getTime()-72*60*60*1e3),pe.value=xe(t);const e=new Date;fe.value=xe(e)}z.value=1,E(1),v.success(H.value?"已开启72H热度异动筛选":"已关闭72H热度异动筛选")},yt=()=>{H.value&&pe.value&&fe.value&&(z.value=1,E(1))},se=async()=>{if(V.value)try{const t={musicId:V.value},e=new Date;e.setTime(e.getTime()-72*60*60*1e3),t.startTime=xe(e);const r=new Date;t.endTime=xe(r);const n=await G.getMonitorStatistics(t);console.log("Monitor页面: 统计数据API响应:",n),console.log("Monitor页面: 统计数据请求参数:",t),n.code===200?(le.value=n.data,console.log("Monitor页面: 统计数据:",le.value)):(console.warn("获取统计数据失败:",n.message),le.value={totalCount:0,manualCount:0,autoCount:0,abnormalCount:0,hotspotAlertCount:0})}catch(t){console.error("Monitor页面: 加载统计数据失败:",t),le.value={totalCount:0,manualCount:0,autoCount:0,abnormalCount:0,hotspotAlertCount:0}}},ae=async()=>{if(V.value)try{const[t,e]=await Promise.all([G.getMonitorTags(V.value),G.getMonitorChannels(V.value)]);console.log("Monitor页面: 标签统计API响应:",t),console.log("Monitor页面: 频道统计API响应:",e),t.code===200?me.value=t.data||[]:(console.warn("获取标签数据失败:",t.message),me.value=[]),e.code===200?ve.value=e.data||[]:(console.warn("获取频道数据失败:",e.message),ve.value=[]),console.log("Monitor页面: 标签数据:",me.value),console.log("Monitor页面: 频道数据:",ve.value)}catch(t){console.error("Monitor页面: 加载标签和频道数据失败:",t),me.value=[],ve.value=[]}},X=f("all"),Xe=()=>{z.value=1,E(1)},ze=t=>{var r;const e=(r=t.monitorVideo)==null?void 0:r.tag;if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string")try{const n=JSON.parse(e);if(Array.isArray(n))return n}catch{return e.split(",").map(c=>c.trim()).filter(c=>c)}return[]},Ne=t=>{var r;const e=(r=t.monitorVideo)==null?void 0:r.channel;if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string")try{const n=JSON.parse(e);if(Array.isArray(n))return n}catch{return e.split(",").map(c=>c.trim()).filter(c=>c)}return[]},il=t=>{const e=K.value.indexOf(t);e>-1?K.value.splice(e,1):K.value.push(t),z.value=1,E(1);const r=K.value.length+Q.value.length;r>0?v.success(`已选择 ${r} 个筛选条件`):v.success("已清除所有筛选条件")},rl=t=>{const e=Q.value.indexOf(t);e>-1?Q.value.splice(e,1):Q.value.push(t),z.value=1,E(1);const r=K.value.length+Q.value.length;r>0?v.success(`已选择 ${r} 个筛选条件`):v.success("已清除所有筛选条件")},ul=t=>{},dl=t=>{},cl=()=>{K.value=[],Q.value=[],z.value=1,E(1),v.success("已清除所有筛选条件")},Ze=t=>{X.value=t,H.value=!1,pe.value="",fe.value="",z.value=1,E(1);const e={all:"已显示当前监控视频",manual:"已过滤显示手动添加的视频",error:"已过滤显示异常监控的视频",auto:"已过滤显示自选视频"};v.success(e[t]||"过滤完成")},Pe=t=>{var r;let e=null;if((r=t.videoInfo)!=null&&r.topics?e=t.videoInfo.topics:t.topics&&(e=t.topics),Array.isArray(e))return e;if(typeof e=="string")try{const n=JSON.parse(e);if(Array.isArray(n))return n}catch{}return[]},et=t=>{var n;let e=null;return(n=t.videoInfo)!=null&&n.desc?e=t.videoInfo.desc:t.desc&&(e=t.desc),e?e.replace(/#[^\s#]*/g,"").trim()||e:""},ht=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",ct=t=>{if(!t)return"N/A";const e=t.toString().length===10;return new Date(e?t*1e3:t).toLocaleString("zh-CN")},ml=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",vl=t=>!t||t<=0?"0.00":parseFloat(t).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}),Te=t=>!t||t==="N/A"?"N/A":t.toString().length>10?t.toString().substring(0,10):t.toString(),pl=t=>{var r;const e=(r=t.monitorVideo)==null?void 0:r.latestHotspotAlertTime;if(!e)return!1;try{const n=new Date;return n.setTime(n.getTime()-72*60*60*1e3),new Date(e)>n}catch(n){return console.warn("解析热度异动时间失败:",n),!1}},xe=(t=new Date)=>{const e=new Date(t.getTime()+288e5),r=e.getUTCFullYear(),n=String(e.getUTCMonth()+1).padStart(2,"0"),c=String(e.getUTCDate()).padStart(2,"0"),y=String(e.getUTCHours()).padStart(2,"0"),S=String(e.getUTCMinutes()).padStart(2,"0"),g=String(e.getUTCSeconds()).padStart(2,"0");return`${r}-${n}-${c} ${y}:${S}:${g}`},ye=()=>{const t=new Date,e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),c=String(t.getHours()).padStart(2,"0"),y=String(t.getMinutes()).padStart(2,"0");return`${e}-${r}-${n}T${c}:${y}`},fl=t=>{if(!t)return ye();try{const e=new Date(t);if(isNaN(e.getTime()))return console.warn("无效的时间格式:",t),ye();const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0"),y=String(e.getHours()).padStart(2,"0"),S=String(e.getMinutes()).padStart(2,"0");return`${r}-${n}-${c}T${y}:${S}`}catch(e){return console.warn("时间转换失败:",e),ye()}},gl=t=>{switch(t){case 1:return"success";case 0:return"info";case 2:return"warning";case 3:return"danger";default:return"info"}},_l=t=>{switch(t){case 1:return"启用";case 0:return"停用";case 2:return"无权限";case 3:return"失败";default:return"未知"}},E=async(t=1)=>{if(U.value=!0,!V.value){v.warning("请先选择要查看的音乐监控"),U.value=!1,J.push("/music");return}try{const e={musicId:V.value,pageNum:t,pageSize:Ae.value};if(ce.value){const c=ce.value.trim();/^\d+$/.test(c)?e.videoId=c:c.includes("douyin.com")||c.includes("iesdouyin.com")?e.videoUrl=c:e.authorName=c}K.value.length>0&&(e.tag=K.value),Q.value.length>0&&(e.channel=Q.value),X.value==="manual"?e.type=1:X.value==="auto"&&(e.joinCustomType=1),X.value==="error"?e.status=0:X.value==="all"&&(e.status=1);const r={diggCount:"digg_count",publishTime:"video_publish_time",createTime:"create_time"};if(e.sortBy=r[ke.value]||"create_time",e.sortOrder=Ce.value.toUpperCase(),H.value){const c=new Date;c.setTime(c.getTime()-72*60*60*1e3),e.startTime=xe(c);const y=new Date;e.endTime=xe(y)}console.log("Monitor页面: 查询参数:",e);const n=await G.getMonitorList(e);if(console.log("Monitor页面: 监控列表API响应:",n),n.code===200){const c=n.data||{},y=c.list||[];console.log("Monitor页面: 新接口响应数据:",c),console.log("Monitor页面: 监控列表数据:",y),z.value=c.pageNum||1,rt.value=c.total||0;const S=y.map(g=>({monitorVideo:{id:g.monitorVideoId,awemeId:g.videoId,videoUrl:g.videoUrl,musicId:g.musicId,status:g.status,type:g.type,createTime:g.createTime,videoPublishTime:g.videoPublishTime,tag:g.searchTags,channel:g.searchChannel,remark:g.remark,totalInvestmentAmount:g.totalInvestmentAmount,joinCustomType:g.joinCustomType,latestHotspotAlertTime:g.latestHotspotAlertTime},videoInfo:{desc:g.videoDescription,authorId:g.authorId,topics:g.topicTags?JSON.parse(g.topicTags):[]},authorInfo:{nickname:g.authorName,followerCount:g.followerCount,authorId:g.authorId},latestStats:{diggCount:g.latestDiggCount,commentCount:g.latestCommentCount},userMonitor:{musicId:g.musicId}}));if(console.log("Monitor页面: 转换后的数据:",S),V.value&&!$.value)try{const g=await Kt.getMusicById(V.value);g.code===200&&($.value=g.data)}catch(g){console.warn("获取音乐信息失败:",g)}it.value=S,t===1&&(await se(),await ae())}else v.error(n.message||"加载监控列表失败")}catch(e){console.error("Monitor页面: 加载监控列表失败:",e),v.error("加载监控列表失败")}finally{U.value=!1}},yl=async()=>{var t,e,r,n;if(!M.value.videoUrl.trim()){v.warning("请输入视频链接或ID");return}if(!V.value){v.warning("请先选择要监控的音乐");return}nt.value=!0;try{const c=await G.addMonitor({videoUrl:M.value.videoUrl.trim(),musicId:V.value});c.code===200?(v.success("添加监控成功"),we.value=!1,M.value={videoUrl:"",file:null},await E(),await se(),await ae()):(t=c.message)!=null&&t.includes("音乐ID不能为空，音乐为必选项")?v.error("音乐为必选项，请先选择音乐"):(e=c.message)!=null&&e.includes("指定的音乐不存在，请选择有效的音乐")?v.error("所选音乐不存在，请重新选择"):(r=c.message)!=null&&r.includes("视频链接不能为空")?v.error("请输入视频链接"):(n=c.message)!=null&&n.includes("添加失败，可能是链接格式错误或已存在")?v.error("视频链接格式错误或该视频已在监控中"):v.error(c.message||"添加监控失败")}catch{v.error("添加监控失败")}finally{nt.value=!1}},kt=()=>{if(M.value={videoUrl:"",file:null},Fe.value)try{Fe.value.clearFiles()}catch(t){console.warn("清理上传组件失败:",t)}},hl=()=>{const t=document.createElement("a");t.href="/监控视频模板.xlsx",t.download="监控视频模板.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t)},Fe=f(),kl=t=>{var n,c;if(console.log("文件选择:",t),!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv","application/csv"].includes(t.raw.type)&&!t.name.endsWith(".csv")){v.error("请选择 .xlsx、.xls 或 .csv 格式的文件");try{(n=Fe.value)==null||n.clearFiles()}catch(y){console.warn("清理上传文件失败:",y)}M.value.file=null;return}const r=10*1024*1024;if(t.raw.size>r){v.error("文件大小不能超过 10MB");try{(c=Fe.value)==null||c.clearFiles()}catch(y){console.warn("清理上传文件失败:",y)}M.value.file=null;return}M.value.file=t.raw},Cl=()=>{console.log("文件移除"),M.value.file=null},wl=async()=>{var t,e,r,n,c;if(!V.value){v.warning("请先选择要监控的音乐");return}if(!M.value.file){v.warning("请选择要上传的Excel文件");return}if(!M.value.file.name){v.error("文件信息不完整，请重新选择文件"),M.value.file=null;return}ut.value=!0;try{const y=new FormData;y.append("file",M.value.file),y.append("musicId",V.value.toString()),console.log("开始上传Excel文件:",{fileName:M.value.file.name,fileSize:M.value.file.size,musicId:V.value});const S=await G.uploadExcelAsync(y);if(S.code===200){const{taskId:g,message:Le}=S.data;v.success("文件上传成功，正在后台处理中...");const x=((t=M.value.file)==null?void 0:t.name)||"未知文件";we.value=!1,kt(),bl(g,x)}else{let g=S.message||"Excel上传失败";(e=S.message)!=null&&e.includes("请选择要上传的Excel文件")?g="请选择要上传的Excel文件":(r=S.message)!=null&&r.includes("文件格式不正确，请上传Excel文件(.xlsx或.xls)")?g="文件格式不正确，请上传Excel文件(.xlsx或.xls)":(n=S.message)!=null&&n.includes("音乐ID不能为空，音乐为必选项")?g="音乐为必选项，请先选择音乐":(c=S.message)!=null&&c.includes("指定的音乐不存在，请选择有效的音乐")&&(g="所选音乐不存在，请重新选择音乐"),v.error(g)}}catch(y){console.error("Excel上传失败:",y),v.error("Excel上传失败，请检查网络连接后重试")}finally{ut.value=!1}},bl=(t,e)=>{I.value={id:t,fileName:e,status:"PENDING",progress:0,totalCount:0,processedCount:0,successCount:0,skipCount:0,errorCount:0},Ye.value=!0,Sl()},Sl=()=>{W.value&&clearInterval(W.value),W.value=setInterval(async()=>{try{const t=await G.getTaskProgress(I.value.id);if(t.code===200){const e=t.data;I.value={...I.value,...e},(e.status==="COMPLETED"||e.status==="FAILED")&&(clearInterval(W.value),W.value=null,e.status==="COMPLETED"&&(await E(),await se(),await ae()))}}catch(t){console.error("查询任务进度失败:",t)}},2e3)},Ct=()=>{W.value&&(clearInterval(W.value),W.value=null),Ye.value=!1},Vl=t=>{switch(t){case"PENDING":return"等待处理";case"PROCESSING":return"处理中";case"COMPLETED":return"已完成";case"FAILED":return"处理失败";default:return"未知状态"}},Tl=t=>{switch(t){case"PENDING":return"info";case"PROCESSING":return"warning";case"COMPLETED":return"success";case"FAILED":return"danger";default:return"info"}},xl=t=>{t?($e.value=t,Be.value=!0,Nl()):v.warning("视频ID无效")},Il=async t=>{var c;const r=((c=t.monitorVideo)==null?void 0:c.status)===1?0:1,n=r===1?"启用":"停用";try{await De.confirm(`确认${n}该监控视频？`,"提示",{type:"warning"});const y=await G.updateStatus(t.monitorVideo.id,{status:r});y.code===200?(await E(),await se(),await ae(),v.success(`${n}成功`)):v.error(y.message||`${n}失败`)}catch(y){y!=="cancel"&&v.error(`${n}失败`)}},Dl=async t=>{try{await De.confirm("确认删除该监控视频？删除后无法恢复","警告",{type:"warning",confirmButtonText:"确认删除",cancelButtonText:"取消"});const e=await G.deleteMonitor(t.monitorVideo.id);e.code===200?(await E(),await se(),await ae(),v.success("删除成功")):v.error(e.message||"删除失败")}catch(e){e!=="cancel"&&v.error("删除失败")}},Al=t=>{Z.value=t},wt=async t=>{const e=t===1?"启用":"停用";try{await De.confirm(`确认批量${e}选中的 ${Z.value.length} 个监控项？`,"提示",{type:"warning"});const r=Z.value.map(n=>G.updateStatus(n.monitorVideo.id,{status:t}));await Promise.all(r),await E(),await se(),await ae(),be.value=!1,Z.value=[],v.success(`批量${e}成功`)}catch(r){r!=="cancel"&&v.error(`批量${e}失败`)}},El=async()=>{try{await De.confirm(`确认批量删除选中的 ${Z.value.length} 个监控项？删除后无法恢复`,"警告",{type:"warning",confirmButtonText:"确认删除",cancelButtonText:"取消"});const t=Z.value.map(e=>G.deleteMonitor(e.monitorVideo.id));await Promise.all(t),await E(),await se(),await ae(),be.value=!1,Z.value=[],v.success("批量删除成功")}catch(t){t!=="cancel"&&v.error("批量删除失败")}},Ml=async t=>{var e;if(t==="updateEmail"){Me.value.email=((e=O.user)==null?void 0:e.email)||"",Ee.value=!0;return}if(t==="logout")try{await De.confirm("确认退出登录？","提示",{type:"warning"}),await O.logout(),J.push("/login")}catch{}},$l=t=>/^[\w.!#$%&'*+/=?^`{|}~-]+@[\w-]+(\.[\w-]+)+$/.test(t),Ul=async()=>{const t=(Me.value.email||"").trim();if(!t){v.warning("请输入邮箱地址");return}if(!$l(t)){v.warning("邮箱格式不正确");return}dt.value=!0;try{const e=await Fs.updateEmail({email:t});e.code===200?(O.setUser({...O.user||{},email:t}),v.success("邮箱更新成功"),Ee.value=!1):v.error(e.message||"邮箱更新失败")}catch{v.error("邮箱更新失败，请稍后重试")}finally{dt.value=!1}},tt=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",lt=t=>{if(!t)return Date.now();try{const e=t.split(" ");if(e.length===3){const r=e[0],n=e[1]+" "+e[2],c=`${r}-${n}`;return new Date(c).getTime()}return new Date(t).getTime()}catch(e){return console.error("时间解析失败:",t,e),Date.now()}},oe=t=>{N.value[t]=!N.value[t],Object.values(N.value).every(r=>!r)&&(N.value[t]=!0),Ge.value&&St(Ge.value)},zl=async()=>{try{const t=await Jt.getLatestVideoStats($e.value);t.code===200&&(_e.value=t.data)}catch(t){console.error("加载最新统计失败:",t)}},bt=async()=>{try{const t=await Jt.getVideoStatsChart($e.value,Re.value);t.code===200&&(Ge.value=t.data,St(t.data))}catch{v.error("加载图表数据失败")}},St=t=>{if(!t||!t.timestamps){Ue.value=null;return}const e=[];N.value.likes&&e.push({name:"点赞数",type:"line",data:(t.diggCounts||[]).map((r,n)=>[lt(t.timestamps[n]),r]),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3,color:"#ff6b9d"},itemStyle:{color:"#ff6b9d"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(255, 107, 157, 0.3)"},{offset:1,color:"rgba(255, 107, 157, 0.05)"}]}}}),N.value.comments&&e.push({name:"评论数",type:"line",data:(t.commentCounts||[]).map((r,n)=>[lt(t.timestamps[n]),r]),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3,color:"#4ecdc4"},itemStyle:{color:"#4ecdc4"}}),N.value.collects&&e.push({name:"收藏数",type:"line",data:(t.collectCounts||[]).map((r,n)=>[lt(t.timestamps[n]),r]),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3,color:"#45b7d1"},itemStyle:{color:"#45b7d1"}}),N.value.shares&&e.push({name:"分享数",type:"line",data:(t.shareCounts||[]).map((r,n)=>[lt(t.timestamps[n]),r]),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3,color:"#f9ca24"},itemStyle:{color:"#f9ca24"}}),Ue.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(50, 50, 50, 0.95)",borderColor:"transparent",textStyle:{color:"#fff"}},grid:{left:"2%",right:"2%",bottom:"8%",top:"5%",containLabel:!0},xAxis:{type:"time",axisLine:{lineStyle:{color:"#e6e8eb"}},axisLabel:{color:"#6b7280",formatter:r=>{const n=new Date(r),c=(n.getMonth()+1).toString().padStart(2,"0"),y=n.getDate().toString().padStart(2,"0"),S=n.getHours().toString().padStart(2,"0");return`${c}-${y} ${S}:00`}},splitLine:{show:!1}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#e6e8eb"}},axisLabel:{color:"#6b7280",formatter:r=>r>=1e4?(r/1e4).toFixed(1)+"w":r},splitLine:{lineStyle:{color:"#f1f3f4",type:"dashed"}}},series:e}},Nl=async()=>{je.value=!0;try{await Promise.all([zl(),bt()])}finally{je.value=!1}},Pl=()=>{Be.value=!1,$e.value=null,_e.value=null,Ue.value=null,Ge.value=null,Re.value="7",N.value={likes:!0,comments:!0,collects:!0,shares:!0}},Vt=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",Fl=async t=>{Ke.value=!0;try{const e=await ia.getAuthorInfo(t);e.code===200?Y.value=e.data:(v.error("获取播主信息失败"),Y.value=null)}catch(e){console.error("获取播主信息失败:",e),v.error("获取播主信息失败"),Y.value=null}finally{Ke.value=!1}},Ll=()=>{Je.value=!1,Y.value=null},Hl=async t=>{var r,n;F.value=t,Qe.value=!0,L.value={description:((r=t.monitorVideo)==null?void 0:r.remark)||"",amounts:[]};const e=(n=t.monitorVideo)==null?void 0:n.awemeId;if(e){We.value=!0;try{console.log("加载投资记录，视频ID:",e);const c=await G.getVideoInvestments(e);if(c.code===200&&c.data&&c.data.length>0){const y=c.data.map(S=>({id:S.id,amount:S.amount,investmentTime:S.investmentTime?fl(S.investmentTime):ye()}));L.value.amounts=y,console.log("成功加载投资记录:",y)}else console.log("该视频暂无投资记录")}catch(c){console.warn("加载投资记录失败:",c)}finally{We.value=!1}}},mt=()=>{Qe.value=!1,F.value=null,We.value=!1,L.value={description:"",amounts:[{id:null,amount:null,investmentTime:ye()}]}},ql=()=>{L.value.amounts.push({id:null,amount:null,investmentTime:ye()})},Ol=()=>{L.value.amounts=[{id:null,amount:null,investmentTime:ye()}]},Yl=t=>{L.value.amounts.splice(t,1)},Bl=async()=>{var r,n,c,y,S,g,Le;if(!((n=(r=F.value)==null?void 0:r.monitorVideo)!=null&&n.id)){v.error("监控视频ID无效");return}const t=L.value.amounts.some(x=>x.amount&&x.amount>0&&x.investmentTime),e=L.value.description&&L.value.description.trim();!t&&!e&&console.log("用户选择加入自选，但未填写备注或投资记录"),Se.value=!0;try{const x={monitorVideoId:F.value.monitorVideo.id,joinCustomType:1,description:((c=L.value.description)==null?void 0:c.trim())||"",investmentAmounts:L.value.amounts.filter(T=>T.amount&&T.amount>0&&T.investmentTime).map(T=>({id:T.id,amount:parseFloat(T.amount),investmentTime:T.investmentTime+":00"}))},k=await G.updateCustomSelection(x);if(k.code===200){const T=((S=(y=F.value)==null?void 0:y.monitorVideo)==null?void 0:S.joinCustomType)===1;v.success(T?"更新自选成功":"加入自选成功"),mt(),await E(z.value)}else{const T=((Le=(g=F.value)==null?void 0:g.monitorVideo)==null?void 0:Le.joinCustomType)===1;v.error(k.message||(T?"更新自选失败":"加入自选失败"))}}catch(x){console.error("加入自选失败:",x),v.error("网络错误，请重试")}finally{Se.value=!1}},jl=async()=>{var t,e;if(!((e=(t=F.value)==null?void 0:t.monitorVideo)!=null&&e.id)){v.error("监控视频ID无效");return}try{await De.confirm("确定要取消该视频的自选状态吗？","确认取消",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),Se.value=!0;const r={monitorVideoId:F.value.monitorVideo.id,joinCustomType:0,description:"",investmentAmounts:[]},n=await G.updateCustomSelection(r);n.code===200?(v.success("取消自选成功"),mt(),await E(z.value)):v.error(n.message||"取消自选失败")}catch(r){r!=="cancel"&&(console.error("取消自选失败:",r),v.error("网络错误，请重试"))}finally{Se.value=!1}},Rl=()=>{if(h.query.from==="hotspot"){const t={};V.value&&(t.musicId=V.value),J.push({path:"/hotspot",query:t})}else J.push("/music")},Gl=t=>{var r,n;const e=((r=t==null?void 0:t.videoInfo)==null?void 0:r.authorId)||((n=t==null?void 0:t.authorInfo)==null?void 0:n.authorId);e?(Je.value=!0,Fl(e)):v.warning("无法获取播主ID")};return ms(async()=>{if(h.query.musicId){V.value=parseInt(h.query.musicId);try{const t=await Kt.getMusicById(V.value);(t==null?void 0:t.code)===200&&($.value=t.data)}catch(t){console.warn("获取音乐信息失败:",t)}await se(),await ae()}if(h.query.searchKeyword&&(ce.value=h.query.searchKeyword),h.query.selectedSearchTags)try{K.value=JSON.parse(h.query.selectedSearchTags)}catch(t){console.warn("解析selectedSearchTags失败:",t)}if(h.query.selectedSearchChannels)try{Q.value=JSON.parse(h.query.selectedSearchChannels)}catch(t){console.warn("解析selectedSearchChannels失败:",t)}h.query.currentFilter&&(X.value=h.query.currentFilter),h.query.sortField&&(ke.value=h.query.sortField),h.query.sortOrder&&(Ce.value=h.query.sortOrder),h.query.currentPage&&(z.value=parseInt(h.query.currentPage)),h.query.pageSize&&(Ae.value=parseInt(h.query.pageSize)),h.query.showHotspotFilter&&(H.value=h.query.showHotspotFilter==="true"),h.query.startTime&&(pe.value=h.query.startTime),h.query.endTime&&(fe.value=h.query.endTime),await E(z.value)}),vs(()=>{W.value&&(clearInterval(W.value),W.value=null)}),(t,e)=>{var Et,Mt,$t;const r=ps,n=fs,c=Ls,y=Hs,S=gs,g=qs,Le=_s,x=Os,k=ys,T=Ys,He=hs,vt=ks,qe=Cs,ee=Bs,pt=js,q=Rs,Oe=Gs,Jl=Js,Kl=Ks,Tt=ws,xt=Qs,Ql=Ws,ne=Xs,It=Zs,Wl=ea,Dt=ta,he=bs,Xl=la,te=sa,At=aa,Zl=oa,ft=na;return i(),d("div",ra,[s("header",ua,[e[46]||(e[46]=s("div",{class:"header-left"},[s("h1",{class:"system-title"},"抖音短视频分析系统")],-1)),s("div",da,[s("div",ca,[a(r,{size:32,class:"user-avatar"},{default:o(()=>{var l,p;return[m(u((p=(l=_(O).user)==null?void 0:l.username)==null?void 0:p.charAt(0)),1)]}),_:1}),s("span",ma,u((Et=_(O).user)==null?void 0:Et.username),1),a(S,{onCommand:Ml,class:"user-dropdown"},{dropdown:o(()=>[a(y,null,{default:o(()=>[a(c,{command:"updateEmail"},{default:o(()=>e[44]||(e[44]=[m("更新邮箱",-1)])),_:1,__:[44]}),a(c,{command:"logout"},{default:o(()=>e[45]||(e[45]=[m("退出登录",-1)])),_:1,__:[45]})]),_:1})]),default:o(()=>[a(n,{class:"dropdown-icon"},{default:o(()=>[a(_(Ss))]),_:1})]),_:1})])])]),s("div",va,[s("nav",pa,[a(Le,{"default-active":t.$route.path,router:"",class:"sidebar-menu"},{default:o(()=>[a(g,{index:"/music",class:"menu-item"},{default:o(()=>[a(n,null,{default:o(()=>[a(_(Vs))]),_:1}),e[47]||(e[47]=s("span",null,"音乐管理",-1))]),_:1,__:[47]})]),_:1},8,["default-active"])]),s("main",fa,[s("div",ga,[V.value&&$.value?(i(),d("div",_a,[s("h2",ya,[m(u($.value.title)+" ",1),s("span",ha," · "+u($.value.author),1)]),s("p",ka,[s("span",null,"专辑："+u($.value.album||"-"),1),$.value.tagList&&_(st)($.value.tagList).length?(i(),d("span",Ca,[e[48]||(e[48]=m(" · 标签： ",-1)),(i(!0),d(R,null,de(_(st)($.value.tagList),l=>(i(),w(x,{key:l,size:"small",class:"music-tag"},{default:o(()=>[m(u(l),1)]),_:2},1024))),128))])):C("",!0)])])):(i(),d(R,{key:1},[e[49]||(e[49]=s("h2",{class:"page-title"},"监控管理",-1)),e[50]||(e[50]=s("p",{class:"page-desc"},"管理您的抖音视频监控任务，实时掌握数据变化",-1))],64))]),V.value?(i(),d("div",wa,[s("div",{class:P(["stat-card total",{"is-active":X.value==="all"&&!H.value}]),onClick:e[0]||(e[0]=l=>Ze("all"))},[s("div",ba,[a(n,{size:"20"},{default:o(()=>[a(_(Ts))]),_:1})]),s("div",Sa,[s("div",Va,u(le.value.totalCount),1),e[51]||(e[51]=s("div",{class:"stat-label"},"当前监控视频",-1))])],2),s("div",{class:P(["stat-card hotspot",{"is-active":H.value}]),onClick:nl},[s("div",Ta,[a(n,{size:"20"},{default:o(()=>[a(_(Wt))]),_:1})]),s("div",xa,[s("div",Ia,u(le.value.hotspotAlertCount||0),1),e[52]||(e[52]=s("div",{class:"stat-label"},"72H热度异动",-1))])],2),s("div",{class:P(["stat-card auto",{"is-active":X.value==="auto"&&!H.value}]),onClick:e[1]||(e[1]=l=>Ze("auto"))},[s("div",Da,[a(n,{size:"20",color:"#10b981"},{default:o(()=>[a(_(Xt))]),_:1})]),s("div",Aa,[s("div",Ea,u(le.value.autoCount),1),e[53]||(e[53]=s("div",{class:"stat-label"},"自选视频",-1))])],2),s("div",{class:P(["stat-card manual",{"is-active":X.value==="manual"&&!H.value}]),onClick:e[2]||(e[2]=l=>Ze("manual"))},[s("div",Ma,[a(n,{size:"20"},{default:o(()=>[a(_(Zt))]),_:1})]),s("div",$a,[s("div",Ua,u(le.value.manualCount),1),e[54]||(e[54]=s("div",{class:"stat-label"},"手动添加",-1))])],2),s("div",{class:P(["stat-card error",{"is-active":X.value==="error"&&!H.value}]),onClick:e[3]||(e[3]=l=>Ze("error"))},[s("div",za,[a(n,{size:"20"},{default:o(()=>[a(_(xs))]),_:1})]),s("div",Na,[s("div",Pa,u(le.value.abnormalCount),1),e[55]||(e[55]=s("div",{class:"stat-label"},"异常监控",-1))])],2)])):C("",!0),V.value?(i(),d("div",Fa)):C("",!0),V.value?(i(),d("div",La,[s("div",Ha,[V.value?(i(),w(k,{key:0,onClick:Rl,icon:_(Is)},{default:o(()=>[m(u(_(h).query.from==="hotspot"?"返回热度提醒":"返回音乐管理"),1)]),_:1},8,["icon"])):C("",!0),a(k,{type:"primary",onClick:e[4]||(e[4]=l=>we.value=!0),icon:_(gt)},{default:o(()=>e[56]||(e[56]=[m(" 添加监控 ",-1)])),_:1,__:[56]},8,["icon"]),a(k,{onClick:e[5]||(e[5]=()=>E()),loading:U.value,icon:_(Ds)},{default:o(()=>e[57]||(e[57]=[m(" 刷新 ",-1)])),_:1,__:[57]},8,["loading","icon"])]),s("div",qa,[H.value?(i(),d("div",Oa,[a(He,{modelValue:ke.value,"onUpdate:modelValue":e[6]||(e[6]=l=>ke.value=l),placeholder:"排序方式",style:{width:"120px"},onChange:Xe},{default:o(()=>[a(T,{label:"按点赞数",value:"diggCount"}),a(T,{label:"按发布时间",value:"publishTime"}),a(T,{label:"按创建时间",value:"createTime"})]),_:1},8,["modelValue"]),a(He,{modelValue:Ce.value,"onUpdate:modelValue":e[7]||(e[7]=l=>Ce.value=l),placeholder:"排序顺序",style:{width:"90px"},onChange:Xe},{default:o(()=>[a(T,{label:"降序",value:"desc"}),a(T,{label:"升序",value:"asc"})]),_:1},8,["modelValue"]),s("div",Ya,[a(vt,{modelValue:pe.value,"onUpdate:modelValue":e[8]||(e[8]=l=>pe.value=l),type:"datetime",placeholder:"开始时间",style:{width:"160px"},format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",onChange:yt},null,8,["modelValue"]),e[58]||(e[58]=s("span",{class:"time-separator"},"至",-1)),a(vt,{modelValue:fe.value,"onUpdate:modelValue":e[9]||(e[9]=l=>fe.value=l),type:"datetime",placeholder:"结束时间",style:{width:"160px"},format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",onChange:yt},null,8,["modelValue"])]),a(qe,{modelValue:ce.value,"onUpdate:modelValue":e[10]||(e[10]=l=>ce.value=l),placeholder:"搜索视频ID、链接或播主名称","prefix-icon":_(at),style:{width:"250px"},clearable:"",onKeyup:Qt(Ve,["enter"]),onClear:Ve},null,8,["modelValue","prefix-icon"]),a(k,{onClick:Ve,icon:_(at),type:"primary"},{default:o(()=>e[59]||(e[59]=[m("搜索",-1)])),_:1,__:[59]},8,["icon"])])):(i(),d("div",Ba,[a(He,{modelValue:ke.value,"onUpdate:modelValue":e[11]||(e[11]=l=>ke.value=l),placeholder:"排序方式",style:{width:"140px","margin-right":"12px"},onChange:Xe},{default:o(()=>[a(T,{label:"按点赞数",value:"diggCount"}),a(T,{label:"按发布时间",value:"publishTime"}),a(T,{label:"按创建时间",value:"createTime"})]),_:1},8,["modelValue"]),a(He,{modelValue:Ce.value,"onUpdate:modelValue":e[12]||(e[12]=l=>Ce.value=l),placeholder:"排序顺序",style:{width:"100px","margin-right":"12px"},onChange:Xe},{default:o(()=>[a(T,{label:"降序",value:"desc"}),a(T,{label:"升序",value:"asc"})]),_:1},8,["modelValue"]),a(qe,{modelValue:ce.value,"onUpdate:modelValue":e[13]||(e[13]=l=>ce.value=l),placeholder:"搜索视频ID、链接或播主名称","prefix-icon":_(at),style:{width:"300px"},clearable:"",onKeyup:Qt(Ve,["enter"]),onClear:Ve},null,8,["modelValue","prefix-icon"]),a(k,{onClick:Ve,icon:_(at),style:{"margin-left":"8px"}},{default:o(()=>e[60]||(e[60]=[m("搜索",-1)])),_:1,__:[60]},8,["icon"])]))])])):C("",!0),me.value.length>0||ve.value.length>0?(i(),d("div",ja,[s("div",Ra,[s("div",Ga,[me.value.length>0?(i(),d("div",Ja,[e[61]||(e[61]=s("span",{class:"filter-group-title"},"搜索标签：",-1)),(i(!0),d(R,null,de(me.value,l=>(i(),w(x,{key:`tag-${l.tagName}`,size:"large",type:K.value.includes(l.tagName)?"primary":"info",effect:K.value.includes(l.tagName)?"dark":"light",class:"filter-tag",onClick:p=>il(l.tagName)},{default:o(()=>[m(u(l.tagName)+" ",1),s("span",Ka," ("+u(l.videoCount)+") ",1)]),_:2},1032,["type","effect","onClick"]))),128))])):C("",!0),ve.value.length>0?(i(),d("div",Qa,[e[62]||(e[62]=s("span",{class:"filter-group-title"},"搜索类型：",-1)),(i(!0),d(R,null,de(ve.value,l=>(i(),w(x,{key:`channel-${l.channelName}`,size:"large",type:Q.value.includes(l.channelName)?"warning":"info",effect:Q.value.includes(l.channelName)?"dark":"light",class:"filter-tag",onClick:p=>rl(l.channelName)},{default:o(()=>[m(u(l.channelName)+" ",1),s("span",Wa," ("+u(l.videoCount)+") ",1)]),_:2},1032,["type","effect","onClick"]))),128))])):C("",!0)]),K.value.length>0||Q.value.length>0?(i(),w(k,{key:0,type:"text",size:"small",onClick:cl,class:"clear-tags-btn"},{default:o(()=>[m(" 清除所有 ("+u(K.value.length+Q.value.length)+") ",1)]),_:1})):C("",!0)])])):C("",!0),a(Tt,{class:"monitor-table-card"},{header:o(()=>[s("div",Xa,[e[63]||(e[63]=s("span",{class:"card-title"},"监控列表",-1)),s("div",Za,[a(ee,{content:"批量操作",placement:"top"},{default:o(()=>[a(k,{disabled:Z.value.length===0,onClick:e[14]||(e[14]=l=>be.value=!0),size:"small"},{default:o(()=>[m(" 批量操作 ("+u(Z.value.length)+") ",1)]),_:1},8,["disabled"])]),_:1})])])]),default:o(()=>[V.value?_t((i(),d("div",to,[a(Jl,{data:it.value,style:{width:"100%"},onSelectionChange:Al,"empty-text":it.value.length===0?"暂无监控数据":"",size:"default","cell-style":{padding:"6px 6px"},"header-cell-style":{padding:"8px 6px",background:"#fafafa"}},{default:o(()=>[a(q,{type:"selection",width:"50"}),a(q,{label:"视频ID",width:"140"},{default:o(({row:l})=>{var p,D,B,ie,Ie,Ut,zt,Nt,Pt,Ft,Lt,Ht,qt,Ot,Yt,Bt,jt,Rt,Gt;return[s("div",lo,[pl(l)?(i(),d("div",so,[a(n,{class:"hotspot-video-icon",size:"12"},{default:o(()=>[a(_(Wt))]),_:1}),(p=l.monitorVideo)!=null&&p.awemeId||(D=l.monitorVideo)!=null&&D.id||l.awemeId?(i(),w(Oe,{key:0,href:`https://www.douyin.com/video/${((B=l.monitorVideo)==null?void 0:B.awemeId)||((ie=l.monitorVideo)==null?void 0:ie.id)||l.awemeId}`,target:"_blank",type:"primary",class:"video-id-link hotspot-video-id"},{default:o(()=>{var re,ue;return[m(u(Te(((re=l.monitorVideo)==null?void 0:re.awemeId)||((ue=l.monitorVideo)==null?void 0:ue.id)||l.awemeId)),1)]}),_:2},1032,["href"])):(i(),d("span",ao,u(Te(((Ie=l.monitorVideo)==null?void 0:Ie.awemeId)||((Ut=l.monitorVideo)==null?void 0:Ut.id)||l.awemeId)),1))])):((zt=l.monitorVideo)==null?void 0:zt.joinCustomType)===1?(i(),d("div",oo,[a(n,{class:"custom-video-icon",size:"12"},{default:o(()=>[a(_(Xt))]),_:1}),(Nt=l.monitorVideo)!=null&&Nt.awemeId||(Pt=l.monitorVideo)!=null&&Pt.id||l.awemeId?(i(),w(Oe,{key:0,href:`https://www.douyin.com/video/${((Ft=l.monitorVideo)==null?void 0:Ft.awemeId)||((Lt=l.monitorVideo)==null?void 0:Lt.id)||l.awemeId}`,target:"_blank",type:"primary",class:"video-id-link custom-video-id"},{default:o(()=>{var re,ue;return[m(u(Te(((re=l.monitorVideo)==null?void 0:re.awemeId)||((ue=l.monitorVideo)==null?void 0:ue.id)||l.awemeId)),1)]}),_:2},1032,["href"])):(i(),d("span",no,u(Te(((Ht=l.monitorVideo)==null?void 0:Ht.awemeId)||((qt=l.monitorVideo)==null?void 0:qt.id)||l.awemeId)),1))])):(i(),d(R,{key:2},[(Ot=l.monitorVideo)!=null&&Ot.awemeId||(Yt=l.monitorVideo)!=null&&Yt.id||l.awemeId?(i(),w(Oe,{key:0,href:`https://www.douyin.com/video/${((Bt=l.monitorVideo)==null?void 0:Bt.awemeId)||((jt=l.monitorVideo)==null?void 0:jt.id)||l.awemeId}`,target:"_blank",type:"primary",class:"video-id-link"},{default:o(()=>{var re,ue;return[m(u(Te(((re=l.monitorVideo)==null?void 0:re.awemeId)||((ue=l.monitorVideo)==null?void 0:ue.id)||l.awemeId)),1)]}),_:2},1032,["href"])):(i(),d("span",io,u(Te(((Rt=l.monitorVideo)==null?void 0:Rt.awemeId)||((Gt=l.monitorVideo)==null?void 0:Gt.id)||l.awemeId)),1))],64))]),C("",!0)]}),_:1}),a(q,{label:"视频描述",width:"200"},{default:o(({row:l})=>[s("div",ro,[et(l)?(i(),w(ee,{key:0,content:et(l),placement:"top","show-after":500},{default:o(()=>[s("span",uo,u(et(l)),1)]),_:2},1032,["content"])):(i(),d("span",co,"无描述"))])]),_:1}),a(q,{label:"播主名称",width:"115"},{default:o(({row:l})=>{var p;return[s("div",mo,[a(Oe,{type:"primary",class:"author-nickname",onClick:As(D=>Gl(l),["stop"])},{default:o(()=>{var D,B;return[m(u(((D=l.authorInfo)==null?void 0:D.nickname)||((B=l.videoInfo)==null?void 0:B.authorId)||"N/A"),1)]}),_:2},1032,["onClick"]),(p=l.authorInfo)!=null&&p.followerCount?(i(),w(x,{key:0,size:"small",type:"info",class:"author-followers-tag"},{default:o(()=>[m(" 粉丝 "+u(ml(l.authorInfo.followerCount)),1)]),_:2},1024)):C("",!0)])]}),_:1}),a(q,{label:"话题标签",width:"200"},{default:o(({row:l})=>[Pe(l).length>0?(i(),d("div",vo,[(i(!0),d(R,null,de(Pe(l).slice(0,5),p=>(i(),w(x,{key:p,size:"small",type:"info",class:"hashtag-tag"},{default:o(()=>[m(u(p),1)]),_:2},1024))),128)),Pe(l).length>5?(i(),w(ee,{key:0,content:Pe(l).slice(5).join("、"),placement:"top"},{default:o(()=>[a(x,{size:"small",type:"info",class:"hashtag-more"},{default:o(()=>[m(" +"+u(Pe(l).length-5),1)]),_:2},1024)]),_:2},1032,["content"])):C("",!0)])):(i(),d("span",po,"无话题标签"))]),_:1}),H.value?(i(),w(q,{key:0,label:"最后提醒时间",width:"160",align:"center"},{default:o(({row:l})=>{var p;return[s("div",fo,[(p=l.monitorVideo)!=null&&p.latestHotspotAlertTime?(i(),d("span",go,u(ct(l.monitorVideo.latestHotspotAlertTime)),1)):(i(),d("span",_o,"无提醒记录"))])]}),_:1})):X.value==="auto"?(i(),d(R,{key:1},[a(q,{label:"视频备注",width:"150"},{default:o(({row:l})=>{var p;return[s("div",yo,[(p=l.monitorVideo)!=null&&p.remark?(i(),w(ee,{key:0,content:l.monitorVideo.remark,placement:"top","show-after":500},{default:o(()=>[s("span",ho,u(l.monitorVideo.remark),1)]),_:2},1032,["content"])):(i(),d("span",ko,"无备注"))])]}),_:1}),a(q,{label:"投资总金额",width:"120",align:"right"},{default:o(({row:l})=>{var p;return[s("div",Co,[(p=l.monitorVideo)!=null&&p.totalInvestmentAmount&&l.monitorVideo.totalInvestmentAmount>0?(i(),d("span",wo," ¥"+u(vl(l.monitorVideo.totalInvestmentAmount)),1)):(i(),d("span",bo,"-"))])]}),_:1})],64)):(i(),d(R,{key:2},[a(q,{label:"搜索标签",width:"120"},{default:o(({row:l})=>[ze(l).length>0?(i(),d("div",So,[(i(!0),d(R,null,de(ze(l).slice(0,3),p=>(i(),w(x,{key:p,size:"small",type:"success",class:"search-tag",onClick:D=>ul(p)},{default:o(()=>[m(u(p),1)]),_:2},1032,["onClick"]))),128)),ze(l).length>3?(i(),w(ee,{key:0,content:ze(l).slice(3).join("、"),placement:"top"},{default:o(()=>[a(x,{size:"small",type:"success",class:"search-tag-more"},{default:o(()=>[m(" +"+u(ze(l).length-3),1)]),_:2},1024)]),_:2},1032,["content"])):C("",!0)])):(i(),d("span",Vo,"无搜索标签"))]),_:1}),a(q,{label:"搜索类型",width:"100"},{default:o(({row:l})=>[Ne(l).length>0?(i(),d("div",To,[(i(!0),d(R,null,de(Ne(l).slice(0,3),p=>(i(),w(x,{key:p,size:"small",type:"warning",class:"search-channel",onClick:D=>dl(p)},{default:o(()=>[m(u(p),1)]),_:2},1032,["onClick"]))),128)),Ne(l).length>3?(i(),w(ee,{key:0,content:Ne(l).slice(3).join("、"),placement:"top"},{default:o(()=>[a(x,{size:"small",type:"warning",class:"search-channel-more"},{default:o(()=>[m(" +"+u(Ne(l).length-3),1)]),_:2},1024)]),_:2},1032,["content"])):C("",!0)])):(i(),d("span",xo,"无搜索类型"))]),_:1})],64)),a(q,{label:"最新数据",width:"130"},{default:o(({row:l})=>[l.latestStats?(i(),d("div",Io,[s("div",Do,[e[65]||(e[65]=s("div",{class:"heart-icon"},[s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])],-1)),s("span",null,u(ht(l.latestStats.diggCount||0)),1)]),s("div",Ao,[a(n,{size:"14"},{default:o(()=>[a(_(el))]),_:1}),s("span",null,u(ht(l.latestStats.commentCount||0)),1)])])):(i(),d("span",Eo,"暂无数据"))]),_:1}),a(q,{label:"发布时间",width:"150",align:"center"},{default:o(({row:l})=>{var p;return[s("div",Mo,u(ct((p=l.monitorVideo)==null?void 0:p.videoPublishTime)),1)]}),_:1}),a(q,{label:"创建时间",width:"150",align:"center"},{default:o(({row:l})=>{var p;return[s("div",$o,u(ct((p=l.monitorVideo)==null?void 0:p.createTime)),1)]}),_:1}),a(q,{label:"状态",width:"100",align:"center"},{default:o(({row:l})=>{var p;return[a(x,{type:gl((p=l.monitorVideo)==null?void 0:p.status),size:"small",class:"status-tag"},{default:o(()=>{var D;return[m(u(_l((D=l.monitorVideo)==null?void 0:D.status)),1)]}),_:2},1032,["type"])]}),_:1}),a(q,{label:"操作",width:"200",fixed:"right"},{default:o(({row:l})=>{var p,D;return[s("div",Uo,[a(ee,{content:"查看统计",placement:"top"},{default:o(()=>[a(k,{type:"primary",size:"small",icon:_(Es),onClick:B=>{var ie;return xl((ie=l.monitorVideo)==null?void 0:ie.awemeId)},link:""},null,8,["icon","onClick"])]),_:2},1024),a(ee,{content:((p=l.monitorVideo)==null?void 0:p.status)===1?"停用监控":"启用监控",placement:"top"},{default:o(()=>{var B,ie;return[a(k,{type:((B=l.monitorVideo)==null?void 0:B.status)===1?"warning":"success",size:"small",icon:((ie=l.monitorVideo)==null?void 0:ie.status)===1?_(Ms):_($s),onClick:Ie=>Il(l),link:""},{default:o(()=>{var Ie;return[m(u(((Ie=l.monitorVideo)==null?void 0:Ie.status)===1?"停用":"启用"),1)]}),_:2},1032,["type","icon","onClick"])]}),_:2},1032,["content"]),a(ee,{content:((D=l.monitorVideo)==null?void 0:D.joinCustomType)===1?"更新自选":"加入自选",placement:"top"},{default:o(()=>[a(k,{type:"success",size:"small",icon:_(tl),onClick:B=>Hl(l),link:""},null,8,["icon","onClick"])]),_:2},1032,["content"]),a(ee,{content:"删除监控",placement:"top"},{default:o(()=>[a(k,{type:"danger",size:"small",icon:_(ll),onClick:B=>Dl(l),link:""},null,8,["icon","onClick"])]),_:2},1024)])]}),_:1})]),_:1},8,["data","empty-text"]),rt.value>0?(i(),d("div",zo,[a(Kl,{"current-page":z.value,"onUpdate:currentPage":e[16]||(e[16]=l=>z.value=l),"page-size":Ae.value,"onUpdate:pageSize":e[17]||(e[17]=l=>Ae.value=l),"page-sizes":[10,20,50,100],total:rt.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:al,onCurrentChange:ol,class:"pagination"},null,8,["current-page","page-size","total"])])):C("",!0)])),[[ft,U.value]]):(i(),d("div",eo,[a(pt,{description:"请先选择要查看监控的音乐","image-size":120},{default:o(()=>[a(k,{type:"primary",onClick:e[15]||(e[15]=l=>_(J).push("/music"))},{default:o(()=>e[64]||(e[64]=[m(" 选择音乐 ",-1)])),_:1,__:[64]})]),_:1})]))]),_:1})])]),a(he,{modelValue:we.value,"onUpdate:modelValue":e[22]||(e[22]=l=>we.value=l),title:"添加监控视频",width:"600px"},{footer:o(()=>[a(k,{onClick:e[20]||(e[20]=l=>we.value=!1)},{default:o(()=>e[75]||(e[75]=[m("取消",-1)])),_:1,__:[75]}),a(k,{type:"primary",onClick:e[21]||(e[21]=l=>ge.value==="single"?yl():wl()),loading:ge.value==="single"?nt.value:ut.value,disabled:ge.value==="batch"&&!M.value.file},{default:o(()=>[m(u(ge.value==="single"?"添加监控":"开始导入"),1)]),_:1},8,["loading","disabled"])]),default:o(()=>[a(Ql,{modelValue:ge.value,"onUpdate:modelValue":e[18]||(e[18]=l=>ge.value=l),style:{"margin-bottom":"20px"},onChange:kt},{default:o(()=>[a(xt,{label:"single"},{default:o(()=>e[66]||(e[66]=[m("单个添加",-1)])),_:1,__:[66]}),a(xt,{label:"batch"},{default:o(()=>e[67]||(e[67]=[m("批量导入",-1)])),_:1,__:[67]})]),_:1},8,["modelValue"]),a(Dt,{model:M.value,"label-width":"100px"},{default:o(()=>[ge.value==="single"?(i(),w(ne,{key:0,label:"视频链接"},{default:o(()=>[a(qe,{modelValue:M.value.videoUrl,"onUpdate:modelValue":e[19]||(e[19]=l=>M.value.videoUrl=l),placeholder:"请输入抖音视频链接或ID"},null,8,["modelValue"])]),_:1})):(i(),d(R,{key:1},[a(It,{title:"批量导入说明",type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},{default:o(()=>[s("div",No,[e[69]||(e[69]=s("p",null,[s("strong",null,"Excel文件格式要求：")],-1)),e[70]||(e[70]=s("ul",{style:{margin:"8px 0","padding-left":"20px"}},[s("li",null,"支持 .xlsx、.xls 和 .csv 格式"),s("li",null,"第一行为标题行（监控视频地址），会被跳过"),s("li",null,"从第二行开始，第一列为视频链接")],-1)),s("p",Po,[a(k,{type:"primary",size:"small",onClick:hl,icon:_(Us)},{default:o(()=>e[68]||(e[68]=[m(" 下载Excel模板 ",-1)])),_:1,__:[68]},8,["icon"])])])]),_:1}),a(ne,{label:"Excel文件",required:""},{default:o(()=>[a(Wl,{ref_key:"uploadRef",ref:Fe,"auto-upload":!1,"show-file-list":!0,limit:1,accept:".xlsx,.xls,.csv","on-change":kl,"on-remove":Cl},{tip:o(()=>e[72]||(e[72]=[s("div",{class:"el-upload__tip",style:{color:"#909399","font-size":"12px","margin-top":"5px"}}," 支持 .xlsx/.xls/.csv 文件，且不超过 10MB ",-1)])),default:o(()=>[a(k,{icon:_(zs)},{default:o(()=>e[71]||(e[71]=[m("选择Excel文件",-1)])),_:1,__:[71]},8,["icon"])]),_:1},512)]),_:1})],64)),V.value&&$.value?(i(),w(ne,{key:2,label:"音乐信息"},{default:o(()=>[s("div",Fo,[s("div",Lo,u($.value.title)+" - "+u($.value.author),1),$.value.album?(i(),d("div",Ho,"专辑："+u($.value.album),1)):C("",!0),$.value.tagList&&_(st)($.value.tagList).length?(i(),d("div",qo,[e[73]||(e[73]=m(" 标签： ",-1)),(i(!0),d(R,null,de(_(st)($.value.tagList),l=>(i(),w(x,{key:l,size:"small",class:"music-tag"},{default:o(()=>[m(u(l),1)]),_:2},1024))),128))])):C("",!0)])]),_:1})):(i(),w(ne,{key:3,label:"音乐信息"},{default:o(()=>[s("div",Oo,[a(It,{title:"请先选择音乐",type:"warning",closable:!1,"show-icon":""},{default:o(()=>e[74]||(e[74]=[s("p",null,"添加监控视频前，请先在音乐管理页面选择要监控的音乐",-1)])),_:1})])]),_:1}))]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(he,{modelValue:be.value,"onUpdate:modelValue":e[26]||(e[26]=l=>be.value=l),title:"批量操作",width:"400px"},{footer:o(()=>[a(k,{onClick:e[23]||(e[23]=l=>be.value=!1)},{default:o(()=>e[76]||(e[76]=[m("取消",-1)])),_:1,__:[76]}),a(k,{type:"success",onClick:e[24]||(e[24]=l=>wt(1))},{default:o(()=>e[77]||(e[77]=[m(" 批量启用 ",-1)])),_:1,__:[77]}),a(k,{type:"warning",onClick:e[25]||(e[25]=l=>wt(0))},{default:o(()=>e[78]||(e[78]=[m(" 批量停用 ",-1)])),_:1,__:[78]}),a(k,{type:"danger",onClick:El},{default:o(()=>e[79]||(e[79]=[m(" 批量删除 ",-1)])),_:1,__:[79]})]),default:o(()=>[s("p",null,"已选择 "+u(Z.value.length)+" 个监控项",1)]),_:1},8,["modelValue"]),a(he,{modelValue:Ye.value,"onUpdate:modelValue":e[27]||(e[27]=l=>Ye.value=l),title:"导入进度",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1,onClose:Ct},{footer:o(()=>[a(k,{onClick:Ct,disabled:I.value.status==="PROCESSING"},{default:o(()=>[m(u(I.value.status==="PROCESSING"?"处理中...":"关闭"),1)]),_:1},8,["disabled"])]),default:o(()=>[s("div",Yo,[s("div",Bo,[s("p",null,[e[80]||(e[80]=s("strong",null,"文件名：",-1)),m(u(I.value.fileName),1)]),s("p",null,[e[81]||(e[81]=s("strong",null,"任务ID：",-1)),m(u(I.value.id),1)]),s("p",null,[e[82]||(e[82]=s("strong",null,"状态：",-1)),a(x,{type:Tl(I.value.status),size:"small"},{default:o(()=>[m(u(Vl(I.value.status)),1)]),_:1},8,["type"])])]),s("div",jo,[a(Xl,{percentage:I.value.progress,status:I.value.status==="COMPLETED"?"success":I.value.status==="FAILED"?"exception":null},null,8,["percentage","status"]),I.value.totalCount>0?(i(),d("div",Ro,[s("div",Go,[s("span",null,"总计："+u(I.value.totalCount),1),s("span",null,"已处理："+u(I.value.processedCount),1)]),s("div",Jo,[s("span",Ko,"成功："+u(I.value.successCount),1),s("span",Qo,"跳过："+u(I.value.skipCount),1),s("span",Wo,"失败："+u(I.value.errorCount),1)])])):C("",!0)]),I.value.status==="PROCESSING"?(i(),d("div",Xo,[a(n,{class:"rotating"},{default:o(()=>[a(_(sl))]),_:1}),e[83]||(e[83]=s("span",null,"正在处理中，请稍候...",-1))])):C("",!0),I.value.status==="COMPLETED"?(i(),d("div",Zo,[a(n,{style:{color:"#67c23a"}},{default:o(()=>[a(_(Zt))]),_:1}),e[84]||(e[84]=s("span",null,"导入完成！",-1))])):C("",!0),I.value.status==="FAILED"?(i(),d("div",en,[a(n,{style:{color:"#f56c6c"}},{default:o(()=>[a(_(Ns))]),_:1}),e[85]||(e[85]=s("span",null,"导入失败，请重试",-1))])):C("",!0)])]),_:1},8,["modelValue"]),a(he,{modelValue:Be.value,"onUpdate:modelValue":e[37]||(e[37]=l=>Be.value=l),title:"视频数据统计",width:"90%",top:"5vh","close-on-click-modal":!1},{footer:o(()=>[a(k,{onClick:Pl},{default:o(()=>e[97]||(e[97]=[m("关闭",-1)])),_:1,__:[97]})]),default:o(()=>[s("div",tn,[s("div",ln,[s("div",sn,[e[86]||(e[86]=s("span",{class:"video-id-label"},"视频ID:",-1)),s("span",an,u($e.value),1)]),s("div",on,[a(He,{modelValue:Re.value,"onUpdate:modelValue":e[28]||(e[28]=l=>Re.value=l),placeholder:"选择时间范围",style:{width:"140px"},onChange:bt},{default:o(()=>[a(T,{label:"最近7天",value:"7"}),a(T,{label:"最近15天",value:"15"}),a(T,{label:"最近30天",value:"30"})]),_:1},8,["modelValue"])])]),_t((i(),d("div",nn,[_e.value?(i(),d("div",rn,[s("div",{class:P(["stat-card likes",{"is-active":N.value.likes}]),onClick:e[29]||(e[29]=l=>oe("likes"))},[e[88]||(e[88]=s("div",{class:"stat-icon"},[s("div",{class:"heart-icon-large"},[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])])],-1)),s("div",un,[s("div",dn,u(tt(_e.value.diggCount)),1),e[87]||(e[87]=s("div",{class:"stat-label"},"点赞数",-1)),A.value.digg?(i(),d("div",cn,[a(n,{class:P({"trend-up":A.value.digg>0,"trend-down":A.value.digg<0})},{default:o(()=>[(i(),w(ot(A.value.digg>0?"ArrowUp":"ArrowDown")))]),_:1},8,["class"]),s("span",null,u(Math.abs(A.value.digg))+"%",1)])):C("",!0)])],2),s("div",{class:P(["stat-card comments",{"is-active":N.value.comments}]),onClick:e[30]||(e[30]=l=>oe("comments"))},[s("div",mn,[a(n,{size:"24"},{default:o(()=>[a(_(el))]),_:1})]),s("div",vn,[s("div",pn,u(tt(_e.value.commentCount)),1),e[89]||(e[89]=s("div",{class:"stat-label"},"评论数",-1)),A.value.comment?(i(),d("div",fn,[a(n,{class:P({"trend-up":A.value.comment>0,"trend-down":A.value.comment<0})},{default:o(()=>[(i(),w(ot(A.value.comment>0?"ArrowUp":"ArrowDown")))]),_:1},8,["class"]),s("span",null,u(Math.abs(A.value.comment))+"%",1)])):C("",!0)])],2),s("div",{class:P(["stat-card collects",{"is-active":N.value.collects}]),onClick:e[31]||(e[31]=l=>oe("collects"))},[s("div",gn,[a(n,{size:"24"},{default:o(()=>[a(_(tl))]),_:1})]),s("div",_n,[s("div",yn,u(tt(_e.value.collectCount)),1),e[90]||(e[90]=s("div",{class:"stat-label"},"收藏数",-1)),A.value.collect?(i(),d("div",hn,[a(n,{class:P({"trend-up":A.value.collect>0,"trend-down":A.value.collect<0})},{default:o(()=>[(i(),w(ot(A.value.collect>0?"ArrowUp":"ArrowDown")))]),_:1},8,["class"]),s("span",null,u(Math.abs(A.value.collect))+"%",1)])):C("",!0)])],2),s("div",{class:P(["stat-card shares",{"is-active":N.value.shares}]),onClick:e[32]||(e[32]=l=>oe("shares"))},[s("div",kn,[a(n,{size:"24"},{default:o(()=>[a(_(Ps))]),_:1})]),s("div",Cn,[s("div",wn,u(tt(_e.value.shareCount)),1),e[91]||(e[91]=s("div",{class:"stat-label"},"分享数",-1)),A.value.share?(i(),d("div",bn,[a(n,{class:P({"trend-up":A.value.share>0,"trend-down":A.value.share<0})},{default:o(()=>[(i(),w(ot(A.value.share>0?"ArrowUp":"ArrowDown")))]),_:1},8,["class"]),s("span",null,u(Math.abs(A.value.share))+"%",1)])):C("",!0)])],2)])):C("",!0),a(Tt,{class:"chart-card"},{header:o(()=>[s("div",Sn,[e[96]||(e[96]=s("span",{class:"card-title"},"数据趋势图",-1)),s("div",Vn,[s("div",{class:P(["legend-item",{"legend-disabled":!N.value.likes}]),onClick:e[33]||(e[33]=l=>oe("likes"))},e[92]||(e[92]=[s("div",{class:"legend-dot likes-dot"},null,-1),s("span",null,"点赞",-1)]),2),s("div",{class:P(["legend-item",{"legend-disabled":!N.value.comments}]),onClick:e[34]||(e[34]=l=>oe("comments"))},e[93]||(e[93]=[s("div",{class:"legend-dot comments-dot"},null,-1),s("span",null,"评论",-1)]),2),s("div",{class:P(["legend-item",{"legend-disabled":!N.value.collects}]),onClick:e[35]||(e[35]=l=>oe("collects"))},e[94]||(e[94]=[s("div",{class:"legend-dot collects-dot"},null,-1),s("span",null,"收藏",-1)]),2),s("div",{class:P(["legend-item",{"legend-disabled":!N.value.shares}]),onClick:e[36]||(e[36]=l=>oe("shares"))},e[95]||(e[95]=[s("div",{class:"legend-dot shares-dot"},null,-1),s("span",null,"分享",-1)]),2)])])]),default:o(()=>[s("div",Tn,[Ue.value?(i(),w(_(rs),{key:0,option:Ue.value,style:{height:"400px"},autoresize:""},null,8,["option"])):je.value?C("",!0):(i(),d("div",xn,[a(pt,{description:"暂无图表数据"})]))])]),_:1})])),[[ft,je.value]])])]),_:1},8,["modelValue"]),a(he,{modelValue:Je.value,"onUpdate:modelValue":e[38]||(e[38]=l=>Je.value=l),title:"播主信息",width:"600px","close-on-click-modal":!1},{footer:o(()=>[a(k,{onClick:Ll},{default:o(()=>e[98]||(e[98]=[m("关闭",-1)])),_:1,__:[98]})]),default:o(()=>[_t((i(),d("div",null,[Y.value?(i(),d("div",In,[a(At,{column:2,border:""},{default:o(()=>[a(te,{label:"用户ID"},{default:o(()=>[m(u(Y.value.userId),1)]),_:1}),a(te,{label:"昵称"},{default:o(()=>[m(u(Y.value.nickname),1)]),_:1}),a(te,{label:"粉丝"},{default:o(()=>[m(u(Vt(Y.value.followerCount)),1)]),_:1}),a(te,{label:"获赞"},{default:o(()=>[m(u(Vt(Y.value.totalFavorited)),1)]),_:1}),a(te,{label:"性别"},{default:o(()=>[m(u(Y.value.gender||"-"),1)]),_:1}),a(te,{label:"地区"},{default:o(()=>[m(u(Y.value.ipLocation||"-"),1)]),_:1}),Y.value.userUrl?(i(),w(te,{key:0,label:"播主地址",span:2},{default:o(()=>[a(Oe,{type:"primary",href:Y.value.userUrl,target:"_blank",class:"author-link"},{default:o(()=>[m(u(Y.value.userUrl),1)]),_:1},8,["href"])]),_:1})):C("",!0)]),_:1})])):Ke.value?C("",!0):(i(),w(pt,{key:1,description:"暂无播主信息"}))])),[[ft,Ke.value]])]),_:1},8,["modelValue"]),a(he,{modelValue:Qe.value,"onUpdate:modelValue":e[40]||(e[40]=l=>Qe.value=l),title:(($t=(Mt=F.value)==null?void 0:Mt.monitorVideo)==null?void 0:$t.joinCustomType)===1?"更新自选":"加入自选",width:"700px","close-on-click-modal":!1},{footer:o(()=>{var l,p;return[a(k,{onClick:mt},{default:o(()=>e[104]||(e[104]=[m("取消",-1)])),_:1,__:[104]}),((p=(l=F.value)==null?void 0:l.monitorVideo)==null?void 0:p.joinCustomType)===1?(i(),w(k,{key:0,type:"danger",onClick:jl,loading:Se.value},{default:o(()=>e[105]||(e[105]=[m(" 取消自选 ",-1)])),_:1,__:[105]},8,["loading"])):C("",!0),a(k,{type:"primary",onClick:Bl,loading:Se.value},{default:o(()=>{var D,B;return[m(u(((B=(D=F.value)==null?void 0:D.monitorVideo)==null?void 0:B.joinCustomType)===1?"确认更新":"确认加入"),1)]}),_:1},8,["loading"])]}),default:o(()=>[s("div",Dn,[F.value?(i(),d("div",An,[e[99]||(e[99]=s("h4",null,"视频信息",-1)),a(At,{column:2,border:"",size:"small"},{default:o(()=>[a(te,{label:"视频ID"},{default:o(()=>{var l;return[m(u((l=F.value.monitorVideo)==null?void 0:l.awemeId),1)]}),_:1}),a(te,{label:"播主"},{default:o(()=>{var l,p;return[m(u(((l=F.value.authorInfo)==null?void 0:l.nickname)||((p=F.value.videoInfo)==null?void 0:p.authorId)),1)]}),_:1}),a(te,{label:"视频标题",span:2},{default:o(()=>[s("div",En,u(et(F.value)||"暂无标题"),1)]),_:1})]),_:1})])):C("",!0),s("div",Mn,[e[100]||(e[100]=s("h4",null,"视频备注",-1)),a(ne,null,{default:o(()=>[a(qe,{modelValue:L.value.description,"onUpdate:modelValue":e[39]||(e[39]=l=>L.value.description=l),type:"textarea",rows:3,placeholder:"请输入视频备注（可选）",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),s("div",$n,[e[103]||(e[103]=s("h4",null,"投资记录",-1)),We.value?(i(),d("div",Un,[a(n,{class:"rotating"},{default:o(()=>[a(_(sl))]),_:1}),e[101]||(e[101]=s("span",null,"正在加载投资记录...",-1))])):(i(),d(R,{key:1},[L.value.amounts.length>0?(i(),d("div",zn,[(i(!0),d(R,null,de(L.value.amounts,(l,p)=>(i(),d("div",{key:p,class:"investment-item"},[s("div",Nn,[a(ne,{label:"投资金额",class:"amount-input"},{default:o(()=>[a(Zl,{modelValue:l.amount,"onUpdate:modelValue":D=>l.amount=D,min:0,step:100,precision:2,placeholder:"请输入投资金额",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(ne,{label:"投资时间",class:"time-input"},{default:o(()=>[a(vt,{modelValue:l.investmentTime,"onUpdate:modelValue":D=>l.investmentTime=D,type:"datetime",placeholder:"选择投资时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DDTHH:mm",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s("div",Pn,[p===L.value.amounts.length-1?(i(),w(k,{key:0,type:"primary",size:"small",icon:_(gt),onClick:ql,circle:""},null,8,["icon"])):C("",!0),a(k,{type:"danger",size:"small",icon:_(ll),onClick:D=>Yl(p),circle:""},null,8,["icon","onClick"])])])]))),128))])):(i(),d("div",Fn,[a(k,{type:"primary",icon:_(gt),onClick:Ol,class:"add-investment-btn"},{default:o(()=>e[102]||(e[102]=[m(" 添加投资记录 ",-1)])),_:1,__:[102]},8,["icon"])]))],64))])])]),_:1},8,["modelValue","title"]),a(he,{modelValue:Ee.value,"onUpdate:modelValue":e[43]||(e[43]=l=>Ee.value=l),title:"更新邮箱",width:"420px"},{footer:o(()=>[a(k,{onClick:e[42]||(e[42]=l=>Ee.value=!1)},{default:o(()=>e[106]||(e[106]=[m("取消",-1)])),_:1,__:[106]}),a(k,{type:"primary",loading:dt.value,onClick:Ul},{default:o(()=>e[107]||(e[107]=[m("确定",-1)])),_:1,__:[107]},8,["loading"])]),default:o(()=>[a(Dt,{model:Me.value,"label-width":"80px"},{default:o(()=>[a(ne,{label:"邮箱"},{default:o(()=>[a(qe,{modelValue:Me.value.email,"onUpdate:modelValue":e[41]||(e[41]=l=>Me.value.email=l),placeholder:"请输入新的邮箱地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Wn=es(Ln,[["__scopeId","data-v-9af36a6a"]]);export{Wn as default};
