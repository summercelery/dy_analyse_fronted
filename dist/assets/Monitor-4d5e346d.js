import{_ as La}from"./_plugin-vue_export-helper-d6af9df2.js";/* empty css                  */import{f as Oe}from"./favorite-ec897acd.js";/* empty css                             *//* empty css                     *//* empty css                       *//* empty css                       */import{p as wt}from"./tagUtils-6a01983b.js";/* empty css                     *//* empty css                  *//* empty css                *//* empty css                        */import{n as Q,p as Na,u as Pa,a as Ra,r as f,q as Oa,s as qa,o as u,c as p,d as l,e as a,w as o,t as i,v as _,h as c,F as W,x as ve,y as h,z as E,A as C,g as kl,B as m,C as Ee,D as Ba,G as Ha,H as Ya,I as ja,k as Ga,J as Wa,K as Ja,i as Ka,L as Qa,M as Xa,N as Za,O as es,P as qt,Q as ts,R as ls,S as Cl,T as as,U as bl,V as kt,W as Sl,X as Ct,Y as Bt,Z as ss,_ as Ht,$ as os,a0 as qe,f as ns,a1 as Tl,a2 as rs,a3 as xl,a4 as is,a5 as us,a6 as ds,a7 as cs,a8 as Vl,a9 as vs,aa as bt,ab as ms,ac as Dl,ad as ps,ae as fs,af as gs,ag as _s,ah as hs,ai as ys,aj as ws,ak as ks,al as Cs,am as bs,an as Ss,ao as Ts,ap as xs,aq as Vs,j as Ds,ar as Is,as as As,l as Es,at as Fs,au as Ms,av as $s,aw as zs,ax as Us,ay as Ls}from"./index-a434c30f.js";import{m as Il}from"./music-6f462bb7.js";import{H as Ns,v as Al}from"./index.esm.min-7515423b.js";import{a as Ps}from"./author-93b9e298.js";import{u as Rs,i as Os,a as qs,b as Bs,c as Hs,d as Ys,e as js}from"./install-6e609d49.js";const X={getMonitorList(x={}){return Q({url:"/monitor/list",method:"get",params:x,paramsSerializer:{serialize:b=>{const te=new URLSearchParams;return Object.keys(b).forEach(q=>{const N=b[q];Array.isArray(N)?te.append(q,JSON.stringify(N)):N!=null&&te.append(q,N)}),te.toString()}}})},addMonitor(x){return Q({url:"/monitor/add",method:"post",data:x})},updateStatus(x,b){return Q({url:`/monitor/status/${x}`,method:"put",data:b})},deleteMonitor(x){return Q({url:`/monitor/${x}`,method:"delete"})},uploadExcel(x){return Q({url:"/monitor/upload/excel",method:"post",data:x,headers:{"Content-Type":"multipart/form-data"}})},uploadExcelAsync(x){return Q({url:"/monitor/upload/excel/async",method:"post",data:x,headers:{"Content-Type":"multipart/form-data"}})},getTaskProgress(x){return Q({url:`/import-task/${x}/progress`,method:"get"})},getTaskDetails(x){return Q({url:`/import-task/${x}`,method:"get"})},getUserTasks(x=10){return Q({url:`/import-task/list?limit=${x}`,method:"get"})},getMonitorStatistics(x){return Q({url:"/monitor/statistics",method:"get",params:x,paramsSerializer:{serialize:b=>{const te=new URLSearchParams;return Object.keys(b).forEach(q=>{const N=b[q];Array.isArray(N)?te.append(q,JSON.stringify(N)):N!=null&&te.append(q,N)}),te.toString()}}})},getMonitorTags(x){return Q({url:"/monitor/tags",method:"get",params:{musicId:x}})},getMonitorChannels(x){return Q({url:"/monitor/channels",method:"get",params:{musicId:x}})},updateCustomSelection(x){return Q({url:"/monitor/custom-selection",method:"put",data:x})},getVideoInvestments(x){return Q({url:`/investment/video/${x}`,method:"get"})},deleteHotspotAlert(x){return Q({url:`/hotspot-alert/${x}`,method:"delete"})}};const Gs={class:"monitor-layout"},Ws={class:"header"},Js={class:"header-right"},Ks={class:"user-info"},Qs={class:"username"},Xs={class:"main-container"},Zs={class:"sidebar"},eo={class:"content"},to={class:"page-header"},lo={key:0,class:"page-title-section"},ao={class:"page-title"},so={class:"music-meta"},oo={class:"page-meta"},no={key:0},ro={key:0,class:"stats-row"},io={class:"stat-icon"},uo={class:"stat-info"},co={class:"stat-value"},vo={class:"stat-icon"},mo={class:"stat-info"},po={class:"stat-value"},fo={class:"stat-icon"},go={class:"stat-info"},_o={class:"stat-value"},ho={class:"stat-icon"},yo={class:"stat-info"},wo={class:"stat-value"},ko={class:"stat-icon"},Co={class:"stat-info"},bo={class:"stat-value"},So={key:1,class:"section-divider"},To={key:2,class:"toolbar"},xo={key:0,class:"hotspot-toolbar-layout"},Vo={class:"hotspot-main-row"},Do={class:"toolbar-left"},Io={class:"toolbar-right"},Ao={class:"hotspot-main-controls"},Eo={key:1,class:"normal-toolbar-layout"},Fo={class:"normal-main-row"},Mo={class:"toolbar-left"},$o={class:"toolbar-right"},zo={class:"normal-main-controls"},Uo={key:3,class:"tag-filter-section"},Lo={class:"tag-filter-row"},No={class:"tag-filter-content"},Po={key:0,class:"filter-group"},Ro={class:"tag-count"},Oo={key:1,class:"filter-group"},qo={class:"tag-count"},Bo={class:"card-header"},Ho={class:"header-actions"},Yo={key:0,class:"no-music-selected"},jo={key:1},Go={class:"expand-content"},Wo={class:"time-text"},Jo={class:"growth-detail"},Ko={class:"growth-rate"},Qo={class:"growth-count"},Xo={class:"growth-detail"},Zo={class:"growth-rate"},en={class:"growth-count"},tn={class:"growth-detail"},ln={class:"growth-rate"},an={class:"growth-count"},sn={class:"growth-detail"},on={class:"growth-rate"},nn={class:"growth-count"},rn={class:"expand-actions"},un={class:"custom-icon-cell"},dn={class:"video-id"};const cn={class:"video-desc"},vn={class:"desc-text"},mn={key:1,class:"na-text"},pn=["onClick"],fn={key:0,class:"hashtag-list"},gn={key:1,class:"na-text"},_n={class:"alert-stats"},hn={class:"total-alerts"},yn={class:"level-stats"},wn={class:"trigger-score"},kn={class:"video-remark"},Cn={class:"remark-text"},bn={key:1,class:"na-text"},Sn={class:"total-investment"},Tn={key:0,class:"investment-amount"},xn={key:1,class:"na-text"},Vn={key:0,class:"search-tag-list"},Dn={key:1,class:"na-text"},In={key:0,class:"search-channel-list"},An={key:1,class:"na-text"},En={key:0,class:"stats-preview"},Fn={class:"stats-item"},Mn={class:"stats-item"},$n={key:1,class:"na-text"},zn={class:"publish-time"},Un={class:"create-time"},Ln={class:"table-actions"},Nn={key:0,class:"pagination-container"},Pn={style:{"line-height":"1.6"}},Rn={style:{margin:"8px 0"}},On={class:"music-info-display"},qn={class:"music-title"},Bn={key:0,class:"music-album"},Hn={key:1,class:"music-tags"},Yn={class:"music-info-display"},jn={class:"task-progress-container"},Gn={class:"task-info"},Wn={class:"progress-section"},Jn={key:0,class:"progress-stats"},Kn={class:"task-stats-row"},Qn={class:"task-stats-row"},Xn={style:{color:"#67c23a"}},Zn={style:{color:"#909399"}},er={style:{color:"#f56c6c"}},tr={key:0,class:"processing-tip"},lr={key:1,class:"completed-message"},ar={key:2,class:"failed-message"},sr={class:"stats-dialog-content"},or={class:"stats-header"},nr={class:"video-info"},rr={class:"video-id-value"},ir={class:"time-range-selector"},ur={class:"stats-content"},dr={key:0,class:"stats-grid"},cr={class:"stat-info"},vr={class:"stat-value"},mr={key:0,class:"stat-trend"},pr={class:"stat-icon"},fr={class:"stat-info"},gr={class:"stat-value"},_r={key:0,class:"stat-trend"},hr={class:"stat-icon"},yr={class:"stat-info"},wr={class:"stat-value"},kr={key:0,class:"stat-trend"},Cr={class:"stat-icon"},br={class:"stat-info"},Sr={class:"stat-value"},Tr={key:0,class:"stat-trend"},xr={class:"card-header"},Vr={class:"chart-legend"},Dr={class:"chart-container"},Ir={key:1,class:"empty-chart"},Ar={key:0,class:"author-info-dialog"},Er={class:"author-avatar-section"},Fr={class:"author-basic-info"},Mr={class:"user-id"},$r={key:0,class:"favorite-tags"},zr={key:2,class:"color-tag"},Ur=["title"],Lr={class:"author-stats"},Nr={class:"stat-item"},Pr={class:"stat-item"},Rr={key:0,class:"author-details"},Or={class:"author-description"},qr={class:"remark-display"},Br={class:"color-selection-container"},Hr={class:"color-palette"},Yr={class:"color-group"},jr={class:"color-row"},Gr=["onClick","title"],Wr={key:0,class:"selected-color-display"},Jr=["title"],Kr={class:"selected-value"},Qr={class:"color-selection-container"},Xr={class:"color-palette"},Zr={class:"color-group"},ei={class:"color-row"},ti=["onClick","title"],li={key:0,class:"selected-color-display"},ai=["title"],si={class:"selected-value"},oi={class:"custom-selection-content"},ni={key:0,class:"video-info-section"},ri={class:"video-title"},ii={class:"description-section"},ui={class:"investment-section"},di={key:0,class:"loading-tip"},ci={key:0},vi={class:"investment-row"},mi={class:"action-buttons"},pi={key:1,class:"no-investment-records"},fi={key:0,class:"simple-alert-content"},gi={class:"alert-info-section"},_i={class:"info-row"},hi={class:"info-value"},yi={class:"info-row"},wi={class:"info-value"},ki={class:"info-row"},Ci={class:"info-row"},bi={class:"info-row"},Si={class:"info-row"},Ti={class:"data-section"},xi={class:"data-rows"},Vi={class:"data-row"},Di={class:"data-stats"},Ii={class:"baseline"},Ai={class:"current"},Ei={class:"growth positive"},Fi={class:"data-row"},Mi={class:"data-stats"},$i={class:"baseline"},zi={class:"current"},Ui={class:"growth positive"},Li={class:"data-row"},Ni={class:"data-stats"},Pi={class:"baseline"},Ri={class:"current"},Oi={class:"growth positive"},qi={class:"data-row"},Bi={class:"data-stats"},Hi={class:"baseline"},Yi={class:"current"},ji={class:"growth positive"},Gi={__name:"Monitor",setup(x){Rs([Os,qs,Bs,Hs,Ys,js]);const b=Na(),te=Pa(),q=Ra(),N=f(!1),St=f(!1),Tt=f([]),be=f(""),ie=f([]),El=f([]),I=f(null),P=f(null),le=f([]),Se=f([]),ae=f([]),Te=f([]),Fe=f("diggCount"),Me=f("desc"),J=f(!1),ue=f(""),de=f(""),_e=f(""),he=f(""),R=f(1),Be=f(10),xt=f(0),me=f({totalCount:0,manualCount:0,autoCount:0,abnormalCount:0,hotspotAlertCount:0}),xe=f(!1),$e=f(!1),lt=f(!1),Vt=f(!1),Ve=f("single"),L=f({videoUrl:"",file:null}),M=f({id:null,fileName:"",status:"PENDING",progress:0,totalCount:0,processedCount:0,successCount:0,skipCount:0,errorCount:0}),re=f(null),He=f(!1),Dt=f(!1),Ye=f({email:""}),at=f(!1),st=f(!1),je=f(null),De=f(null),ot=f("7"),Ge=f(null),nt=f(null),z=f({digg:0,comment:0,collect:0,share:0}),B=f({likes:!0,comments:!0,collects:!0,shares:!0}),rt=f(!1),it=f(!1),T=f(null),ze=f(!1),K=f(!1),U=f(null),We=f(!1),It=f(null),H=f({channelType:"",authorLevel:1,backgroundColor:"",remark:""}),Je=f(null),At=f(!1),Ke=f(!1),Et=f(null),Y=f({channelType:"",authorLevel:1,backgroundColor:"",remark:""}),Fl={channelType:[{max:50,message:"频道类型不能超过50个字符",trigger:"blur"}],backgroundColor:[{validator:(t,e,n)=>{if(!e||e.trim()===""){n();return}const r=/^#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/,v=/^rgba?\(\s*([01]?\d\d?|2[0-4]\d|25[0-5])\s*,\s*([01]?\d\d?|2[0-4]\d|25[0-5])\s*,\s*([01]?\d\d?|2[0-4]\d|25[0-5])\s*(?:,\s*(0(?:\.\d+)?|1(?:\.0+)?))?\s*\)$/;!r.test(e)&&!v.test(e)?n(new Error("请输入有效的颜色代码，格式如：#FF0000 或 rgb(255, 0, 0)")):n()},trigger:"blur"}],remark:[{max:200,message:"备注信息不能超过200个字符",trigger:"blur"}]},Ml={channelType:[{max:50,message:"频道类型不能超过50个字符",trigger:"blur"}],backgroundColor:[{validator:(t,e,n)=>{if(!e||e.trim()===""){n();return}const r=/^#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{8})$/,v=/^rgba?\(\s*([01]?\d\d?|2[0-4]\d|25[0-5])\s*,\s*([01]?\d\d?|2[0-4]\d|25[0-5])\s*,\s*([01]?\d\d?|2[0-4]\d|25[0-5])\s*(?:,\s*(0(?:\.\d+)?|1(?:\.0+)?))?\s*\)$/;!r.test(e)&&!v.test(e)?n(new Error("请输入有效的颜色代码，格式如：#FF0000 或 rgb(255, 0, 0)")):n()},trigger:"blur"}],remark:[{max:200,message:"备注信息不能超过200个字符",trigger:"blur"}]},ut=f(!1),Ue=f(!1),dt=f(!1),j=f(null),G=f({description:"",amounts:[{id:null,amount:null,investmentTime:""}]}),$l=t=>{Be.value=t,R.value=1,$(1)},zl=t=>{R.value=t,$(t)},Le=()=>{R.value=1,$(1)},Ul=()=>{J.value?m.success("已刷新72H热度异动数据"):(J.value=!0,m.success("已开启72H热度异动筛选"));const t=new Date;t.setTime(t.getTime()-72*60*60*1e3),ue.value=ke(t);const e=new Date;de.value=ke(e),_e.value="",he.value="",oe.value="all",R.value=1,$(1)},Yt=()=>{if(J.value&&_e.value&&he.value){const t=new Date(_e.value),e=new Date(he.value);if(t>e){m.warning("开始日期不能晚于结束日期");return}t.setHours(0,0,0,0),e.setHours(23,59,59,999),ue.value=ke(t),de.value=ke(e),console.log("用户选择日期范围:",{customStartDate:_e.value,customEndDate:he.value,startTime:ue.value,endTime:de.value}),R.value=1,$(1)}},pe=async()=>{if(I.value)try{const t={musicId:I.value};if(J.value&&ue.value&&de.value)t.startTime=ue.value,t.endTime=de.value;else{const n=new Date;n.setTime(n.getTime()-72*60*60*1e3),t.startTime=ke(n);const r=new Date;t.endTime=ke(r)}const e=await X.getMonitorStatistics(t);console.log("Monitor页面: 统计数据API响应:",e),console.log("Monitor页面: 统计数据请求参数:",t),e.code===200?(me.value=e.data,console.log("Monitor页面: 统计数据:",me.value)):(console.warn("获取统计数据失败:",e.message),me.value={totalCount:0,manualCount:0,autoCount:0,abnormalCount:0,hotspotAlertCount:0})}catch(t){console.error("Monitor页面: 加载统计数据失败:",t),me.value={totalCount:0,manualCount:0,autoCount:0,abnormalCount:0,hotspotAlertCount:0}}},ye=async()=>{if(I.value)try{const[t,e]=await Promise.all([X.getMonitorTags(I.value),X.getMonitorChannels(I.value)]);console.log("Monitor页面: 标签统计API响应:",t),console.log("Monitor页面: 频道统计API响应:",e),t.code===200?Se.value=t.data||[]:(console.warn("获取标签数据失败:",t.message),Se.value=[]),e.code===200?Te.value=e.data||[]:(console.warn("获取频道数据失败:",e.message),Te.value=[]),console.log("Monitor页面: 标签数据:",Se.value),console.log("Monitor页面: 频道数据:",Te.value)}catch(t){console.error("Monitor页面: 加载标签和频道数据失败:",t),Se.value=[],Te.value=[]}},oe=f("all"),ct=()=>{R.value=1,$(1)},Qe=t=>{var n;const e=(n=t.monitorVideo)==null?void 0:n.tag;if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string")try{const r=JSON.parse(e);if(Array.isArray(r))return r}catch{return e.split(",").map(v=>v.trim()).filter(v=>v)}return[]},Xe=t=>{var n;const e=(n=t.monitorVideo)==null?void 0:n.channel;if(!e)return[];if(Array.isArray(e))return e;if(typeof e=="string")try{const r=JSON.parse(e);if(Array.isArray(r))return r}catch{return e.split(",").map(v=>v.trim()).filter(v=>v)}return[]},Ll=t=>{const e=le.value.indexOf(t);e>-1?le.value.splice(e,1):le.value.push(t),R.value=1,$(1);const n=le.value.length+ae.value.length;n>0?m.success(`已选择 ${n} 个筛选条件`):m.success("已清除所有筛选条件")},Nl=t=>{const e=ae.value.indexOf(t);e>-1?ae.value.splice(e,1):ae.value.push(t),R.value=1,$(1);const n=le.value.length+ae.value.length;n>0?m.success(`已选择 ${n} 个筛选条件`):m.success("已清除所有筛选条件")},Pl=t=>{},Rl=t=>{},Ol=()=>{le.value=[],ae.value=[],R.value=1,$(1),m.success("已清除所有筛选条件")},vt=t=>{oe.value=t,J.value=!1,ue.value="",de.value="",_e.value="",he.value="",R.value=1,$(1);const e={all:"已显示当前监控视频",manual:"已过滤显示手动添加的视频",error:"已过滤显示异常监控的视频",auto:"已过滤显示自选视频"};m.success(e[t]||"过滤完成")},Ze=t=>{var n;let e=null;if((n=t.videoInfo)!=null&&n.topics?e=t.videoInfo.topics:t.topics&&(e=t.topics),Array.isArray(e))return e;if(typeof e=="string")try{const r=JSON.parse(e);if(Array.isArray(r))return r}catch{}return[]},mt=t=>t.hotspotAlerts||[],fe=t=>{const e=mt(t);if(e.length===0)return{total:0,level1:0,level2:0,level3:0,level4:0};const n={total:e.length,level1:0,level2:0,level3:0,level4:0};return e.forEach(r=>{r.alertLevel===1?n.level1++:r.alertLevel===2?n.level2++:r.alertLevel===3?n.level3++:r.alertLevel===4&&n.level4++}),n},jt=t=>{const e=mt(t);return e.length===0?0:Math.max(...e.map(n=>n.triggerScore||0))},ql=t=>{const e=mt(t);return e.length===0?"short":e.reduce((r,v)=>(v.triggerScore||0)>(r.triggerScore||0)?v:r).timeWindow||"short"},Ft=(t,e)=>{if(!t)return"score-low";let n,r;switch(e){case"short":n=60,r=100;break;case"medium":n=100,r=200;break;case"long":n=160,r=320;break;default:n=60,r=100;break}return t>r?"score-high":t>=n?"score-medium":"score-low"},Mt=t=>t?t.toFixed(1):"0.0",Gt=t=>{switch(t){case 4:return"danger";case 3:return"danger";case 2:return"warning";case 1:return"success";default:return"info"}},Wt=t=>{switch(t){case 4:return"极度爆发";case 3:return"高度爆发";case 2:return"中度飙升";case 1:return"轻度上涨";default:return"未知"}},Jt=t=>{switch(t){case"short":return"success";case"medium":return"warning";case"long":return"danger";default:return"info"}},Kt=t=>{switch(t){case"short":return"短期";case"medium":return"中期";case"long":return"长期";default:return"未知"}},Qt=t=>{switch(t){case"digg":return"点赞";case"comment":return"评论";case"collect":return"收藏";case"share":return"分享";case"comprehensive":return"综合";default:return"未知"}},we=t=>t?t.toFixed(1):"0.0",pt=(t,e)=>(t||0)-(e||0),$t=t=>t?zt(t):"N/A",ft=f(!1),A=f(null),Bl=t=>{A.value=t,ft.value=!0},Hl=()=>{ft.value=!1,A.value=null},Yl=async t=>{try{await Ee.confirm("确认删除该热度提醒？","警告",{type:"warning",confirmButtonText:"确认删除",cancelButtonText:"取消"});const e=await X.deleteHotspotAlert(t.id);e.code===200?(m.success("删除成功"),await $(R.value),await pe()):m.error(e.message||"删除失败")}catch(e){e!=="cancel"&&m.error("删除失败")}},gt=t=>{var r;let e=null;return(r=t.videoInfo)!=null&&r.desc?e=t.videoInfo.desc:t.desc&&(e=t.desc),e?e.replace(/#[^\s#]*/g,"").trim()||e:""},Z=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",zt=t=>{if(!t)return"N/A";const e=t.toString().length===10;return new Date(e?t*1e3:t).toLocaleString("zh-CN")},jl=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",Gl=t=>!t||t<=0?"0.00":parseFloat(t).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}),Xt=t=>!t||t==="N/A"?"N/A":t.toString().length>10?t.toString().substring(0,10):t.toString(),Ut=t=>{var n;const e=(n=t.monitorVideo)==null?void 0:n.latestHotspotAlertTime;if(!e)return!1;try{const r=new Date;return r.setTime(r.getTime()-72*60*60*1e3),new Date(e)>r}catch(r){return console.warn("解析热度异动时间失败:",r),!1}},ke=(t=new Date)=>{const e=new Date(t.getTime()+288e5),n=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),v=String(e.getUTCDate()).padStart(2,"0"),k=String(e.getUTCHours()).padStart(2,"0"),V=String(e.getUTCMinutes()).padStart(2,"0"),y=String(e.getUTCSeconds()).padStart(2,"0");return`${n}-${r}-${v} ${k}:${V}:${y}`},Ie=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),v=String(t.getHours()).padStart(2,"0"),k=String(t.getMinutes()).padStart(2,"0");return`${e}-${n}-${r}T${v}:${k}`},Wl=t=>{if(!t)return Ie();try{const e=new Date(t);if(isNaN(e.getTime()))return console.warn("无效的时间格式:",t),Ie();const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),v=String(e.getDate()).padStart(2,"0"),k=String(e.getHours()).padStart(2,"0"),V=String(e.getMinutes()).padStart(2,"0");return`${n}-${r}-${v}T${k}:${V}`}catch(e){return console.warn("时间转换失败:",e),Ie()}},Jl=t=>{switch(t){case 1:return"success";case 0:return"info";case 2:return"warning";case 3:return"danger";default:return"info"}},Kl=t=>{switch(t){case 1:return"启用";case 0:return"停用";case 2:return"无权限";case 3:return"失败";default:return"未知"}},$=async(t=1)=>{if(N.value=!0,!I.value){m.warning("请先选择要查看的音乐监控"),N.value=!1,te.push("/music");return}try{const e={musicId:I.value,pageNum:t,pageSize:Be.value};if(be.value){const v=be.value.trim();/^\d+$/.test(v)?e.videoId=v:v.includes("douyin.com")||v.includes("iesdouyin.com")?e.videoUrl=v:e.authorName=v}le.value.length>0&&(e.tag=le.value),ae.value.length>0&&(e.channel=ae.value),oe.value==="manual"?e.type=1:oe.value==="auto"&&(e.joinCustomType=1),oe.value==="error"?e.status=0:oe.value==="all"&&(e.status=1);const n={diggCount:"digg_count",publishTime:"video_publish_time",createTime:"create_time"};if(e.sortBy=n[Fe.value]||"create_time",e.sortOrder=Me.value.toUpperCase(),J.value)if(ue.value&&de.value)e.startTime=ue.value,e.endTime=de.value;else{const v=new Date;v.setTime(v.getTime()-72*60*60*1e3),e.startTime=ke(v);const k=new Date;e.endTime=ke(k)}console.log("Monitor页面: 查询参数:",e);const r=await X.getMonitorList(e);if(console.log("Monitor页面: 监控列表API响应:",r),r.code===200){const v=r.data||{},k=v.list||[];console.log("Monitor页面: 新接口响应数据:",v),console.log("Monitor页面: 监控列表数据:",k),R.value=v.pageNum||1,xt.value=v.total||0;const V=k.map(y=>({monitorVideo:{id:y.monitorVideoId,awemeId:y.videoId,videoUrl:y.videoUrl,musicId:y.musicId,status:y.status,type:y.type,createTime:y.createTime,videoPublishTime:y.videoPublishTime,tag:y.searchTags,channel:y.searchChannel,remark:y.remark,totalInvestmentAmount:y.totalInvestmentAmount,joinCustomType:y.joinCustomType,latestHotspotAlertTime:y.latestHotspotAlertTime},videoInfo:{desc:y.videoDescription,authorId:y.authorId,topics:y.topicTags?JSON.parse(y.topicTags):[]},authorInfo:{nickname:y.authorName,followerCount:y.followerCount,authorId:y.authorId},latestStats:{diggCount:y.latestDiggCount,commentCount:y.latestCommentCount},hotspotAlerts:y.hotspotAlerts||[],backgroundColor:y.backgroundColor,authorLevel:y.authorLevel,channelType:y.channelType,userMonitor:{musicId:y.musicId}}));if(console.log("Monitor页面: 转换后的数据:",V),I.value&&!P.value)try{const y=await Il.getMusicById(I.value);y.code===200&&(P.value=y.data)}catch(y){console.warn("获取音乐信息失败:",y)}Tt.value=V,t===1&&(await pe(),await ye())}else m.error(r.message||"加载监控列表失败")}catch(e){console.error("Monitor页面: 加载监控列表失败:",e),m.error("加载监控列表失败")}finally{N.value=!1}},Ql=async()=>{var t,e,n,r;if(!L.value.videoUrl.trim()){m.warning("请输入视频链接或ID");return}if(!I.value){m.warning("请先选择要监控的音乐");return}St.value=!0;try{const v=await X.addMonitor({videoUrl:L.value.videoUrl.trim(),musicId:I.value});v.code===200?(m.success("添加监控成功"),xe.value=!1,L.value={videoUrl:"",file:null},await $(),await pe(),await ye()):(t=v.message)!=null&&t.includes("音乐ID不能为空，音乐为必选项")?m.error("音乐为必选项，请先选择音乐"):(e=v.message)!=null&&e.includes("指定的音乐不存在，请选择有效的音乐")?m.error("所选音乐不存在，请重新选择"):(n=v.message)!=null&&n.includes("视频链接不能为空")?m.error("请输入视频链接"):(r=v.message)!=null&&r.includes("添加失败，可能是链接格式错误或已存在")?m.error("视频链接格式错误或该视频已在监控中"):m.error(v.message||"添加监控失败")}catch{m.error("添加监控失败")}finally{St.value=!1}},Zt=()=>{if(L.value={videoUrl:"",file:null},et.value)try{et.value.clearFiles()}catch(t){console.warn("清理上传组件失败:",t)}},Xl=()=>{const t=document.createElement("a");t.href="/监控视频模板.xlsx",t.download="监控视频模板.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t)},et=f(),Zl=t=>{var r,v;if(console.log("文件选择:",t),!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv","application/csv"].includes(t.raw.type)&&!t.name.endsWith(".csv")){m.error("请选择 .xlsx、.xls 或 .csv 格式的文件");try{(r=et.value)==null||r.clearFiles()}catch(k){console.warn("清理上传文件失败:",k)}L.value.file=null;return}const n=10*1024*1024;if(t.raw.size>n){m.error("文件大小不能超过 10MB");try{(v=et.value)==null||v.clearFiles()}catch(k){console.warn("清理上传文件失败:",k)}L.value.file=null;return}L.value.file=t.raw},ea=()=>{console.log("文件移除"),L.value.file=null},ta=async()=>{var t,e,n,r,v;if(!I.value){m.warning("请先选择要监控的音乐");return}if(!L.value.file){m.warning("请选择要上传的Excel文件");return}if(!L.value.file.name){m.error("文件信息不完整，请重新选择文件"),L.value.file=null;return}Vt.value=!0;try{const k=new FormData;k.append("file",L.value.file),k.append("musicId",I.value.toString()),console.log("开始上传Excel文件:",{fileName:L.value.file.name,fileSize:L.value.file.size,musicId:I.value});const V=await X.uploadExcelAsync(k);if(V.code===200){const{taskId:y,message:tt}=V.data;m.success("文件上传成功，正在后台处理中...");const S=((t=L.value.file)==null?void 0:t.name)||"未知文件";xe.value=!1,Zt(),la(y,S)}else{let y=V.message||"Excel上传失败";(e=V.message)!=null&&e.includes("请选择要上传的Excel文件")?y="请选择要上传的Excel文件":(n=V.message)!=null&&n.includes("文件格式不正确，请上传Excel文件(.xlsx或.xls)")?y="文件格式不正确，请上传Excel文件(.xlsx或.xls)":(r=V.message)!=null&&r.includes("音乐ID不能为空，音乐为必选项")?y="音乐为必选项，请先选择音乐":(v=V.message)!=null&&v.includes("指定的音乐不存在，请选择有效的音乐")&&(y="所选音乐不存在，请重新选择音乐"),m.error(y)}}catch(k){console.error("Excel上传失败:",k),m.error("Excel上传失败，请检查网络连接后重试")}finally{Vt.value=!1}},la=(t,e)=>{M.value={id:t,fileName:e,status:"PENDING",progress:0,totalCount:0,processedCount:0,successCount:0,skipCount:0,errorCount:0},lt.value=!0,aa()},aa=()=>{re.value&&clearInterval(re.value),re.value=setInterval(async()=>{try{const t=await X.getTaskProgress(M.value.id);if(t.code===200){const e=t.data;M.value={...M.value,...e},(e.status==="COMPLETED"||e.status==="FAILED")&&(clearInterval(re.value),re.value=null,e.status==="COMPLETED"&&(await $(),await pe(),await ye()))}}catch(t){console.error("查询任务进度失败:",t)}},2e3)},el=()=>{re.value&&(clearInterval(re.value),re.value=null),lt.value=!1},sa=t=>{switch(t){case"PENDING":return"等待处理";case"PROCESSING":return"处理中";case"COMPLETED":return"已完成";case"FAILED":return"处理失败";default:return"未知状态"}},oa=t=>{switch(t){case"PENDING":return"info";case"PROCESSING":return"warning";case"COMPLETED":return"success";case"FAILED":return"danger";default:return"info"}},na=t=>{t?(je.value=t,at.value=!0,fa()):m.warning("视频ID无效")},ra=async t=>{var v;const n=((v=t.monitorVideo)==null?void 0:v.status)===1?0:1,r=n===1?"启用":"停用";try{await Ee.confirm(`确认${r}该监控视频？`,"提示",{type:"warning"});const k=await X.updateStatus(t.monitorVideo.id,{status:n});k.code===200?(await $(),await pe(),await ye(),m.success(`${r}成功`)):m.error(k.message||`${r}失败`)}catch(k){k!=="cancel"&&m.error(`${r}失败`)}},ia=async t=>{try{await Ee.confirm("确认删除该监控视频？删除后无法恢复","警告",{type:"warning",confirmButtonText:"确认删除",cancelButtonText:"取消"});const e=await X.deleteMonitor(t.monitorVideo.id);e.code===200?(await $(),await pe(),await ye(),m.success("删除成功")):m.error(e.message||"删除失败")}catch(e){e!=="cancel"&&m.error("删除失败")}},ua=t=>{ie.value=t},tl=async t=>{const e=t===1?"启用":"停用";try{await Ee.confirm(`确认批量${e}选中的 ${ie.value.length} 个监控项？`,"提示",{type:"warning"});const n=ie.value.map(r=>X.updateStatus(r.monitorVideo.id,{status:t}));await Promise.all(n),await $(),await pe(),await ye(),$e.value=!1,ie.value=[],m.success(`批量${e}成功`)}catch(n){n!=="cancel"&&m.error(`批量${e}失败`)}},da=async()=>{try{await Ee.confirm(`确认批量删除选中的 ${ie.value.length} 个监控项？删除后无法恢复`,"警告",{type:"warning",confirmButtonText:"确认删除",cancelButtonText:"取消"});const t=ie.value.map(e=>X.deleteMonitor(e.monitorVideo.id));await Promise.all(t),await $(),await pe(),await ye(),$e.value=!1,ie.value=[],m.success("批量删除成功")}catch(t){t!=="cancel"&&m.error("批量删除失败")}},ca=async t=>{var e;if(t==="updateEmail"){Ye.value.email=((e=q.user)==null?void 0:e.email)||"",He.value=!0;return}if(t==="logout")try{await Ee.confirm("确认退出登录？","提示",{type:"warning"}),await q.logout(),te.push("/login")}catch{}},va=t=>/^[\w.!#$%&'*+/=?^`{|}~-]+@[\w-]+(\.[\w-]+)+$/.test(t),ma=async()=>{const t=(Ye.value.email||"").trim();if(!t){m.warning("请输入邮箱地址");return}if(!va(t)){m.warning("邮箱格式不正确");return}Dt.value=!0;try{const e=await ps.updateEmail({email:t});e.code===200?(q.setUser({...q.user||{},email:t}),m.success("邮箱更新成功"),He.value=!1):m.error(e.message||"邮箱更新失败")}catch{m.error("邮箱更新失败，请稍后重试")}finally{Dt.value=!1}},_t=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",ht=t=>{if(!t)return Date.now();try{const e=t.split(" ");if(e.length===3){const n=e[0],r=e[1]+" "+e[2],v=`${n}-${r}`;return new Date(v).getTime()}return new Date(t).getTime()}catch(e){return console.error("时间解析失败:",t,e),Date.now()}},Ce=t=>{B.value[t]=!B.value[t],Object.values(B.value).every(n=>!n)&&(B.value[t]=!0),nt.value&&al(nt.value)},pa=async()=>{try{const t=await Al.getLatestVideoStats(je.value);t.code===200&&(De.value=t.data)}catch(t){console.error("加载最新统计失败:",t)}},ll=async()=>{try{const t=await Al.getVideoStatsChart(je.value,ot.value);t.code===200&&(nt.value=t.data,al(t.data))}catch{m.error("加载图表数据失败")}},al=t=>{if(!t||!t.timestamps){Ge.value=null;return}const e=[];B.value.likes&&e.push({name:"点赞数",type:"line",data:(t.diggCounts||[]).map((n,r)=>[ht(t.timestamps[r]),n]),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3,color:"#ff6b9d"},itemStyle:{color:"#ff6b9d"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(255, 107, 157, 0.3)"},{offset:1,color:"rgba(255, 107, 157, 0.05)"}]}}}),B.value.comments&&e.push({name:"评论数",type:"line",data:(t.commentCounts||[]).map((n,r)=>[ht(t.timestamps[r]),n]),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3,color:"#4ecdc4"},itemStyle:{color:"#4ecdc4"}}),B.value.collects&&e.push({name:"收藏数",type:"line",data:(t.collectCounts||[]).map((n,r)=>[ht(t.timestamps[r]),n]),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3,color:"#45b7d1"},itemStyle:{color:"#45b7d1"}}),B.value.shares&&e.push({name:"分享数",type:"line",data:(t.shareCounts||[]).map((n,r)=>[ht(t.timestamps[r]),n]),smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3,color:"#f9ca24"},itemStyle:{color:"#f9ca24"}}),Ge.value={tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(50, 50, 50, 0.95)",borderColor:"transparent",textStyle:{color:"#fff"}},grid:{left:"2%",right:"2%",bottom:"8%",top:"5%",containLabel:!0},xAxis:{type:"time",axisLine:{lineStyle:{color:"#e6e8eb"}},axisLabel:{color:"#6b7280",formatter:n=>{const r=new Date(n),v=(r.getMonth()+1).toString().padStart(2,"0"),k=r.getDate().toString().padStart(2,"0"),V=r.getHours().toString().padStart(2,"0");return`${v}-${k} ${V}:00`}},splitLine:{show:!1}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#e6e8eb"}},axisLabel:{color:"#6b7280",formatter:n=>n>=1e4?(n/1e4).toFixed(1)+"w":n},splitLine:{lineStyle:{color:"#f1f3f4",type:"dashed"}}},series:e}},fa=async()=>{st.value=!0;try{await Promise.all([pa(),ll()])}finally{st.value=!1}},ga=()=>{at.value=!1,je.value=null,De.value=null,Ge.value=null,nt.value=null,ot.value="7",B.value={likes:!0,comments:!0,collects:!0,shares:!0}},sl=t=>t?t>=1e4?(t/1e4).toFixed(1)+"w":t.toString():"0",_a=t=>{switch(t){case 1:return"info";case 2:return"success";case 3:return"warning";default:return"info"}},ha=t=>{switch(t){case 1:return"普通";case 2:return"优质";case 3:return"顶级";default:return"未知"}},ya=async t=>{it.value=!0;try{const e=await Ps.getAuthorInfo(t);e.success||e.code===200?(T.value={id:e.data.id,userId:e.data.userId,nickname:e.data.nickname,authorAvatar:e.data.authorAvatar,userDesc:e.data.userDesc,userUrl:e.data.userUrl,followerCount:e.data.followerCount,totalFavorited:e.data.totalFavorited},await ol(T.value.id)):(m.error(e.message||"获取播主信息失败"),T.value=null,K.value=!1,U.value=null)}catch(e){console.error("获取播主信息失败:",e),m.error("获取播主信息失败"),T.value=null,K.value=!1,U.value=null}finally{it.value=!1}},wa=()=>{rt.value=!1,T.value=null,K.value=!1,U.value=null},ol=async t=>{var e;if((e=q.user)!=null&&e.id)try{const n=await Oe.checkFavoriteStatus(t);if(n.success)if(K.value=n.isFavorite||!1,K.value)try{const r=await Oe.getFavoriteList(1,100,{});if(r.success){const k=(Array.isArray(r.data.list)?r.data.list:[]).find(V=>V.authorId===t);k?U.value={channelType:k.channelType,authorLevel:k.authorLevel,backgroundColor:k.backgroundColor,remark:k.remark}:U.value=null}}catch(r){console.error("获取收藏信息失败:",r),U.value=null}else U.value=null}catch(n){console.error("检查收藏状态失败:",n),K.value=!1,U.value=null}},ka=async()=>{var t,e;if(!((t=T.value)!=null&&t.userId)||!((e=q.user)!=null&&e.id)){m.error("用户或播主信息不完整");return}if(K.value){ze.value=!0;try{if(!T.value.id){m.error("播主ID不完整，无法取消收藏");return}const n=await Oe.removeFavorite(T.value.id);n.success?(K.value=!1,m.success("取消收藏成功")):m.error(n.message||"取消收藏失败")}catch(n){console.error("取消收藏失败:",n),m.error("取消收藏失败，请稍后重试")}finally{ze.value=!1}}else Ca()},Ca=()=>{var t,e,n;Y.value={channelType:((t=T.value)==null?void 0:t.channelType)||"",authorLevel:((e=T.value)==null?void 0:e.authorLevel)||1,backgroundColor:((n=T.value)==null?void 0:n.backgroundColor)||"",remark:""},Ke.value=!0},nl=()=>{Ke.value=!1,Y.value={channelType:"",authorLevel:1,backgroundColor:"",remark:""}},rl=()=>{We.value=!1,Je.value=null,H.value={channelType:"",authorLevel:1,backgroundColor:"",remark:""}},ba=async()=>{var t,e;if(It.value){try{await It.value.validate()}catch{return}if(!((t=Je.value)!=null&&t.id)){m.error("播主信息不完整");return}At.value=!0;try{const n={id:Je.value.id,...H.value};Object.keys(n).forEach(v=>{(n[v]===""||n[v]===null||n[v]===void 0)&&delete n[v]});const r=await Oe.updateFavoriteConfig(n);r.success?(We.value=!1,m.success("收藏配置更新成功"),rl(),(e=T.value)!=null&&e.userId&&await ol(T.value.id)):m.error(r.message||"收藏配置更新失败")}catch(n){console.error("更新收藏配置失败:",n),m.error("更新收藏配置失败，请稍后重试")}finally{At.value=!1}}},Sa=async()=>{var t,e;if(Et.value){try{await Et.value.validate()}catch{return}if(!((t=T.value)!=null&&t.id)||!((e=q.user)!=null&&e.id)){m.error("用户或播主信息不完整");return}ze.value=!0;try{const n={authorId:T.value.id,...Y.value};Object.keys(n).forEach(v=>{(n[v]===""||n[v]===null||n[v]===void 0)&&delete n[v]});const r=await Oe.addFavoriteWithSettings(n);r.success?(K.value=!0,Ke.value=!1,m.success("收藏成功"),nl()):m.error(r.message||"收藏失败")}catch(n){console.error("收藏操作失败:",n),m.error("收藏失败，请稍后重试")}finally{ze.value=!1}}},Ta=async t=>{var n,r;j.value=t,ut.value=!0,G.value={description:((n=t.monitorVideo)==null?void 0:n.remark)||"",amounts:[]};const e=(r=t.monitorVideo)==null?void 0:r.awemeId;if(e){dt.value=!0;try{console.log("加载投资记录，视频ID:",e);const v=await X.getVideoInvestments(e);if(v.code===200&&v.data&&v.data.length>0){const k=v.data.map(V=>({id:V.id,amount:V.amount,investmentTime:V.investmentTime?Wl(V.investmentTime):Ie()}));G.value.amounts=k,console.log("成功加载投资记录:",k)}else console.log("该视频暂无投资记录")}catch(v){console.warn("加载投资记录失败:",v)}finally{dt.value=!1}}},Lt=()=>{ut.value=!1,j.value=null,dt.value=!1,G.value={description:"",amounts:[{id:null,amount:null,investmentTime:Ie()}]}},xa=()=>{G.value.amounts.push({id:null,amount:null,investmentTime:Ie()})},Va=()=>{G.value.amounts=[{id:null,amount:null,investmentTime:Ie()}]},Da=t=>{G.value.amounts.splice(t,1)},Ia=async()=>{var n,r,v,k,V,y,tt;if(!((r=(n=j.value)==null?void 0:n.monitorVideo)!=null&&r.id)){m.error("监控视频ID无效");return}const t=G.value.amounts.some(S=>S.amount&&S.amount>0&&S.investmentTime),e=G.value.description&&G.value.description.trim();!t&&!e&&console.log("用户选择加入自选，但未填写备注或投资记录"),Ue.value=!0;try{const S={monitorVideoId:j.value.monitorVideo.id,joinCustomType:1,description:((v=G.value.description)==null?void 0:v.trim())||"",investmentAmounts:G.value.amounts.filter(g=>g.amount&&g.amount>0&&g.investmentTime).map(g=>({id:g.id,amount:parseFloat(g.amount),investmentTime:g.investmentTime+":00"}))},w=await X.updateCustomSelection(S);if(w.code===200){const g=((V=(k=j.value)==null?void 0:k.monitorVideo)==null?void 0:V.joinCustomType)===1;m.success(g?"更新自选成功":"加入自选成功"),Lt(),await $(R.value)}else{const g=((tt=(y=j.value)==null?void 0:y.monitorVideo)==null?void 0:tt.joinCustomType)===1;m.error(w.message||(g?"更新自选失败":"加入自选失败"))}}catch(S){console.error("加入自选失败:",S),m.error("网络错误，请重试")}finally{Ue.value=!1}},Aa=async()=>{var t,e;if(!((e=(t=j.value)==null?void 0:t.monitorVideo)!=null&&e.id)){m.error("监控视频ID无效");return}try{await Ee.confirm("确定要取消该视频的自选状态吗？","确认取消",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),Ue.value=!0;const n={monitorVideoId:j.value.monitorVideo.id,joinCustomType:0,description:"",investmentAmounts:[]},r=await X.updateCustomSelection(n);r.code===200?(m.success("取消自选成功"),Lt(),await $(R.value)):m.error(r.message||"取消自选失败")}catch(n){n!=="cancel"&&(console.error("取消自选失败:",n),m.error("网络错误，请重试"))}finally{Ue.value=!1}},il=()=>{if(b.query.from==="hotspot"){const t={};I.value&&(t.musicId=I.value),te.push({path:"/hotspot",query:t})}else te.push("/music")},Ea=t=>{var n,r;const e=((n=t==null?void 0:t.videoInfo)==null?void 0:n.authorId)||((r=t==null?void 0:t.authorInfo)==null?void 0:r.authorId);e?(rt.value=!0,ya(e)):m.warning("无法获取播主ID")},Fa=async()=>{var t;if(!((t=T.value)!=null&&t.userId)){m.warning("播主信息不完整，无法编辑");return}try{const e=await Oe.getFavoriteList(1,100,{});if(e.success){const r=(Array.isArray(e.data.list)?e.data.list:[]).find(v=>v.authorUserId===T.value.userId);r?(Je.value=r,H.value={channelType:r.channelType||"",authorLevel:r.authorLevel||1,backgroundColor:r.backgroundColor||"",remark:r.remark||""},We.value=!0):m.warning("未找到收藏信息，无法编辑")}}catch(e){console.error("获取收藏信息失败:",e),m.error("获取收藏信息失败")}};return Oa(async()=>{if(b.query.musicId){I.value=parseInt(b.query.musicId);try{const t=await Il.getMusicById(I.value);(t==null?void 0:t.code)===200&&(P.value=t.data)}catch(t){console.warn("获取音乐信息失败:",t)}await pe(),await ye()}if(b.query.searchKeyword&&(be.value=b.query.searchKeyword),b.query.selectedSearchTags)try{le.value=JSON.parse(b.query.selectedSearchTags)}catch(t){console.warn("解析selectedSearchTags失败:",t)}if(b.query.selectedSearchChannels)try{ae.value=JSON.parse(b.query.selectedSearchChannels)}catch(t){console.warn("解析selectedSearchChannels失败:",t)}if(b.query.currentFilter&&(oe.value=b.query.currentFilter),b.query.sortField&&(Fe.value=b.query.sortField),b.query.sortOrder&&(Me.value=b.query.sortOrder),b.query.currentPage&&(R.value=parseInt(b.query.currentPage)),b.query.pageSize&&(Be.value=parseInt(b.query.pageSize)),b.query.showHotspotFilter&&(J.value=b.query.showHotspotFilter==="true"),b.query.startTime){ue.value=b.query.startTime;try{const t=new Date(ue.value);_e.value=t.toISOString().split("T")[0]}catch(t){console.warn("解析开始时间失败:",t)}}if(b.query.endTime){de.value=b.query.endTime;try{const t=new Date(de.value);he.value=t.toISOString().split("T")[0]}catch(t){console.warn("解析结束时间失败:",t)}}await $(R.value)}),qa(()=>{re.value&&(clearInterval(re.value),re.value=null)}),(t,e)=>{var fl,gl,_l;const n=Ba,r=Ha,v=fs,k=gs,V=Ya,y=_s,tt=ja,S=hs,w=Ga,g=ys,Ae=Wa,Nt=Ja,ge=Ka,ne=ws,Pt=ks,D=Cs,ul=bs,dl=Ss,Ma=Ts,cl=Qa,vl=xs,Rt=Vs,O=Ds,ml=Is,$a=As,yt=Es,ce=Xa,za=Fs,Ne=Ms,pl=$s,Pe=zs,Ua=Us,Ot=Ls;return u(),p("div",Gs,[l("header",Ws,[e[61]||(e[61]=l("div",{class:"header-left"},[l("h1",{class:"system-title"},"抖音短视频分析系统")],-1)),l("div",Js,[l("div",Ks,[a(n,{size:32,class:"user-avatar"},{default:o(()=>{var s,d;return[c(i((d=(s=_(q).user)==null?void 0:s.username)==null?void 0:d.charAt(0)),1)]}),_:1}),l("span",Qs,i((fl=_(q).user)==null?void 0:fl.username),1),a(V,{onCommand:ca,class:"user-dropdown"},{dropdown:o(()=>[a(k,null,{default:o(()=>[a(v,{command:"updateEmail"},{default:o(()=>e[59]||(e[59]=[c("更新邮箱",-1)])),_:1,__:[59]}),a(v,{command:"logout"},{default:o(()=>e[60]||(e[60]=[c("退出登录",-1)])),_:1,__:[60]})]),_:1})]),default:o(()=>[a(r,{class:"dropdown-icon"},{default:o(()=>[a(_(Za))]),_:1})]),_:1})])])]),l("div",Xs,[l("nav",Zs,[a(tt,{"default-active":t.$route.path,router:"",class:"sidebar-menu"},{default:o(()=>[a(y,{index:"/music",class:"menu-item"},{default:o(()=>[a(r,null,{default:o(()=>[a(_(es))]),_:1}),e[62]||(e[62]=l("span",null,"音乐管理",-1))]),_:1,__:[62]}),a(y,{index:"/favorite-author",class:"menu-item"},{default:o(()=>[a(r,null,{default:o(()=>[a(_(qt))]),_:1}),e[63]||(e[63]=l("span",null,"收藏播主",-1))]),_:1,__:[63]})]),_:1},8,["default-active"])]),l("main",eo,[l("div",to,[I.value&&P.value?(u(),p("div",lo,[l("h2",ao,[c(i(P.value.title)+" ",1),l("span",so," · "+i(P.value.author),1)]),l("p",oo,[l("span",null,"专辑："+i(P.value.album||"-"),1),P.value.tagList&&_(wt)(P.value.tagList).length?(u(),p("span",no,[e[64]||(e[64]=c(" · 标签： ",-1)),(u(!0),p(W,null,ve(_(wt)(P.value.tagList),s=>(u(),C(S,{key:s,size:"small",class:"music-tag"},{default:o(()=>[c(i(s),1)]),_:2},1024))),128))])):h("",!0)])])):(u(),p(W,{key:1},[e[65]||(e[65]=l("h2",{class:"page-title"},"监控管理",-1)),e[66]||(e[66]=l("p",{class:"page-desc"},"管理您的抖音视频监控任务，实时掌握数据变化",-1))],64))]),I.value?(u(),p("div",ro,[l("div",{class:E(["stat-card total",{"is-active":oe.value==="all"&&!J.value}]),onClick:e[0]||(e[0]=s=>vt("all"))},[l("div",io,[a(r,{size:"20"},{default:o(()=>[a(_(ts))]),_:1})]),l("div",uo,[l("div",co,i(me.value.totalCount),1),e[67]||(e[67]=l("div",{class:"stat-label"},"当前监控视频",-1))])],2),l("div",{class:E(["stat-card hotspot",{"is-active":J.value}]),onClick:Ul},[l("div",vo,[a(r,{size:"20"},{default:o(()=>[a(_(ls))]),_:1})]),l("div",mo,[l("div",po,i(me.value.hotspotAlertCount||0),1),e[68]||(e[68]=l("div",{class:"stat-label"},"72H热度异动",-1))])],2),l("div",{class:E(["stat-card auto",{"is-active":oe.value==="auto"&&!J.value}]),onClick:e[1]||(e[1]=s=>vt("auto"))},[l("div",fo,[a(r,{size:"20",color:"#10b981"},{default:o(()=>[a(_(qt))]),_:1})]),l("div",go,[l("div",_o,i(me.value.autoCount),1),e[69]||(e[69]=l("div",{class:"stat-label"},"自选视频",-1))])],2),l("div",{class:E(["stat-card manual",{"is-active":oe.value==="manual"&&!J.value}]),onClick:e[2]||(e[2]=s=>vt("manual"))},[l("div",ho,[a(r,{size:"20"},{default:o(()=>[a(_(Cl))]),_:1})]),l("div",yo,[l("div",wo,i(me.value.manualCount),1),e[70]||(e[70]=l("div",{class:"stat-label"},"手动添加",-1))])],2),l("div",{class:E(["stat-card error",{"is-active":oe.value==="error"&&!J.value}]),onClick:e[3]||(e[3]=s=>vt("error"))},[l("div",ko,[a(r,{size:"20"},{default:o(()=>[a(_(as))]),_:1})]),l("div",Co,[l("div",bo,i(me.value.abnormalCount),1),e[71]||(e[71]=l("div",{class:"stat-label"},"异常监控",-1))])],2)])):h("",!0),I.value?(u(),p("div",So)):h("",!0),I.value?(u(),p("div",To,[J.value?(u(),p("div",xo,[l("div",Vo,[l("div",Do,[I.value?(u(),C(w,{key:0,onClick:il,icon:_(bl)},{default:o(()=>[c(i(_(b).query.from==="hotspot"?"返回热度提醒":"返回音乐管理"),1)]),_:1},8,["icon"])):h("",!0),a(w,{type:"primary",onClick:e[4]||(e[4]=s=>xe.value=!0),icon:_(kt)},{default:o(()=>e[72]||(e[72]=[c(" 添加监控 ",-1)])),_:1,__:[72]},8,["icon"]),a(w,{onClick:e[5]||(e[5]=()=>$()),loading:N.value,icon:_(Sl)},{default:o(()=>e[73]||(e[73]=[c(" 刷新 ",-1)])),_:1,__:[73]},8,["loading","icon"])]),l("div",Io,[l("div",Ao,[a(Ae,{modelValue:Fe.value,"onUpdate:modelValue":e[6]||(e[6]=s=>Fe.value=s),placeholder:"排序方式",style:{width:"120px"},onChange:ct},{default:o(()=>[a(g,{label:"按点赞数",value:"diggCount"}),a(g,{label:"按发布时间",value:"publishTime"}),a(g,{label:"按创建时间",value:"createTime"})]),_:1},8,["modelValue"]),a(Ae,{modelValue:Me.value,"onUpdate:modelValue":e[7]||(e[7]=s=>Me.value=s),placeholder:"排序顺序",style:{width:"90px"},onChange:ct},{default:o(()=>[a(g,{label:"降序",value:"desc"}),a(g,{label:"升序",value:"asc"})]),_:1},8,["modelValue"]),a(Nt,{modelValue:_e.value,"onUpdate:modelValue":e[8]||(e[8]=s=>_e.value=s),type:"date",placeholder:"开始日期",style:{width:"140px"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:Yt},null,8,["modelValue"]),e[75]||(e[75]=l("span",{class:"time-separator"},"至",-1)),a(Nt,{modelValue:he.value,"onUpdate:modelValue":e[9]||(e[9]=s=>he.value=s),type:"date",placeholder:"结束日期",style:{width:"140px"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:Yt},null,8,["modelValue"]),a(ge,{modelValue:be.value,"onUpdate:modelValue":e[10]||(e[10]=s=>be.value=s),placeholder:"搜索视频ID、链接或播主名称","prefix-icon":_(Ct),style:{width:"250px"},clearable:"",onKeyup:kl(Le,["enter"]),onClear:Le},null,8,["modelValue","prefix-icon"]),a(w,{onClick:Le,icon:_(Ct),type:"primary"},{default:o(()=>e[74]||(e[74]=[c("搜索",-1)])),_:1,__:[74]},8,["icon"])])])])])):(u(),p("div",Eo,[l("div",Fo,[l("div",Mo,[I.value?(u(),C(w,{key:0,onClick:il,icon:_(bl)},{default:o(()=>[c(i(_(b).query.from==="hotspot"?"返回热度提醒":"返回音乐管理"),1)]),_:1},8,["icon"])):h("",!0),a(w,{type:"primary",onClick:e[11]||(e[11]=s=>xe.value=!0),icon:_(kt)},{default:o(()=>e[76]||(e[76]=[c(" 添加监控 ",-1)])),_:1,__:[76]},8,["icon"]),a(w,{onClick:e[12]||(e[12]=()=>$()),loading:N.value,icon:_(Sl)},{default:o(()=>e[77]||(e[77]=[c(" 刷新 ",-1)])),_:1,__:[77]},8,["loading","icon"])]),l("div",$o,[l("div",zo,[a(Ae,{modelValue:Fe.value,"onUpdate:modelValue":e[13]||(e[13]=s=>Fe.value=s),placeholder:"排序方式",style:{width:"120px"},onChange:ct},{default:o(()=>[a(g,{label:"按点赞数",value:"diggCount"}),a(g,{label:"按发布时间",value:"publishTime"}),a(g,{label:"按创建时间",value:"createTime"})]),_:1},8,["modelValue"]),a(Ae,{modelValue:Me.value,"onUpdate:modelValue":e[14]||(e[14]=s=>Me.value=s),placeholder:"排序顺序",style:{width:"90px"},onChange:ct},{default:o(()=>[a(g,{label:"降序",value:"desc"}),a(g,{label:"升序",value:"asc"})]),_:1},8,["modelValue"]),a(ge,{modelValue:be.value,"onUpdate:modelValue":e[15]||(e[15]=s=>be.value=s),placeholder:"搜索视频ID、链接或播主名称","prefix-icon":_(Ct),style:{width:"250px"},clearable:"",onKeyup:kl(Le,["enter"]),onClear:Le},null,8,["modelValue","prefix-icon"]),a(w,{onClick:Le,icon:_(Ct),type:"primary"},{default:o(()=>e[78]||(e[78]=[c("搜索",-1)])),_:1,__:[78]},8,["icon"])])])])]))])):h("",!0),Se.value.length>0||Te.value.length>0?(u(),p("div",Uo,[l("div",Lo,[l("div",No,[Se.value.length>0?(u(),p("div",Po,[e[79]||(e[79]=l("span",{class:"filter-group-title"},"搜索标签：",-1)),(u(!0),p(W,null,ve(Se.value,s=>(u(),C(S,{key:`tag-${s.tagName}`,size:"large",type:le.value.includes(s.tagName)?"primary":"info",effect:le.value.includes(s.tagName)?"dark":"light",class:"filter-tag",onClick:d=>Ll(s.tagName)},{default:o(()=>[c(i(s.tagName)+" ",1),l("span",Ro," ("+i(s.videoCount)+") ",1)]),_:2},1032,["type","effect","onClick"]))),128))])):h("",!0),Te.value.length>0?(u(),p("div",Oo,[e[80]||(e[80]=l("span",{class:"filter-group-title"},"搜索类型：",-1)),(u(!0),p(W,null,ve(Te.value,s=>(u(),C(S,{key:`channel-${s.channelName}`,size:"large",type:ae.value.includes(s.channelName)?"warning":"info",effect:ae.value.includes(s.channelName)?"dark":"light",class:"filter-tag",onClick:d=>Nl(s.channelName)},{default:o(()=>[c(i(s.channelName)+" ",1),l("span",qo," ("+i(s.videoCount)+") ",1)]),_:2},1032,["type","effect","onClick"]))),128))])):h("",!0)]),le.value.length>0||ae.value.length>0?(u(),C(w,{key:0,type:"text",size:"small",onClick:Ol,class:"clear-tags-btn"},{default:o(()=>[c(" 清除所有 ("+i(le.value.length+ae.value.length)+") ",1)]),_:1})):h("",!0)])])):h("",!0),a(cl,{class:"monitor-table-card"},{header:o(()=>[l("div",Bo,[e[81]||(e[81]=l("span",{class:"card-title"},"监控列表",-1)),l("div",Ho,[a(ne,{content:"批量操作",placement:"top"},{default:o(()=>[a(w,{disabled:ie.value.length===0,onClick:e[16]||(e[16]=s=>$e.value=!0),size:"small"},{default:o(()=>[c(" 批量操作 ("+i(ie.value.length)+") ",1)]),_:1},8,["disabled"])]),_:1})])])]),default:o(()=>[I.value?Bt((u(),p("div",jo,[a(ul,{data:Tt.value,style:{width:"100%"},onSelectionChange:ua,"empty-text":Tt.value.length===0?"暂无监控数据":"",size:"default","cell-style":{padding:"3px 3px"},"header-cell-style":{padding:"8px 6px",background:"#fafafa"},"expand-row-keys":El.value,"row-key":"monitorVideo.id"},{default:o(()=>[a(D,{type:"selection",width:"50"}),J.value?(u(),C(D,{key:0,type:"expand",width:"50"},{default:o(({row:s})=>[l("div",Go,[a(ul,{data:mt(s),size:"small",class:"expand-table",stripe:""},{default:o(()=>[a(D,{label:"检测时间",width:"160",align:"center"},{default:o(({row:d})=>[l("span",Wo,i($t(d.detectionTime)),1)]),_:1}),a(D,{label:"提醒级别",width:"110",align:"center"},{default:o(({row:d})=>[a(S,{type:Gt(d.alertLevel),size:"small"},{default:o(()=>[c(i(Wt(d.alertLevel)),1)]),_:2},1032,["type"])]),_:1}),a(D,{label:"时间窗口",width:"110",align:"center"},{default:o(({row:d})=>[a(S,{type:Jt(d.timeWindow),size:"small"},{default:o(()=>[c(i(Kt(d.timeWindow)),1)]),_:2},1032,["type"])]),_:1}),a(D,{label:"触发指标",width:"110",align:"center"},{default:o(({row:d})=>[a(S,{size:"small",type:"info"},{default:o(()=>[c(i(Qt(d.triggerMetric)),1)]),_:2},1024)]),_:1}),a(D,{label:"触发评分",width:"100",align:"center"},{default:o(({row:d})=>[l("span",{class:E([Ft(d.triggerScore,d.timeWindow),"score-text"])},i(Mt(d.triggerScore)),3)]),_:1}),a(D,{label:"点赞增长",width:"110",align:"center"},{default:o(({row:d})=>[l("div",Jo,[l("div",Ko,"+"+i(we(d.diggGrowthRate))+"%",1),l("div",Qo,"+"+i(Z(pt(d.currentDiggCount,d.baselineDiggCount))),1)])]),_:1}),a(D,{label:"评论增长",width:"110",align:"center"},{default:o(({row:d})=>[l("div",Xo,[l("div",Zo,"+"+i(we(d.commentGrowthRate))+"%",1),l("div",en,"+"+i(Z(pt(d.currentCommentCount,d.baselineCommentCount))),1)])]),_:1}),a(D,{label:"收藏增长",width:"110",align:"center"},{default:o(({row:d})=>[l("div",tn,[l("div",ln,"+"+i(we(d.collectGrowthRate))+"%",1),l("div",an,"+"+i(Z(pt(d.currentCollectCount,d.baselineCollectCount))),1)])]),_:1}),a(D,{label:"分享增长",width:"110",align:"center"},{default:o(({row:d})=>[l("div",sn,[l("div",on,"+"+i(we(d.shareGrowthRate))+"%",1),l("div",nn,"+"+i(Z(pt(d.currentShareCount,d.baselineShareCount))),1)])]),_:1}),a(D,{label:"操作",width:"100",align:"center",fixed:"right"},{default:o(({row:d})=>[l("div",rn,[a(ne,{content:"查看详情",placement:"top"},{default:o(()=>[a(w,{size:"small",type:"primary",link:"",icon:_(ss),onClick:F=>Bl(d)},null,8,["icon","onClick"])]),_:2},1024),a(ne,{content:"删除",placement:"top"},{default:o(()=>[a(w,{size:"small",type:"danger",link:"",icon:_(Ht),onClick:F=>Yl(d)},null,8,["icon","onClick"])]),_:2},1024)])]),_:1})]),_:2},1032,["data"])])]),_:1})):h("",!0),a(D,{width:"23",align:"center","show-overflow-tooltip":!1},{default:o(({row:s})=>{var d;return[l("div",un,[((d=s.monitorVideo)==null?void 0:d.joinCustomType)===1?(u(),C(r,{key:0,class:"custom-video-icon",size:"16"},{default:o(()=>[a(_(os))]),_:1})):h("",!0)])]}),_:1}),a(D,{label:"视频ID",width:"120"},{default:o(({row:s})=>{var d,F,ee,se,Re,hl;return[l("div",dn,[l("div",{class:E(["video-id-container",{"hotspot-video-container":Ut(s)}])},[(d=s.monitorVideo)!=null&&d.awemeId||(F=s.monitorVideo)!=null&&F.id||s.awemeId?(u(),C(dl,{key:0,href:`https://www.douyin.com/video/${((ee=s.monitorVideo)==null?void 0:ee.awemeId)||((se=s.monitorVideo)==null?void 0:se.id)||s.awemeId}`,target:"_blank",type:"primary",class:E(["video-id-link",{"hotspot-video-id":Ut(s)}])},{default:o(()=>{var yl,wl;return[c(i(Xt(((yl=s.monitorVideo)==null?void 0:yl.awemeId)||((wl=s.monitorVideo)==null?void 0:wl.id)||s.awemeId)),1)]}),_:2},1032,["href","class"])):(u(),p("span",{key:1,class:E(["video-id-text",{"hotspot-video-id":Ut(s)}])},i(Xt(((Re=s.monitorVideo)==null?void 0:Re.awemeId)||((hl=s.monitorVideo)==null?void 0:hl.id)||s.awemeId)),3))],2)]),h("",!0)]}),_:1}),a(D,{label:"视频描述",width:"185"},{default:o(({row:s})=>[l("div",cn,[gt(s)?(u(),C(ne,{key:0,content:gt(s),placement:"top","show-after":500},{default:o(()=>[l("span",vn,i(gt(s)),1)]),_:2},1032,["content"])):(u(),p("span",mn,"无描述"))])]),_:1}),a(D,{label:"播主名称",width:"130"},{default:o(({row:s})=>{var d,F,ee;return[l("div",{class:"author-name",style:qe({backgroundColor:s.backgroundColor||"transparent",padding:"4px 6px",borderRadius:"6px",display:"block",width:"fit-content",maxWidth:"100%",transition:"all 0.3s ease"}),onMouseenter:e[18]||(e[18]=se=>se.target.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"),onMouseleave:e[19]||(e[19]=se=>se.target.style.boxShadow="none")},[l("span",{class:"author-nickname-link",style:{color:"#409eff",cursor:"pointer",fontWeight:"600",fontSize:"12px",textDecoration:"none"},onClick:ns(se=>Ea(s),["stop"])},i(((d=s.authorInfo)==null?void 0:d.nickname)||s.authorName||((F=s.videoInfo)==null?void 0:F.authorId)||"N/A"),9,pn),(ee=s.authorInfo)!=null&&ee.followerCount?(u(),C(S,{key:0,size:"small",type:"info",class:"author-followers-tag"},{default:o(()=>[c(" 粉丝 "+i(jl(s.authorInfo.followerCount)),1)]),_:2},1024)):h("",!0)],36)]}),_:1}),a(D,{label:"话题标签",width:"200"},{default:o(({row:s})=>[Ze(s).length>0?(u(),p("div",fn,[(u(!0),p(W,null,ve(Ze(s).slice(0,5),d=>(u(),C(S,{key:d,size:"small",type:"info",class:"hashtag-tag"},{default:o(()=>[c(i(d),1)]),_:2},1024))),128)),Ze(s).length>5?(u(),C(ne,{key:0,content:Ze(s).slice(5).join("、"),placement:"top"},{default:o(()=>[a(S,{size:"small",type:"info",class:"hashtag-more"},{default:o(()=>[c(" +"+i(Ze(s).length-5),1)]),_:2},1024)]),_:2},1032,["content"])):h("",!0)])):(u(),p("span",gn,"无话题标签"))]),_:1}),J.value?(u(),p(W,{key:1},[a(D,{label:"提醒统计",width:"180",align:"center"},{default:o(({row:s})=>[l("div",_n,[l("div",hn,"共 "+i(fe(s).total)+" 条提醒",1),l("div",yn,[fe(s).level1>0?(u(),C(S,{key:0,type:"success",size:"small"},{default:o(()=>[c("轻度"+i(fe(s).level1),1)]),_:2},1024)):h("",!0),fe(s).level2>0?(u(),C(S,{key:1,type:"warning",size:"small"},{default:o(()=>[c("中度"+i(fe(s).level2),1)]),_:2},1024)):h("",!0),fe(s).level3>0?(u(),C(S,{key:2,type:"danger",size:"small"},{default:o(()=>[c("高度"+i(fe(s).level3),1)]),_:2},1024)):h("",!0),fe(s).level4>0?(u(),C(S,{key:3,type:"danger",size:"small"},{default:o(()=>[c("极度"+i(fe(s).level4),1)]),_:2},1024)):h("",!0)])])]),_:1}),a(D,{label:"最高评分",width:"120",align:"center"},{default:o(({row:s})=>[l("div",wn,[l("span",{class:E([Ft(jt(s),ql(s)),"score-text"])},i(Mt(jt(s))),3)])]),_:1})],64)):oe.value==="auto"?(u(),p(W,{key:2},[a(D,{label:"视频备注",width:"150"},{default:o(({row:s})=>{var d;return[l("div",kn,[(d=s.monitorVideo)!=null&&d.remark?(u(),C(ne,{key:0,content:s.monitorVideo.remark,placement:"top","show-after":500},{default:o(()=>[l("span",Cn,i(s.monitorVideo.remark),1)]),_:2},1032,["content"])):(u(),p("span",bn,"无备注"))])]}),_:1}),a(D,{label:"投资总金额",width:"120",align:"right"},{default:o(({row:s})=>{var d;return[l("div",Sn,[(d=s.monitorVideo)!=null&&d.totalInvestmentAmount&&s.monitorVideo.totalInvestmentAmount>0?(u(),p("span",Tn," ¥"+i(Gl(s.monitorVideo.totalInvestmentAmount)),1)):(u(),p("span",xn,"-"))])]}),_:1})],64)):(u(),p(W,{key:3},[a(D,{label:"搜索标签",width:"120"},{default:o(({row:s})=>[Qe(s).length>0?(u(),p("div",Vn,[(u(!0),p(W,null,ve(Qe(s).slice(0,3),d=>(u(),C(S,{key:d,size:"small",type:"success",class:"search-tag",onClick:F=>Pl(d)},{default:o(()=>[c(i(d),1)]),_:2},1032,["onClick"]))),128)),Qe(s).length>3?(u(),C(ne,{key:0,content:Qe(s).slice(3).join("、"),placement:"top"},{default:o(()=>[a(S,{size:"small",type:"success",class:"search-tag-more"},{default:o(()=>[c(" +"+i(Qe(s).length-3),1)]),_:2},1024)]),_:2},1032,["content"])):h("",!0)])):(u(),p("span",Dn,"无搜索标签"))]),_:1}),a(D,{label:"搜索类型",width:"100"},{default:o(({row:s})=>[Xe(s).length>0?(u(),p("div",In,[(u(!0),p(W,null,ve(Xe(s).slice(0,3),d=>(u(),C(S,{key:d,size:"small",type:"warning",class:"search-channel",onClick:F=>Rl(d)},{default:o(()=>[c(i(d),1)]),_:2},1032,["onClick"]))),128)),Xe(s).length>3?(u(),C(ne,{key:0,content:Xe(s).slice(3).join("、"),placement:"top"},{default:o(()=>[a(S,{size:"small",type:"warning",class:"search-channel-more"},{default:o(()=>[c(" +"+i(Xe(s).length-3),1)]),_:2},1024)]),_:2},1032,["content"])):h("",!0)])):(u(),p("span",An,"无搜索类型"))]),_:1})],64)),a(D,{label:"最新数据",width:"130"},{default:o(({row:s})=>[s.latestStats?(u(),p("div",En,[l("div",Fn,[e[83]||(e[83]=l("div",{class:"heart-icon"},[l("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])],-1)),l("span",null,i(Z(s.latestStats.diggCount||0)),1)]),l("div",Mn,[a(r,{size:"14"},{default:o(()=>[a(_(Tl))]),_:1}),l("span",null,i(Z(s.latestStats.commentCount||0)),1)])])):(u(),p("span",$n,"暂无数据"))]),_:1}),a(D,{label:"发布时间",width:"150",align:"center"},{default:o(({row:s})=>{var d;return[l("div",zn,i(zt((d=s.monitorVideo)==null?void 0:d.videoPublishTime)),1)]}),_:1}),a(D,{label:"创建时间",width:"150",align:"center"},{default:o(({row:s})=>{var d;return[l("div",Un,i(zt((d=s.monitorVideo)==null?void 0:d.createTime)),1)]}),_:1}),a(D,{label:"状态",width:"100",align:"center"},{default:o(({row:s})=>{var d;return[a(S,{type:Jl((d=s.monitorVideo)==null?void 0:d.status),size:"small",class:"status-tag"},{default:o(()=>{var F;return[c(i(Kl((F=s.monitorVideo)==null?void 0:F.status)),1)]}),_:2},1032,["type"])]}),_:1}),a(D,{label:"操作",width:"200",fixed:"right"},{default:o(({row:s})=>{var d,F;return[l("div",Ln,[a(ne,{content:"查看统计",placement:"top"},{default:o(()=>[a(w,{type:"primary",size:"small",icon:_(rs),onClick:ee=>{var se;return na((se=s.monitorVideo)==null?void 0:se.awemeId)},link:""},null,8,["icon","onClick"])]),_:2},1024),a(ne,{content:((d=s.monitorVideo)==null?void 0:d.joinCustomType)===1?"更新自选":"加入自选",placement:"top"},{default:o(()=>[a(w,{type:"success",size:"small",icon:_(xl),onClick:ee=>Ta(s),link:""},null,8,["icon","onClick"])]),_:2},1032,["content"]),a(ne,{content:((F=s.monitorVideo)==null?void 0:F.status)===1?"停用监控":"启用监控",placement:"top"},{default:o(()=>{var ee,se;return[a(w,{type:((ee=s.monitorVideo)==null?void 0:ee.status)===1?"warning":"success",size:"small",icon:((se=s.monitorVideo)==null?void 0:se.status)===1?_(is):_(us),onClick:Re=>ra(s),link:""},{default:o(()=>{var Re;return[c(i(((Re=s.monitorVideo)==null?void 0:Re.status)===1?"停用":"启用"),1)]}),_:2},1032,["type","icon","onClick"])]}),_:2},1032,["content"]),a(ne,{content:"删除监控",placement:"top"},{default:o(()=>[a(w,{type:"danger",size:"small",icon:_(Ht),onClick:ee=>ia(s),link:""},null,8,["icon","onClick"])]),_:2},1024)])]}),_:1})]),_:1},8,["data","empty-text","expand-row-keys"]),xt.value>0?(u(),p("div",Nn,[a(Ma,{"current-page":R.value,"onUpdate:currentPage":e[20]||(e[20]=s=>R.value=s),"page-size":Be.value,"onUpdate:pageSize":e[21]||(e[21]=s=>Be.value=s),"page-sizes":[10,20,50,100],total:xt.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:$l,onCurrentChange:zl,class:"pagination"},null,8,["current-page","page-size","total"])])):h("",!0)])),[[Ot,N.value]]):(u(),p("div",Yo,[a(Pt,{description:"请先选择要查看监控的音乐","image-size":120},{default:o(()=>[a(w,{type:"primary",onClick:e[17]||(e[17]=s=>_(te).push("/music"))},{default:o(()=>e[82]||(e[82]=[c(" 选择音乐 ",-1)])),_:1,__:[82]})]),_:1})]))]),_:1})])]),a(ce,{modelValue:xe.value,"onUpdate:modelValue":e[26]||(e[26]=s=>xe.value=s),title:"添加监控视频",width:"600px"},{footer:o(()=>[a(w,{onClick:e[24]||(e[24]=s=>xe.value=!1)},{default:o(()=>e[93]||(e[93]=[c("取消",-1)])),_:1,__:[93]}),a(w,{type:"primary",onClick:e[25]||(e[25]=s=>Ve.value==="single"?Ql():ta()),loading:Ve.value==="single"?St.value:Vt.value,disabled:Ve.value==="batch"&&!L.value.file},{default:o(()=>[c(i(Ve.value==="single"?"添加监控":"开始导入"),1)]),_:1},8,["loading","disabled"])]),default:o(()=>[a(Rt,{modelValue:Ve.value,"onUpdate:modelValue":e[22]||(e[22]=s=>Ve.value=s),style:{"margin-bottom":"20px"},onChange:Zt},{default:o(()=>[a(vl,{label:"single"},{default:o(()=>e[84]||(e[84]=[c("单个添加",-1)])),_:1,__:[84]}),a(vl,{label:"batch"},{default:o(()=>e[85]||(e[85]=[c("批量导入",-1)])),_:1,__:[85]})]),_:1},8,["modelValue"]),a(yt,{model:L.value,"label-width":"100px"},{default:o(()=>[Ve.value==="single"?(u(),C(O,{key:0,label:"视频链接"},{default:o(()=>[a(ge,{modelValue:L.value.videoUrl,"onUpdate:modelValue":e[23]||(e[23]=s=>L.value.videoUrl=s),placeholder:"请输入抖音视频链接或ID"},null,8,["modelValue"])]),_:1})):(u(),p(W,{key:1},[a(ml,{title:"批量导入说明",type:"info",closable:!1,"show-icon":"",style:{"margin-bottom":"20px"}},{default:o(()=>[l("div",Pn,[e[87]||(e[87]=l("p",null,[l("strong",null,"Excel文件格式要求：")],-1)),e[88]||(e[88]=l("ul",{style:{margin:"8px 0","padding-left":"20px"}},[l("li",null,"支持 .xlsx、.xls 和 .csv 格式"),l("li",null,"第一行为标题行（监控视频地址），会被跳过"),l("li",null,"从第二行开始，第一列为视频链接")],-1)),l("p",Rn,[a(w,{type:"primary",size:"small",onClick:Xl,icon:_(ds)},{default:o(()=>e[86]||(e[86]=[c(" 下载Excel模板 ",-1)])),_:1,__:[86]},8,["icon"])])])]),_:1}),a(O,{label:"Excel文件",required:""},{default:o(()=>[a($a,{ref_key:"uploadRef",ref:et,"auto-upload":!1,"show-file-list":!0,limit:1,accept:".xlsx,.xls,.csv","on-change":Zl,"on-remove":ea},{tip:o(()=>e[90]||(e[90]=[l("div",{class:"el-upload__tip",style:{color:"#909399","font-size":"12px","margin-top":"5px"}}," 支持 .xlsx/.xls/.csv 文件，且不超过 10MB ",-1)])),default:o(()=>[a(w,{icon:_(cs)},{default:o(()=>e[89]||(e[89]=[c("选择Excel文件",-1)])),_:1,__:[89]},8,["icon"])]),_:1},512)]),_:1})],64)),I.value&&P.value?(u(),C(O,{key:2,label:"音乐信息"},{default:o(()=>[l("div",On,[l("div",qn,i(P.value.title)+" - "+i(P.value.author),1),P.value.album?(u(),p("div",Bn,"专辑："+i(P.value.album),1)):h("",!0),P.value.tagList&&_(wt)(P.value.tagList).length?(u(),p("div",Hn,[e[91]||(e[91]=c(" 标签： ",-1)),(u(!0),p(W,null,ve(_(wt)(P.value.tagList),s=>(u(),C(S,{key:s,size:"small",class:"music-tag"},{default:o(()=>[c(i(s),1)]),_:2},1024))),128))])):h("",!0)])]),_:1})):(u(),C(O,{key:3,label:"音乐信息"},{default:o(()=>[l("div",Yn,[a(ml,{title:"请先选择音乐",type:"warning",closable:!1,"show-icon":""},{default:o(()=>e[92]||(e[92]=[l("p",null,"添加监控视频前，请先在音乐管理页面选择要监控的音乐",-1)])),_:1})])]),_:1}))]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(ce,{modelValue:$e.value,"onUpdate:modelValue":e[30]||(e[30]=s=>$e.value=s),title:"批量操作",width:"400px"},{footer:o(()=>[a(w,{onClick:e[27]||(e[27]=s=>$e.value=!1)},{default:o(()=>e[94]||(e[94]=[c("取消",-1)])),_:1,__:[94]}),a(w,{type:"success",onClick:e[28]||(e[28]=s=>tl(1))},{default:o(()=>e[95]||(e[95]=[c(" 批量启用 ",-1)])),_:1,__:[95]}),a(w,{type:"warning",onClick:e[29]||(e[29]=s=>tl(0))},{default:o(()=>e[96]||(e[96]=[c(" 批量停用 ",-1)])),_:1,__:[96]}),a(w,{type:"danger",onClick:da},{default:o(()=>e[97]||(e[97]=[c(" 批量删除 ",-1)])),_:1,__:[97]})]),default:o(()=>[l("p",null,"已选择 "+i(ie.value.length)+" 个监控项",1)]),_:1},8,["modelValue"]),a(ce,{modelValue:lt.value,"onUpdate:modelValue":e[31]||(e[31]=s=>lt.value=s),title:"导入进度",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1,onClose:el},{footer:o(()=>[a(w,{onClick:el,disabled:M.value.status==="PROCESSING"},{default:o(()=>[c(i(M.value.status==="PROCESSING"?"处理中...":"关闭"),1)]),_:1},8,["disabled"])]),default:o(()=>[l("div",jn,[l("div",Gn,[l("p",null,[e[98]||(e[98]=l("strong",null,"文件名：",-1)),c(i(M.value.fileName),1)]),l("p",null,[e[99]||(e[99]=l("strong",null,"任务ID：",-1)),c(i(M.value.id),1)]),l("p",null,[e[100]||(e[100]=l("strong",null,"状态：",-1)),a(S,{type:oa(M.value.status),size:"small"},{default:o(()=>[c(i(sa(M.value.status)),1)]),_:1},8,["type"])])]),l("div",Wn,[a(za,{percentage:M.value.progress,status:M.value.status==="COMPLETED"?"success":M.value.status==="FAILED"?"exception":null},null,8,["percentage","status"]),M.value.totalCount>0?(u(),p("div",Jn,[l("div",Kn,[l("span",null,"总计："+i(M.value.totalCount),1),l("span",null,"已处理："+i(M.value.processedCount),1)]),l("div",Qn,[l("span",Xn,"成功："+i(M.value.successCount),1),l("span",Zn,"跳过："+i(M.value.skipCount),1),l("span",er,"失败："+i(M.value.errorCount),1)])])):h("",!0)]),M.value.status==="PROCESSING"?(u(),p("div",tr,[a(r,{class:"rotating"},{default:o(()=>[a(_(Vl))]),_:1}),e[101]||(e[101]=l("span",null,"正在处理中，请稍候...",-1))])):h("",!0),M.value.status==="COMPLETED"?(u(),p("div",lr,[a(r,{style:{color:"#67c23a"}},{default:o(()=>[a(_(Cl))]),_:1}),e[102]||(e[102]=l("span",null,"导入完成！",-1))])):h("",!0),M.value.status==="FAILED"?(u(),p("div",ar,[a(r,{style:{color:"#f56c6c"}},{default:o(()=>[a(_(vs))]),_:1}),e[103]||(e[103]=l("span",null,"导入失败，请重试",-1))])):h("",!0)])]),_:1},8,["modelValue"]),a(ce,{modelValue:at.value,"onUpdate:modelValue":e[41]||(e[41]=s=>at.value=s),title:"视频数据统计",width:"90%",top:"5vh","close-on-click-modal":!1},{footer:o(()=>[a(w,{onClick:ga},{default:o(()=>e[115]||(e[115]=[c("关闭",-1)])),_:1,__:[115]})]),default:o(()=>[l("div",sr,[l("div",or,[l("div",nr,[e[104]||(e[104]=l("span",{class:"video-id-label"},"视频ID:",-1)),l("span",rr,i(je.value),1)]),l("div",ir,[a(Ae,{modelValue:ot.value,"onUpdate:modelValue":e[32]||(e[32]=s=>ot.value=s),placeholder:"选择时间范围",style:{width:"140px"},onChange:ll},{default:o(()=>[a(g,{label:"最近7天",value:"7"}),a(g,{label:"最近15天",value:"15"}),a(g,{label:"最近30天",value:"30"})]),_:1},8,["modelValue"])])]),Bt((u(),p("div",ur,[De.value?(u(),p("div",dr,[l("div",{class:E(["stat-card likes",{"is-active":B.value.likes}]),onClick:e[33]||(e[33]=s=>Ce("likes"))},[e[106]||(e[106]=l("div",{class:"stat-icon"},[l("div",{class:"heart-icon-large"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor"},[l("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])])],-1)),l("div",cr,[l("div",vr,i(_t(De.value.diggCount)),1),e[105]||(e[105]=l("div",{class:"stat-label"},"点赞数",-1)),z.value.digg?(u(),p("div",mr,[a(r,{class:E({"trend-up":z.value.digg>0,"trend-down":z.value.digg<0})},{default:o(()=>[(u(),C(bt(z.value.digg>0?"ArrowUp":"ArrowDown")))]),_:1},8,["class"]),l("span",null,i(Math.abs(z.value.digg))+"%",1)])):h("",!0)])],2),l("div",{class:E(["stat-card comments",{"is-active":B.value.comments}]),onClick:e[34]||(e[34]=s=>Ce("comments"))},[l("div",pr,[a(r,{size:"24"},{default:o(()=>[a(_(Tl))]),_:1})]),l("div",fr,[l("div",gr,i(_t(De.value.commentCount)),1),e[107]||(e[107]=l("div",{class:"stat-label"},"评论数",-1)),z.value.comment?(u(),p("div",_r,[a(r,{class:E({"trend-up":z.value.comment>0,"trend-down":z.value.comment<0})},{default:o(()=>[(u(),C(bt(z.value.comment>0?"ArrowUp":"ArrowDown")))]),_:1},8,["class"]),l("span",null,i(Math.abs(z.value.comment))+"%",1)])):h("",!0)])],2),l("div",{class:E(["stat-card collects",{"is-active":B.value.collects}]),onClick:e[35]||(e[35]=s=>Ce("collects"))},[l("div",hr,[a(r,{size:"24"},{default:o(()=>[a(_(xl))]),_:1})]),l("div",yr,[l("div",wr,i(_t(De.value.collectCount)),1),e[108]||(e[108]=l("div",{class:"stat-label"},"收藏数",-1)),z.value.collect?(u(),p("div",kr,[a(r,{class:E({"trend-up":z.value.collect>0,"trend-down":z.value.collect<0})},{default:o(()=>[(u(),C(bt(z.value.collect>0?"ArrowUp":"ArrowDown")))]),_:1},8,["class"]),l("span",null,i(Math.abs(z.value.collect))+"%",1)])):h("",!0)])],2),l("div",{class:E(["stat-card shares",{"is-active":B.value.shares}]),onClick:e[36]||(e[36]=s=>Ce("shares"))},[l("div",Cr,[a(r,{size:"24"},{default:o(()=>[a(_(ms))]),_:1})]),l("div",br,[l("div",Sr,i(_t(De.value.shareCount)),1),e[109]||(e[109]=l("div",{class:"stat-label"},"分享数",-1)),z.value.share?(u(),p("div",Tr,[a(r,{class:E({"trend-up":z.value.share>0,"trend-down":z.value.share<0})},{default:o(()=>[(u(),C(bt(z.value.share>0?"ArrowUp":"ArrowDown")))]),_:1},8,["class"]),l("span",null,i(Math.abs(z.value.share))+"%",1)])):h("",!0)])],2)])):h("",!0),a(cl,{class:"chart-card"},{header:o(()=>[l("div",xr,[e[114]||(e[114]=l("span",{class:"card-title"},"数据趋势图",-1)),l("div",Vr,[l("div",{class:E(["legend-item",{"legend-disabled":!B.value.likes}]),onClick:e[37]||(e[37]=s=>Ce("likes"))},e[110]||(e[110]=[l("div",{class:"legend-dot likes-dot"},null,-1),l("span",null,"点赞",-1)]),2),l("div",{class:E(["legend-item",{"legend-disabled":!B.value.comments}]),onClick:e[38]||(e[38]=s=>Ce("comments"))},e[111]||(e[111]=[l("div",{class:"legend-dot comments-dot"},null,-1),l("span",null,"评论",-1)]),2),l("div",{class:E(["legend-item",{"legend-disabled":!B.value.collects}]),onClick:e[39]||(e[39]=s=>Ce("collects"))},e[112]||(e[112]=[l("div",{class:"legend-dot collects-dot"},null,-1),l("span",null,"收藏",-1)]),2),l("div",{class:E(["legend-item",{"legend-disabled":!B.value.shares}]),onClick:e[40]||(e[40]=s=>Ce("shares"))},e[113]||(e[113]=[l("div",{class:"legend-dot shares-dot"},null,-1),l("span",null,"分享",-1)]),2)])])]),default:o(()=>[l("div",Dr,[Ge.value?(u(),C(_(Ns),{key:0,option:Ge.value,style:{height:"400px"},autoresize:""},null,8,["option"])):st.value?h("",!0):(u(),p("div",Ir,[a(Pt,{description:"暂无图表数据"})]))])]),_:1})])),[[Ot,st.value]])])]),_:1},8,["modelValue"]),a(ce,{modelValue:rt.value,"onUpdate:modelValue":e[42]||(e[42]=s=>rt.value=s),title:"播主信息",width:"600px","close-on-click-modal":!1},{footer:o(()=>{var s,d;return[a(w,{onClick:wa},{default:o(()=>e[116]||(e[116]=[c("关闭",-1)])),_:1,__:[116]}),K.value&&((s=T.value)!=null&&s.userId)?(u(),C(w,{key:0,type:"warning",icon:t.Edit,onClick:Fa},{default:o(()=>e[117]||(e[117]=[c(" 编辑设置 ",-1)])),_:1,__:[117]},8,["icon"])):h("",!0),(d=T.value)!=null&&d.userId?(u(),C(w,{key:1,type:K.value?"danger":"primary",loading:ze.value,onClick:ka},{default:o(()=>[c(i(K.value?"取消收藏":"收藏播主"),1)]),_:1},8,["type","loading"])):h("",!0)]}),default:o(()=>{var s;return[Bt((u(),p("div",null,[T.value?(u(),p("div",Ar,[l("div",Er,[a(n,{src:T.value.authorAvatar,size:80,class:"author-avatar"},{default:o(()=>[a(r,null,{default:o(()=>[a(_(Dl))]),_:1})]),_:1},8,["src"]),l("div",Fr,[l("h3",null,i(T.value.nickname||"未知播主"),1),l("p",Mr,i(T.value.userId||"N/A"),1),K.value&&U.value?(u(),p("div",$r,[U.value.channelType?(u(),C(S,{key:0,type:"primary",size:"small",class:"info-tag"},{default:o(()=>[c(i(U.value.channelType),1)]),_:1})):h("",!0),U.value.authorLevel?(u(),C(S,{key:1,type:_a(U.value.authorLevel),size:"small",class:"info-tag"},{default:o(()=>[c(i(ha(U.value.authorLevel)),1)]),_:1},8,["type"])):h("",!0),U.value.backgroundColor?(u(),p("div",zr,[l("div",{class:"color-indicator",style:qe({backgroundColor:U.value.backgroundColor}),title:U.value.backgroundColor},null,12,Ur)])):h("",!0)])):h("",!0),l("div",Lr,[l("span",Nr,[a(r,null,{default:o(()=>[a(_(Dl))]),_:1}),c(" "+i(sl(T.value.followerCount))+" 粉丝 ",1)]),l("span",Pr,[a(r,null,{default:o(()=>[a(_(qt))]),_:1}),c(" "+i(sl(T.value.totalFavorited))+" 获赞 ",1)])])])]),T.value.userDesc||T.value.userUrl||K.value&&((s=U.value)!=null&&s.remark)?(u(),p("div",Rr,[a(pl,{column:1,border:""},{default:o(()=>{var d;return[T.value.userDesc?(u(),C(Ne,{key:0,label:"播主描述"},{default:o(()=>[l("div",Or,i(T.value.userDesc),1)]),_:1})):h("",!0),T.value.userUrl?(u(),C(Ne,{key:1,label:"播主地址"},{default:o(()=>[a(dl,{type:"primary",href:T.value.userUrl,target:"_blank",class:"author-link"},{default:o(()=>[c(i(T.value.userUrl),1)]),_:1},8,["href"])]),_:1})):h("",!0),K.value&&((d=U.value)!=null&&d.remark)?(u(),C(Ne,{key:2,label:"备注信息"},{default:o(()=>[l("div",qr,i(U.value.remark),1)]),_:1})):h("",!0)]}),_:1})])):h("",!0)])):it.value?h("",!0):(u(),C(Pt,{key:1,description:"暂无播主信息"}))])),[[Ot,it.value]])]}),_:1},8,["modelValue"]),a(ce,{modelValue:We.value,"onUpdate:modelValue":e[47]||(e[47]=s=>We.value=s),title:"编辑播主设置",width:"500px","close-on-click-modal":!1},{footer:o(()=>[a(w,{onClick:rl},{default:o(()=>e[124]||(e[124]=[c("取消",-1)])),_:1,__:[124]}),a(w,{type:"primary",onClick:ba,loading:At.value},{default:o(()=>e[125]||(e[125]=[c(" 保存设置 ",-1)])),_:1,__:[125]},8,["loading"])]),default:o(()=>[a(yt,{model:H.value,"label-width":"100px",rules:Fl,ref_key:"editFormRef",ref:It},{default:o(()=>[a(O,{label:"播主昵称"},{default:o(()=>{var s;return[a(ge,{value:((s=Je.value)==null?void 0:s.authorNickname)||"",disabled:""},null,8,["value"])]}),_:1}),a(O,{label:"频道类型",prop:"channelType"},{default:o(()=>[a(Ae,{modelValue:H.value.channelType,"onUpdate:modelValue":e[43]||(e[43]=s=>H.value.channelType=s),placeholder:"请选择频道类型",style:{width:"100%"},clearable:"",filterable:"","allow-create":""},{default:o(()=>[a(g,{label:"美食",value:"美食"}),a(g,{label:"美妆",value:"美妆"}),a(g,{label:"时尚",value:"时尚"}),a(g,{label:"娱乐",value:"娱乐"}),a(g,{label:"音乐",value:"音乐"}),a(g,{label:"舞蹈",value:"舞蹈"}),a(g,{label:"游戏",value:"游戏"}),a(g,{label:"科技",value:"科技"}),a(g,{label:"教育",value:"教育"}),a(g,{label:"旅游",value:"旅游"}),a(g,{label:"汽车",value:"汽车"}),a(g,{label:"体育",value:"体育"}),a(g,{label:"生活",value:"生活"}),a(g,{label:"搞笑",value:"搞笑"}),a(g,{label:"知识",value:"知识"}),a(g,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),a(O,{label:"播主等级",prop:"authorLevel"},{default:o(()=>[a(Rt,{modelValue:H.value.authorLevel,"onUpdate:modelValue":e[44]||(e[44]=s=>H.value.authorLevel=s)},{default:o(()=>[a(Pe,{value:1},{default:o(()=>e[118]||(e[118]=[c("普通",-1)])),_:1,__:[118]}),a(Pe,{value:2},{default:o(()=>e[119]||(e[119]=[c("优质",-1)])),_:1,__:[119]}),a(Pe,{value:3},{default:o(()=>e[120]||(e[120]=[c("顶级",-1)])),_:1,__:[120]})]),_:1},8,["modelValue"])]),_:1}),a(O,{label:"背景颜色",prop:"backgroundColor"},{default:o(()=>[l("div",Br,[l("div",Hr,[l("div",Yr,[e[121]||(e[121]=l("div",{class:"group-label"},"选择背景颜色",-1)),l("div",jr,[(u(),p(W,null,ve(["#E3F2FD","#FFF3E0","#E8F5E8","#FCE4EC","#F3E5F5","#FFFDE7","#E0F7FA","#FFF8E1","#EFEBE9","#F1F8E9"],s=>l("div",{key:s,class:E(["color-option",{active:H.value.backgroundColor===s}]),style:qe({backgroundColor:s}),onClick:d=>H.value.backgroundColor=s,title:s},null,14,Gr)),64))])])]),H.value.backgroundColor?(u(),p("div",Wr,[e[123]||(e[123]=l("span",{class:"selected-label"},"已选择：",-1)),l("div",{class:"selected-color-preview",style:qe({backgroundColor:H.value.backgroundColor}),title:H.value.backgroundColor},null,12,Jr),l("span",Kr,i(H.value.backgroundColor),1),a(w,{size:"small",text:"",onClick:e[45]||(e[45]=s=>H.value.backgroundColor="")},{default:o(()=>e[122]||(e[122]=[c("清除",-1)])),_:1,__:[122]})])):h("",!0)])]),_:1}),a(O,{label:"备注信息",prop:"remark"},{default:o(()=>[a(ge,{modelValue:H.value.remark,"onUpdate:modelValue":e[46]||(e[46]=s=>H.value.remark=s),type:"textarea",rows:3,placeholder:"请输入备注信息，如：优质美食博主",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(ce,{modelValue:Ke.value,"onUpdate:modelValue":e[52]||(e[52]=s=>Ke.value=s),title:"收藏播主设置",width:"500px","close-on-click-modal":!1},{footer:o(()=>[a(w,{onClick:nl},{default:o(()=>e[132]||(e[132]=[c("取消",-1)])),_:1,__:[132]}),a(w,{type:"primary",onClick:Sa,loading:ze.value},{default:o(()=>e[133]||(e[133]=[c(" 确认收藏 ",-1)])),_:1,__:[133]},8,["loading"])]),default:o(()=>[a(yt,{model:Y.value,"label-width":"100px",rules:Ml,ref_key:"authorSettingFormRef",ref:Et},{default:o(()=>[a(O,{label:"播主昵称"},{default:o(()=>{var s;return[a(ge,{value:((s=T.value)==null?void 0:s.nickname)||"",disabled:""},null,8,["value"])]}),_:1}),a(O,{label:"频道类型",prop:"channelType"},{default:o(()=>[a(Ae,{modelValue:Y.value.channelType,"onUpdate:modelValue":e[48]||(e[48]=s=>Y.value.channelType=s),placeholder:"请选择频道类型",style:{width:"100%"},clearable:"",filterable:"","allow-create":""},{default:o(()=>[a(g,{label:"美食",value:"美食"}),a(g,{label:"美妆",value:"美妆"}),a(g,{label:"时尚",value:"时尚"}),a(g,{label:"娱乐",value:"娱乐"}),a(g,{label:"音乐",value:"音乐"}),a(g,{label:"舞蹈",value:"舞蹈"}),a(g,{label:"游戏",value:"游戏"}),a(g,{label:"科技",value:"科技"}),a(g,{label:"教育",value:"教育"}),a(g,{label:"旅游",value:"旅游"}),a(g,{label:"汽车",value:"汽车"}),a(g,{label:"体育",value:"体育"}),a(g,{label:"生活",value:"生活"}),a(g,{label:"搞笑",value:"搞笑"}),a(g,{label:"知识",value:"知识"}),a(g,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),a(O,{label:"播主级别",prop:"authorLevel"},{default:o(()=>[a(Rt,{modelValue:Y.value.authorLevel,"onUpdate:modelValue":e[49]||(e[49]=s=>Y.value.authorLevel=s)},{default:o(()=>[a(Pe,{value:1},{default:o(()=>e[126]||(e[126]=[c("普通",-1)])),_:1,__:[126]}),a(Pe,{value:2},{default:o(()=>e[127]||(e[127]=[c("优质",-1)])),_:1,__:[127]}),a(Pe,{value:3},{default:o(()=>e[128]||(e[128]=[c("顶级",-1)])),_:1,__:[128]})]),_:1},8,["modelValue"])]),_:1}),a(O,{label:"背景颜色",prop:"backgroundColor"},{default:o(()=>[l("div",Qr,[l("div",Xr,[l("div",Zr,[e[129]||(e[129]=l("div",{class:"group-label"},"选择背景颜色",-1)),l("div",ei,[(u(),p(W,null,ve(["#E3F2FD","#FFF3E0","#E8F5E8","#FCE4EC","#F3E5F5","#FFFDE7","#E0F7FA","#FFF8E1","#EFEBE9","#F1F8E9"],s=>l("div",{key:s,class:E(["color-option",{active:Y.value.backgroundColor===s}]),style:qe({backgroundColor:s}),onClick:d=>Y.value.backgroundColor=s,title:s},null,14,ti)),64))])])]),Y.value.backgroundColor?(u(),p("div",li,[e[131]||(e[131]=l("span",{class:"selected-label"},"已选择：",-1)),l("div",{class:"selected-color-preview",style:qe({backgroundColor:Y.value.backgroundColor}),title:Y.value.backgroundColor},null,12,ai),l("span",si,i(Y.value.backgroundColor),1),a(w,{size:"small",text:"",onClick:e[50]||(e[50]=s=>Y.value.backgroundColor="")},{default:o(()=>e[130]||(e[130]=[c("清除",-1)])),_:1,__:[130]})])):h("",!0)])]),_:1}),a(O,{label:"备注信息",prop:"remark"},{default:o(()=>[a(ge,{modelValue:Y.value.remark,"onUpdate:modelValue":e[51]||(e[51]=s=>Y.value.remark=s),type:"textarea",rows:3,placeholder:"请输入备注信息，如：优质美食博主",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(ce,{modelValue:ut.value,"onUpdate:modelValue":e[54]||(e[54]=s=>ut.value=s),title:((_l=(gl=j.value)==null?void 0:gl.monitorVideo)==null?void 0:_l.joinCustomType)===1?"更新自选":"加入自选",width:"700px","close-on-click-modal":!1},{footer:o(()=>{var s,d;return[a(w,{onClick:Lt},{default:o(()=>e[139]||(e[139]=[c("取消",-1)])),_:1,__:[139]}),((d=(s=j.value)==null?void 0:s.monitorVideo)==null?void 0:d.joinCustomType)===1?(u(),C(w,{key:0,type:"danger",onClick:Aa,loading:Ue.value},{default:o(()=>e[140]||(e[140]=[c(" 取消自选 ",-1)])),_:1,__:[140]},8,["loading"])):h("",!0),a(w,{type:"primary",onClick:Ia,loading:Ue.value},{default:o(()=>{var F,ee;return[c(i(((ee=(F=j.value)==null?void 0:F.monitorVideo)==null?void 0:ee.joinCustomType)===1?"确认更新":"确认加入"),1)]}),_:1},8,["loading"])]}),default:o(()=>[l("div",oi,[j.value?(u(),p("div",ni,[e[134]||(e[134]=l("h4",null,"视频信息",-1)),a(pl,{column:2,border:"",size:"small"},{default:o(()=>[a(Ne,{label:"视频ID"},{default:o(()=>{var s;return[c(i((s=j.value.monitorVideo)==null?void 0:s.awemeId),1)]}),_:1}),a(Ne,{label:"播主"},{default:o(()=>{var s,d;return[c(i(((s=j.value.authorInfo)==null?void 0:s.nickname)||((d=j.value.videoInfo)==null?void 0:d.authorId)),1)]}),_:1}),a(Ne,{label:"视频标题",span:2},{default:o(()=>[l("div",ri,i(gt(j.value)||"暂无标题"),1)]),_:1})]),_:1})])):h("",!0),l("div",ii,[e[135]||(e[135]=l("h4",null,"视频备注",-1)),a(O,null,{default:o(()=>[a(ge,{modelValue:G.value.description,"onUpdate:modelValue":e[53]||(e[53]=s=>G.value.description=s),type:"textarea",rows:3,placeholder:"请输入视频备注（可选）",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),l("div",ui,[e[138]||(e[138]=l("h4",null,"投资记录",-1)),dt.value?(u(),p("div",di,[a(r,{class:"rotating"},{default:o(()=>[a(_(Vl))]),_:1}),e[136]||(e[136]=l("span",null,"正在加载投资记录...",-1))])):(u(),p(W,{key:1},[G.value.amounts.length>0?(u(),p("div",ci,[(u(!0),p(W,null,ve(G.value.amounts,(s,d)=>(u(),p("div",{key:d,class:"investment-item"},[l("div",vi,[a(O,{label:"投资金额",class:"amount-input"},{default:o(()=>[a(Ua,{modelValue:s.amount,"onUpdate:modelValue":F=>s.amount=F,min:0,step:100,precision:2,placeholder:"请输入投资金额",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(O,{label:"投资时间",class:"time-input"},{default:o(()=>[a(Nt,{modelValue:s.investmentTime,"onUpdate:modelValue":F=>s.investmentTime=F,type:"datetime",placeholder:"选择投资时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DDTHH:mm",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l("div",mi,[d===G.value.amounts.length-1?(u(),C(w,{key:0,type:"primary",size:"small",icon:_(kt),onClick:xa,circle:""},null,8,["icon"])):h("",!0),a(w,{type:"danger",size:"small",icon:_(Ht),onClick:F=>Da(d),circle:""},null,8,["icon","onClick"])])])]))),128))])):(u(),p("div",pi,[a(w,{type:"primary",icon:_(kt),onClick:Va,class:"add-investment-btn"},{default:o(()=>e[137]||(e[137]=[c(" 添加投资记录 ",-1)])),_:1,__:[137]},8,["icon"])]))],64))])])]),_:1},8,["modelValue","title"]),a(ce,{modelValue:He.value,"onUpdate:modelValue":e[57]||(e[57]=s=>He.value=s),title:"更新邮箱",width:"420px"},{footer:o(()=>[a(w,{onClick:e[56]||(e[56]=s=>He.value=!1)},{default:o(()=>e[141]||(e[141]=[c("取消",-1)])),_:1,__:[141]}),a(w,{type:"primary",loading:Dt.value,onClick:ma},{default:o(()=>e[142]||(e[142]=[c("确定",-1)])),_:1,__:[142]},8,["loading"])]),default:o(()=>[a(yt,{model:Ye.value,"label-width":"80px"},{default:o(()=>[a(O,{label:"邮箱"},{default:o(()=>[a(ge,{modelValue:Ye.value.email,"onUpdate:modelValue":e[55]||(e[55]=s=>Ye.value.email=s),placeholder:"请输入新的邮箱地址"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(ce,{modelValue:ft.value,"onUpdate:modelValue":e[58]||(e[58]=s=>ft.value=s),title:"热度异动详情",width:"520px","close-on-click-modal":!1,class:"simple-alert-dialog"},{footer:o(()=>[a(w,{onClick:Hl},{default:o(()=>e[158]||(e[158]=[c("关闭",-1)])),_:1,__:[158]})]),default:o(()=>[A.value?(u(),p("div",fi,[l("div",gi,[l("div",_i,[e[143]||(e[143]=l("span",{class:"info-label"},"检测时间",-1)),l("span",hi,i($t(A.value.detectionTime)),1)]),l("div",yi,[e[144]||(e[144]=l("span",{class:"info-label"},"基准时间",-1)),l("span",wi,i($t(A.value.baselineTime)),1)]),l("div",ki,[e[145]||(e[145]=l("span",{class:"info-label"},"触发评分",-1)),l("span",{class:E([Ft(A.value.triggerScore,A.value.timeWindow),"score-badge simple"])},i(Mt(A.value.triggerScore)),3)]),l("div",Ci,[e[146]||(e[146]=l("span",{class:"info-label"},"提醒级别",-1)),a(S,{type:Gt(A.value.alertLevel),size:"small"},{default:o(()=>[c(i(Wt(A.value.alertLevel)),1)]),_:1},8,["type"])]),l("div",bi,[e[147]||(e[147]=l("span",{class:"info-label"},"时间窗口",-1)),a(S,{type:Jt(A.value.timeWindow),size:"small"},{default:o(()=>[c(i(Kt(A.value.timeWindow)),1)]),_:1},8,["type"])]),l("div",Si,[e[148]||(e[148]=l("span",{class:"info-label"},"触发指标",-1)),a(S,{type:"info",size:"small"},{default:o(()=>[c(i(Qt(A.value.triggerMetric)),1)]),_:1})])]),l("div",Ti,[e[157]||(e[157]=l("h4",{class:"section-header"},"增长数据",-1)),l("div",xi,[l("div",Vi,[e[150]||(e[150]=l("div",{class:"data-label"},[l("span",{class:"data-icon"},"❤️"),l("span",null,"点赞")],-1)),l("div",Di,[l("span",Ii,i(Z(A.value.baselineDiggCount||0)),1),e[149]||(e[149]=l("span",{class:"arrow"},"→",-1)),l("span",Ai,i(Z(A.value.currentDiggCount||0)),1),l("span",Ei,"+"+i(we(A.value.diggGrowthRate))+"%",1)])]),l("div",Fi,[e[152]||(e[152]=l("div",{class:"data-label"},[l("span",{class:"data-icon"},"💬"),l("span",null,"评论")],-1)),l("div",Mi,[l("span",$i,i(Z(A.value.baselineCommentCount||0)),1),e[151]||(e[151]=l("span",{class:"arrow"},"→",-1)),l("span",zi,i(Z(A.value.currentCommentCount||0)),1),l("span",Ui,"+"+i(we(A.value.commentGrowthRate))+"%",1)])]),l("div",Li,[e[154]||(e[154]=l("div",{class:"data-label"},[l("span",{class:"data-icon"},"⭐"),l("span",null,"收藏")],-1)),l("div",Ni,[l("span",Pi,i(Z(A.value.baselineCollectCount||0)),1),e[153]||(e[153]=l("span",{class:"arrow"},"→",-1)),l("span",Ri,i(Z(A.value.currentCollectCount||0)),1),l("span",Oi,"+"+i(we(A.value.collectGrowthRate))+"%",1)])]),l("div",qi,[e[156]||(e[156]=l("div",{class:"data-label"},[l("span",{class:"data-icon"},"📤"),l("span",null,"分享")],-1)),l("div",Bi,[l("span",Hi,i(Z(A.value.baselineShareCount||0)),1),e[155]||(e[155]=l("span",{class:"arrow"},"→",-1)),l("span",Yi,i(Z(A.value.currentShareCount||0)),1),l("span",ji,"+"+i(we(A.value.shareGrowthRate))+"%",1)])])])])])):h("",!0)]),_:1},8,["modelValue"])])}}},cu=La(Gi,[["__scopeId","data-v-c1855150"]]);export{cu as default};
