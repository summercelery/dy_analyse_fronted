import{_ as R}from"./_plugin-vue_export-helper-d6af9df2.js";/* empty css                     */import{u as q,a as T,r as u,b as V,o as h,c as B,d as x,e as s,w as l,E as S,f as k,g as E,h as L,i as C,j as I,k as K,l as N,m as j}from"./index-0e04f23d.js";const M={class:"login-container"},A={class:"login-card"},O={__name:"Login",setup(D){const U=q(),w=T(),d=u("login"),m=u(!1),p=u(!1),g=u(),f=u(),n=V({username:"",password:""}),a=V({username:"",email:"",password:"",confirmPassword:""}),z={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},F={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度为3-20个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少6个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(i,e,o)=>{e!==a.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]},c=async()=>{g.value&&await g.value.validate(async i=>{if(i){m.value=!0;try{await w.login(n)&&U.push("/music")}finally{m.value=!1}}})},_=async()=>{f.value&&await f.value.validate(async i=>{if(i){p.value=!0;try{await w.register(a)&&(d.value="login",Object.assign(a,{username:"",email:"",password:"",confirmPassword:""}))}finally{p.value=!1}}})};return(i,e)=>{const o=C,t=I,v=K,y=N,b=j,P=S;return h(),B("div",M,[x("div",A,[e[9]||(e[9]=x("h1",{class:"login-title"},null,-1)),s(P,{modelValue:d.value,"onUpdate:modelValue":e[6]||(e[6]=r=>d.value=r),class:"login-tabs"},{default:l(()=>[s(b,{label:"登录",name:"login"},{default:l(()=>[s(y,{model:n,rules:z,ref_key:"loginFormRef",ref:g,onSubmit:k(c,["prevent"])},{default:l(()=>[s(t,{prop:"username"},{default:l(()=>[s(o,{modelValue:n.username,"onUpdate:modelValue":e[0]||(e[0]=r=>n.username=r),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(t,{prop:"password"},{default:l(()=>[s(o,{modelValue:n.password,"onUpdate:modelValue":e[1]||(e[1]=r=>n.password=r),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:E(c,["enter"])},null,8,["modelValue"])]),_:1}),s(t,null,{default:l(()=>[s(v,{type:"primary",size:"large",style:{width:"100%"},loading:m.value,onClick:c},{default:l(()=>e[7]||(e[7]=[L(" 登录 ",-1)])),_:1,__:[7]},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1}),s(b,{label:"注册",name:"register"},{default:l(()=>[s(y,{model:a,rules:F,ref_key:"registerFormRef",ref:f,onSubmit:k(_,["prevent"])},{default:l(()=>[s(t,{prop:"username"},{default:l(()=>[s(o,{modelValue:a.username,"onUpdate:modelValue":e[2]||(e[2]=r=>a.username=r),placeholder:"请输入用户名",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(t,{prop:"email"},{default:l(()=>[s(o,{modelValue:a.email,"onUpdate:modelValue":e[3]||(e[3]=r=>a.email=r),placeholder:"请输入邮箱",size:"large","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),s(t,{prop:"password"},{default:l(()=>[s(o,{modelValue:a.password,"onUpdate:modelValue":e[4]||(e[4]=r=>a.password=r),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(t,{prop:"confirmPassword"},{default:l(()=>[s(o,{modelValue:a.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=r=>a.confirmPassword=r),type:"password",placeholder:"请确认密码",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:E(_,["enter"])},null,8,["modelValue"])]),_:1}),s(t,null,{default:l(()=>[s(v,{type:"primary",size:"large",style:{width:"100%"},loading:p.value,onClick:_},{default:l(()=>e[8]||(e[8]=[L(" 注册 ",-1)])),_:1,__:[8]},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])])])}}},Q=R(O,[["__scopeId","data-v-241e29af"]]);export{Q as default};
