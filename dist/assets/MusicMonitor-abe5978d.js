/* empty css                  *//* empty css                 *//* empty css                  *//* empty css                 */import{u as X,a as Y,r as M,n as Z,p as ee,q as m,o as r,c as _,d as e,e as o,w as n,t as c,s as x,N as D,O as z,a1 as B,a2 as g,x as N,y as te,z as oe,B as se,C as ne,i as ae,h as y,f as le,A as ie,P as re,Q as ce,R as de,k as ue,ab as _e,T as me,an as pe,S as fe}from"./index-615a714d.js";import{m as S}from"./music-263a48e5.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";const ve={class:"music-monitor-layout"},we={class:"header"},ge={class:"header-right"},ye={class:"user-info"},Ce={class:"username"},Me={class:"main-container"},ke={class:"sidebar"},Ee={class:"content"},Le={class:"search-bar"},be={class:"music-grid"},Ve=["onClick"],xe={class:"music-header"},De={class:"music-icon"},ze={class:"music-actions"},Be={class:"music-content"},Ne=["title"],Se={class:"music-author"},Ae={key:0,class:"music-album"},Ie={key:1,class:"music-tags"},Te={class:"music-footer"},$e={class:"music-stats"},Oe={class:"stat-item"},He={class:"music-time"},Pe={key:1,class:"loading-container"},Re={__name:"MusicMonitor",setup(qe){const k=X(),C=Y(),p=M(!1),f=M([]),h=M(""),E=Z(()=>{if(!h.value)return f.value;const s=h.value.toLowerCase();return f.value.filter(t=>{var d,i,l,v;return((d=t.title)==null?void 0:d.toLowerCase().includes(s))||((i=t.author)==null?void 0:i.toLowerCase().includes(s))||((l=t.album)==null?void 0:l.toLowerCase().includes(s))||((v=t.tagList)==null?void 0:v.toLowerCase().includes(s))})}),A=async()=>{p.value=!0;try{const s=await S.getMusicList();s.code===200?(f.value=s.data||[],await I()):N.error(s.message||"获取音乐列表失败")}catch(s){console.error("获取音乐列表失败:",s),N.error("获取音乐列表失败，请检查网络连接")}finally{p.value=!1}},I=async()=>{const s=f.value.map(async t=>{var d;try{const i=await S.getMonitorVideosByMusicId(t.id);i.code===200&&(t.monitorCount=((d=i.data)==null?void 0:d.length)||0)}catch(i){console.error(`获取音乐 ${t.id} 的监控数量失败:`,i),t.monitorCount=0}});await Promise.all(s)},L=s=>{k.push(`/music-monitor/${s}`)},T=async s=>{if(s==="logout")try{await te.confirm("确认退出登录？","提示",{type:"warning"}),await C.logout(),k.push("/login")}catch{}},$=s=>s?new Date(s).toLocaleDateString("zh-CN"):"-";return ee(()=>{A()}),(s,t)=>{var V;const d=oe,i=m("ArrowDown"),l=ie,v=re,O=ce,H=se,P=m("Odometer"),w=de,R=m("View"),q=m("Headset"),b=m("MusicNote"),F=ne,K=ae,Q=ue,U=_e,j=me,G=m("VideoCamera"),J=fe,W=pe;return r(),_("div",ve,[e("header",we,[t[2]||(t[2]=e("div",{class:"header-left"},[e("h1",{class:"system-title"},"抖音短视频分析系统")],-1)),e("div",ge,[e("div",ye,[o(d,{size:32,class:"user-avatar"},{default:n(()=>{var a,u;return[y(c((u=(a=x(C).user)==null?void 0:a.username)==null?void 0:u.charAt(0)),1)]}),_:1}),e("span",Ce,c((V=x(C).user)==null?void 0:V.username),1),o(H,{onCommand:T,class:"user-dropdown"},{dropdown:n(()=>[o(O,null,{default:n(()=>[o(v,{command:"logout"},{default:n(()=>t[1]||(t[1]=[y("退出登录",-1)])),_:1,__:[1]})]),_:1})]),default:n(()=>[o(l,{class:"dropdown-icon"},{default:n(()=>[o(i)]),_:1})]),_:1})])])]),e("div",Me,[e("nav",ke,[o(F,{"default-active":s.$route.path,router:"",class:"sidebar-menu"},{default:n(()=>[o(w,{index:"/dashboard",class:"menu-item"},{default:n(()=>[o(l,null,{default:n(()=>[o(P)]),_:1}),t[3]||(t[3]=e("span",null,"数据概览",-1))]),_:1,__:[3]}),o(w,{index:"/monitor",class:"menu-item"},{default:n(()=>[o(l,null,{default:n(()=>[o(R)]),_:1}),t[4]||(t[4]=e("span",null,"监控管理",-1))]),_:1,__:[4]}),o(w,{index:"/music-monitor",class:"menu-item"},{default:n(()=>[o(l,null,{default:n(()=>[o(q)]),_:1}),t[5]||(t[5]=e("span",null,"音乐监控",-1))]),_:1,__:[5]}),o(w,{index:"/music",class:"menu-item"},{default:n(()=>[o(l,null,{default:n(()=>[o(b)]),_:1}),t[6]||(t[6]=e("span",null,"音乐管理",-1))]),_:1,__:[6]})]),_:1},8,["default-active"])]),e("main",Ee,[t[7]||(t[7]=e("div",{class:"page-header"},[e("h2",{class:"page-title"},"音乐监控"),e("p",{class:"page-desc"},"选择音乐查看对应的监控视频数据")],-1)),e("div",Le,[o(K,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),placeholder:"搜索音乐标题、作者或专辑","prefix-icon":s.Search,style:{width:"400px"},clearable:"",size:"large"},null,8,["modelValue","prefix-icon"])]),e("div",be,[(r(!0),_(D,null,z(E.value,a=>(r(),_("div",{key:a.id,class:"music-card",onClick:u=>L(a.id)},[e("div",xe,[e("div",De,[o(l,{size:"24"},{default:n(()=>[o(b)]),_:1})]),e("div",ze,[o(U,{content:"查看监控详情",placement:"top"},{default:n(()=>[o(Q,{type:"primary",size:"small",icon:s.View,circle:"",onClick:le(u=>L(a.id),["stop"])},null,8,["icon","onClick"])]),_:2},1024)])]),e("div",Be,[e("h3",{class:"music-title",title:a.title},c(a.title),9,Ne),e("p",Se,c(a.author),1),a.album?(r(),_("p",Ae,"专辑："+c(a.album),1)):g("",!0),a.tagList?(r(),_("div",Ie,[(r(!0),_(D,null,z(a.tagList.split(","),u=>(r(),B(j,{key:u,size:"small",class:"music-tag"},{default:n(()=>[y(c(u),1)]),_:2},1024))),128))])):g("",!0)]),e("div",Te,[e("div",$e,[e("span",Oe,[o(l,null,{default:n(()=>[o(G)]),_:1}),y(" 监控视频："+c(a.monitorCount||0),1)])]),e("div",He," 创建时间："+c($(a.createTime)),1)])],8,Ve))),128))]),!p.value&&E.value.length===0?(r(),B(J,{key:0,description:"暂无音乐数据","image-size":120})):g("",!0),p.value?(r(),_("div",Pe,[o(W,{rows:6,animated:""})])):g("",!0)])])])}}},We=he(Re,[["__scopeId","data-v-8b588f8a"]]);export{We as default};
